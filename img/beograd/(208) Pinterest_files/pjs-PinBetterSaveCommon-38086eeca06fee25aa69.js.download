webpackJsonp(["PinBetterSaveCommon",16,"PinRepEditButtonCommon",67,68,84,135],{"+UuE":function(e,t,n){"use strict";t.b=function(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,a=r?c:"#FEFEFE",l=r?i:"#3B5998";return o.a.createElement("svg",{width:t,height:t,viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("defs",null,o.a.createElement("polygon",{id:"path-1",points:"17.9859534 27.9651806 22.9718644 27.9651806 22.9718644 9 17.9859534 9 13.0000424 9 13.0000424 27.9651806 17.9859534 27.9651806"})),o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-67.000000, -72.000000)"},o.a.createElement("g",{transform:"translate(67.000000, 72.000000)"},o.a.createElement("rect",{id:"avatar",fill:l,x:"0",y:"0",width:"36",height:"36",rx:"18"}),o.a.createElement("mask",{fill:"white"},o.a.createElement("use",{xlinkHref:"#path-1"})),o.a.createElement("path",{d:"M19.4725847,27.9651806 L19.4725847,19.3143216 L22.4126695,19.3143216 L22.852839,15.9428678 L19.4725847,15.9428678 L19.4725847,13.7903436 C19.4725847,12.8142291 19.7469915,12.148978 21.1642797,12.148978 L22.9719068,12.1482247 L22.9719068,9.1328326 C22.6591949,9.09181938 21.5862288,9 20.3379237,9 C17.731822,9 15.9475847,10.571141 15.9475847,13.4565463 L15.9475847,15.9428678 L13.0000424,15.9428678 L13.0000424,19.3143216 L15.9475847,19.3143216 L15.9475847,27.9651806 L19.4725847,27.9651806 Z",fill:a,mask:"url(#mask-2)"})))))},t.g=function(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,a=r?c:"#FFFFFF",l=r?i:"#0DC2FF";return o.a.createElement("svg",{width:t,height:t,viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("defs",null,o.a.createElement("polygon",{id:"path-1",points:"17.9859534 27.9651806 22.9718644 27.9651806 22.9718644 9 17.9859534 9 13.0000424 9 13.0000424 27.9651806 17.9859534 27.9651806"}),o.a.createElement("polygon",{id:"path-3",points:"0 15.4545455 0 0 20 0 20 15.4545455"})),o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-68.000000, -51.000000)"},o.a.createElement("g",{transform:"translate(68.000000, 51.000000)"},o.a.createElement("rect",{fill:l,x:"0",y:"0",width:"36",height:"36",rx:"18"}),o.a.createElement("mask",{fill:"white"},o.a.createElement("use",{xlinkHref:"#path-1"}))),o.a.createElement("g",{transform:"translate(76.000000, 61.000000)"},o.a.createElement("mask",{fill:"white"},o.a.createElement("use",{xlinkHref:"#path-3"})),o.a.createElement("path",{d:"M20,1.82947907 C19.2641282,2.13978309 18.4733165,2.34950437 17.6432935,2.44382678 C18.4905081,1.96094614 19.1410805,1.19635035 19.447456,0.285332236 C18.6546692,0.732389836 17.7765097,1.05709263 16.8418742,1.23210383 C16.0933465,0.47383793 15.0269578,0 13.8468122,0 C11.5806723,0 9.74344343,1.74684262 9.74344343,3.90144184 C9.74344343,4.20722451 9.77980175,4.50500786 9.84973847,4.79054877 C6.43951864,4.62784958 3.41607228,3.07459048 1.39229672,0.714165301 C1.03910165,1.29039452 0.836753356,1.96059834 0.836753356,2.67559835 C0.836753356,4.02915271 1.56121292,5.22334672 2.66220418,5.92297413 C1.98953875,5.90273237 1.35688943,5.72723427 0.803613885,5.43501566 C0.803321263,5.45129253 0.803321263,5.46763897 0.803321263,5.48405496 C0.803321263,7.37439841 2.21771096,8.95130767 4.09480961,9.30967717 C3.75046637,9.39885219 3.38798054,9.44650031 3.01371667,9.44650031 C2.74933246,9.44650031 2.4922638,9.42208499 2.24177914,9.37652366 C2.76389041,10.926583 4.27923479,12.0545566 6.07476499,12.0860669 C4.67047076,13.1324474 2.90120341,13.7561857 0.978821464,13.7561857 C0.64764622,13.7561857 0.321006621,13.7377524 0,13.7017207 C1.81586744,14.8086874 3.97271297,15.4545455 6.28991551,15.4545455 C13.8372289,15.4545455 17.9643732,9.50952103 17.9643732,4.35385551 C17.9643732,4.1846873 17.9604228,4.01642336 17.952522,3.84913325 C18.7541607,3.29905833 19.4498701,2.61188204 20,1.82947907",fill:a,mask:"url(#mask-4)"})))))},t.d=function(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,a=r?c:"#FFFFFF",l=r?i:"#0084FF";return o.a.createElement("svg",{width:t,height:t,viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("g",{transform:"translate(-68.000000, -147.000000)"},o.a.createElement("g",{transform:"translate(68.000000, 147.000000)",fill:l},o.a.createElement("rect",{x:"0",y:"0",width:"36",height:"36",rx:"18"})),o.a.createElement("polygon",{fill:a,points:"88.0700004 170.707273 82.9636366 165.227273 73 170.707273 83.9600003 159 89.1909095 164.48 99.0300007 159"}))))},t.c=function(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,a=r?c:"#8E8E8E",l=r?i:"#EFEFEF";return o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 36 36",version:"1.1"},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{fill:l,cx:"18",cy:"18",r:"18"}),o.a.createElement("g",{id:"Icons/link",transform:"translate(9.000000, 9.000000)",fill:a,fillRule:"nonzero"},o.a.createElement("path",{d:"M15.75075,5.43075 L12.711,8.46975 L11.916,7.67475 L12.42,7.17075 C12.8595,6.732 12.8595,6.0195 12.42,5.58 C11.9805,5.14125 11.268,5.14125 10.82925,5.58 L10.326,6.084 L9.53025,5.289 L12.56925,2.25 L15.75075,5.43075 Z M8.46975,12.71175 L5.43075,15.75075 L2.24925,12.57 L5.289,9.53025 L6.08325,10.32525 L5.58,10.82925 C5.14125,11.26875 5.14125,11.9805 5.58,12.42 C6.01875,12.8595 6.732,12.85875 7.17075,12.42 L7.674,11.916 L8.46975,12.71175 Z M10.97925,0.65925 L7.9395,3.69825 C7.06125,4.5765 7.06125,6.00075 7.9395,6.87975 L8.73525,7.67475 L7.674,8.73525 L6.879,7.9395 C6.00075,7.06125 4.5765,7.06125 3.69825,7.9395 L0.65925,10.9785 C-0.21975,11.8575 -0.21975,13.28175 0.65925,14.16 L3.84,17.3415 C4.71825,18.21975 6.1425,18.21975 7.02075,17.3415 L10.0605,14.3025 C10.93875,13.4235 10.93875,11.99925 10.0605,11.121 L9.2655,10.32525 L10.326,9.2655 L11.121,10.0605 C11.99925,10.93875 13.4235,10.93875 14.30175,10.0605 L17.34075,7.0215 C18.21975,6.14325 18.21975,4.719 17.34075,3.84 L14.16,0.65925 C13.28175,-0.21975 11.8575,-0.21975 10.97925,0.65925 Z",id:"path-1"}))))},t.h=function(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,a=r?c:"none",l=r?i:"#25D366";return o.a.createElement("svg",{width:t,height:t,viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{fill:a,cx:"18",cy:"18",r:"17"}),o.a.createElement("g",{fillRule:"nonzero",fill:l},o.a.createElement("path",{d:"M18,0 C27.945,0 36,8.055 36,18 C36,27.945 27.945,36 18,36 C8.055,36 0,27.945 0,18 C0,8.055 8.055,0 18,0 Z M18,28.5075 C23.805,28.5075 28.5075,23.805 28.5075,18 C28.5075,12.195 23.805,7.4925 18,7.4925 C12.195,7.4925 7.4925,12.195 7.4925,18 C7.4925,20.07 8.1,21.9825 9.135,23.6025 L7.4925,28.5075 L12.3975,26.865 C14.0175,27.9 15.93,28.5075 18,28.5075 Z M23.4,20.34 C23.6925,20.4975 23.895,20.565 23.9625,20.7 C24.03,20.835 24.03,21.42 23.7825,22.1175 C23.535,22.815 22.5675,23.4 21.8025,23.5575 C21.2625,23.67 20.565,23.76 18.2475,22.7925 C15.2775,21.555 13.3425,18.495 13.2075,18.2925 C13.05,18.09 11.9925,16.695 11.9925,15.2325 C11.9925,13.7475 12.735,13.05 13.0275,12.735 C13.275,12.4875 13.68,12.375 14.085,12.375 C14.1975,12.375 14.31,12.375 14.4225,12.375 C14.715,12.3975 14.8725,12.42 15.0525,12.8925 C15.3,13.4775 15.9075,14.94 15.975,15.0975 C16.0425,15.255 16.11,15.4575 16.02,15.66 C15.9075,15.8625 15.84,15.9525 15.6825,16.11 C15.5475,16.29 15.4125,16.425 15.255,16.605 C15.12,16.7625 14.9625,16.9425 15.1425,17.235 C15.3,17.5275 15.9075,18.5175 16.785,19.305 C17.91,20.3175 18.8325,20.6325 19.1475,20.7675 C19.395,20.88 19.6875,20.8575 19.8675,20.655 C20.0925,20.4075 20.3625,20.0025 20.655,19.5975 C20.8575,19.305 21.1275,19.2825 21.375,19.3725 C21.645,19.485 23.1075,20.205 23.4,20.34 Z"}))))},t.e=function(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,a=r?c:"#8e8e8e",l=r?i:"#EFEFEF";return o.a.createElement("svg",{width:t,height:t,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{fill:l,cx:"22",cy:"22",r:"22"}),o.a.createElement("g",{transform:"translate(12 12)",fill:a},o.a.createElement("circle",{cx:"10",cy:"10",r:"6"}),o.a.createElement("circle",{cx:"17",cy:"3",r:"2"}),o.a.createElement("circle",{cx:"17",cy:"17",r:"2"}),o.a.createElement("circle",{cx:"19",cy:"10",r:"1"}),o.a.createElement("circle",{cx:"10",cy:"19",r:"1"}),o.a.createElement("circle",{cx:"1",cy:"10",r:"1"}),o.a.createElement("circle",{cx:"10",cy:"1",r:"1"}),o.a.createElement("circle",{cx:"3",cy:"17",r:"2"}),o.a.createElement("circle",{cx:"3",cy:"3",r:"2"}))))},t.a=function(e){var t=e.size,n=e.grayscale,r=void 0!==n&&n,a=r?c:"#8e8e8e",l=r?i:"#EFEFEF";return o.a.createElement("svg",{width:t,height:t,viewBox:"0 0 36 36",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},o.a.createElement("circle",{id:"Oval",fill:l,cx:"18",cy:"18",r:"18"}),o.a.createElement("g",{transform:"translate(9.000000, 12.000000)",fill:a,fillRule:"nonzero"},o.a.createElement("path",{d:"M16.7972727,2.052 L10.5905455,8.14909091 C10.152,8.57945455 9.576,8.79545455 9,8.79545455 C8.424,8.79545455 7.848,8.57945455 7.40863636,8.14909091 L1.20190909,2.052 C0.962181818,1.81636364 0.962181818,1.43427273 1.20190909,1.19863636 C1.44163636,0.963818182 1.83027273,0.963818182 2.07,1.19863636 L8.27672727,7.29572727 C8.67518182,7.68845455 9.324,7.68845455 9.72327273,7.29572727 L15.9291818,1.19863636 C16.1689091,0.963818182 16.5575455,0.963818182 16.7972727,1.19863636 C17.037,1.43427273 17.037,1.81636364 16.7972727,2.052 Z M0,11.4545455 L18,11.4545455 L18,0 L0,0 L0,11.4545455 Z"}))))},t.f=l;var r=n("d6ZO"),o=n.n(r),a=n("gEaE"),i="#EFEFEF",c="#333333";function l(e){var t=e.onClick,n=e.icon,r=e.buttonSize,i=e.accessibilityLabel,c=e.className,l="tempIconButton ".concat(c);return o.a.createElement("button",{"aria-label":i,className:l,onClick:function(e){return t&&t({event:e})},style:{borderRadius:"50px",width:r,height:r},title:i,type:"button"},o.a.createElement(a.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},n))}l.defaultProps={buttonSize:40}},"/+lb":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("1RBt"),o=n.n(r),a={ready:function(e,t){o.a.ready(e,t)},load:function(e,t,n){a.ready(e,function(){0===t.lastIndexOf("//",0)&&(t=window.location.protocol+t),o()(t,n)})},done:function(e){o.a.done(e)}};t.default=a},"1RBt":function(e,t){
/*!
 * $script.js Async loader & dependency manager
 * https://github.com/ded/script.js
 * (c) Dustin Diaz 2013
 * License: MIT
 */
var n="undefined"==typeof window?null:window.document,r=n?n.getElementsByTagName("head")[0]:null,o=/^https?:\/\//,a={},i={},c={},l="",s={},u=!1,d="push",f="onreadystatechangeName";function p(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return u;return!0}function h(e,t){return p(e,function(e){return!t(e)}),u}function b(e,t,n){e=e[d]?e:[e];var r=t&&"function"==typeof t,u=r?t:n,f=r?e.join(""):t,y=e.length;function g(e){return e.call?e():a[e]}function v(){if(!--y){if(a[f]=1,u)u();for(var e in c)p(e.split("|"),g)&&!h(c[e],g)&&(c[e]=[])}}return setTimeout(function(){h(e,function(e){return null===e?v():s[e]?(f&&(i[f]=1),2==s[e]&&v()):(s[e]=1,f&&(i[f]=1),void m(!o.test(e)&&l?l+e+".js":e,v))})},0),b}function m(e,t){var o=!1,a=function(e,t){o||("loaded"===e.readyState||"completed"===e.readyState?t():setTimeout(function(){a(e,t)},100))},i=n.createElement("script"),c=i.onload=i.onerror=i[f]=function(){o||(o=!0,i.readyState&&!/^c|loade/.test(i.readyState)||(i.onload=i[f]=null,1,s[e]=2,t()))};a(i,c),i.async=1,i.src=e,r.insertBefore(i,r.firstChild)}n&&!n.readyState&&n.addEventListenerName&&(n.addEventListenerName("DOMContentLoaded",function e(){n.removeEventListener("DOMContentLoaded",e,u),n.readyState="complete"},u),n.readyState="loading"),b.get=m,b.order=function(e,t,n){!function r(){var o=e.shift();e.length?b(o,r):b(o,t,n)}()},b.path=function(e){l=e},b.ready=function(e,t,n){e=e[d]?e:[e];var r,o=[];return!h(e,function(e){a[e]||o.push(e)})&&p(e,function(e){return a[e]})?t():(r=e.join("|"),c[r]||(c[r]=[]),c[r][d](t),n&&n(o)),b},b.done=function(e){b([null],e)},e.exports=b},"1Xwf":function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("W/Cr"),i=n("JyNp"),c=n("suNN"),l=n("gEaE"),s=185;var u=Object(i.b)({name:"PinSaveStatusResource",key:"saveStatusResource",options:function(e){return{id:e.pin.id}}},{allowStale:!1})(function(e){var t=e.saveStatusResource.data;return t&&t.pinned_to_board?o.a.createElement(l.b,null,o.a.createElement(l.b,{color:"orange","data-test-id":"already-pinned",display:"flex",padding:3,shape:"rounded",width:s},o.a.createElement(l.K,{align:"center",bold:!0,color:"white",size:"sm"},Object(c.b)(a.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),o.a.createElement(l.b,{display:"flex",justifyContent:"center",marginTop:-3},o.a.createElement(l.n,{accessibilityLabel:"",color:"orange",icon:"heart",size:26}))):null}),d=n("qtmg"),f=n("QuPB"),p=n("AcTh"),h=function(e){var t=e.allowChange,n=e.description,o=e.editing,i=e.onHandleDescriptionBlur,c=e.onHandleDescriptionEdit,s=e.onRefTextArea,u=e.onChange,d=e.onCursorChange,f=function(e){var t=e.description,n=e.editing,o=e.allowChange;return r.createElement(l.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},r.createElement(l.b,{paddingX:1,overflow:"hidden"},r.createElement(l.K,{bold:!0,color:t.clamped?"darkGray":"gray",size:"sm"},t.clamped?t.clamped:a.a._("Tell us about this Pin..."))),r.createElement(l.b,{paddingX:1},!n&&o&&r.createElement(l.n,{accessibilityLabel:a.a._("Edit description"),icon:"edit"})))};return r.createElement(l.b,{mdDisplay:"flex"},o?r.createElement(p.a,{focused:!0,onBlur:i,onFocus:t&&c,onChange:u,onCursorChange:d,placeholder:a.a._("Tell us about this Pin..."),style:t&&{outline:"none",maxHeight:120,minHeight:60,width:"100%"},ref:s,rows:3,value:n.full}):r.createElement(l.b,{width:"100%"},t?r.createElement(l.P,{onTouch:c},r.createElement(f,{description:n,editing:o,allowChange:t})):r.createElement(f,{description:n,editing:o,allowChange:t})))},b=n("MH3C"),m=n("y2lE");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,O=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,C=0,j="g",k=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=v(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==y(o)&&"function"!=typeof o?_(r):o,w(_(_(n)),"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:n.props.pin&&n.props.pin.description&&n.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,editedBefore:!1,flyoutOpened:!1}),w(_(_(n)),"onDescriptionChange",function(e,t){var r=new RegExp(S,j),o="";if(t<e.length){for(var a=r.exec(e),i=r.lastIndex<t;a&&i;)a=r.exec(e),i=r.lastIndex<t;var c=!!a&&S.test(e.slice(a.index,t));i=!!a&&a.index<t,a&&c&&i&&(o=a[C])}else{var l=O.exec(e);o=l?l[C]:""}n.updateDescription(e);var s=S.test(o),u=n.state.isHashtagFlyoutOpen?n.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");n.setState({cursorIndex:t,flyoutCursorIndex:u,description:e,hashtagQuery:o,isHashtagFlyoutOpen:s,flyoutOpened:n.state.flyoutOpened||s})}),w(_(_(n)),"onCursorChange",function(e){var t=n.state,r=t.isHashtagFlyoutOpen,o=t.flyoutCursorIndex;r&&e<o&&n.setState({isHashtagFlyoutOpen:!1})}),w(_(_(n)),"updateDescription",function(e){n.props.updateDescription&&n.props.updateDescription(e)}),w(_(_(n)),"handleDescriptionBlur",function(e){var t=e.target.value.trim(),r=n.state.isHashtagFlyoutOpen;n.updateDescription(t),n.setState({description:t,editing:r})}),w(_(_(n)),"handleDescriptionEdit",function(){n.setState({editing:!0,editedBefore:!0})}),w(_(_(n)),"handleHashtagAddition",function(e){var t=n.props;(0,t.contextLog)(101,{component:208,element:10249,hashtags:e,objectId:t.pin.id});var r=n.state.flyoutCursorIndex,o=Number(r+n.state.hashtagQuery.length),a=n.state.description.slice(0,r)+e+" "+n.state.description.slice(o);n.updateDescription(a),n.setState({description:a,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),w(_(_(n)),"handleRefTextArea",function(e){n._textArea=e}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.color,r=t.isFirstPin,a=t.pin,i=t.pinImageRef,c=this.state,s=c.description,p=c.editing,m=c.flyoutOpened,y=c.hashtagQuery,g=c.isHashtagFlyoutOpen,v=a.images,E=a.link,_=v&&v["236x"],w=_&&_.url||a.image_base64;return o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:r?"50%":"",dangerouslySetInlineStyle:{__style:m&&p?{transform:"translateY(-75px)"}:{}}},o.a.createElement(l.b,{display:"flex",direction:"column",alignItems:"center"},a&&a.id&&o.a.createElement(u,{pin:a}),o.a.createElement(l.b,{paddingY:r?9:0,width:216},o.a.createElement(l.b,{ref:i,maxHeight:m&&p?220:335,shape:"rounded",overflow:"hidden"},w?o.a.createElement(l.p,{alt:s,src:w,naturalHeight:_.height||1,naturalWidth:_.width||1}):!!E&&o.a.createElement(f.a,{color:n||"",description:s,url:E})),o.a.createElement(l.b,{marginTop:2,paddingX:2,id:"PinPanePinMeta"},o.a.createElement("div",{ref:function(t){e.anchor=t}},o.a.createElement(h,{allowChange:!a.is_native,description:Object(b.a)(s),editing:p,hashtagFlyoutOpen:g,onHandleDescriptionBlur:this.handleDescriptionBlur,onHandleDescriptionEdit:this.handleDescriptionEdit,onRefTextArea:this.handleRefTextArea,onChange:this.onDescriptionChange,onCursorChange:this.onCursorChange}))))),this.anchor&&g?o.a.createElement(d.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:p,query:y}):null)}}])&&g(n.prototype,a),i&&g(n,i),t}();t.a=Object(m.a)(k)},"1zCC":function(e,t,n){"use strict";var r=n("EAiy"),o=function(e){var t=document.documentElement,n=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;e&&(n=Math.max(n,0),o=Math.max(o,0)),r.a.isAuthenticated()||(o=340),window.resizeBy(n,o)},a={};a.open=function(e,t,n){var r=function(e,t){var n=screen.width,r=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+t+",left="+Math.round((n-e)/2)+",top="+(r>t?Math.round((r-t)/2):0)}(t,n);window.open(e,void 0,r)},a.shrinkWrap=function(){o(!1)},a.contain=function(){o(!0)},a.resizeViewPort=function(e,t){window.outerWidth?window.resizeTo(e+(window.outerWidth-window.innerWidth),t+(window.outerHeight-window.innerHeight)):(window.resizeTo(500,500),window.resizeTo(e+(500-document.body.offsetWidth),t+(500-document.body.offsetHeight)))},t.a=a},"28Da":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function e(t){var n,r,o,a=t.result;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o="BoardPickerUserNavStopTraceEvent",(r="name")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.result=a}},"2FON":function(e,t){},"2aok":function(e,t){},"3ZhG":function(e,t,n){"use strict";t.a=function(e){var t=e.htmlFor,n=e.errorMessage;return r.createElement(o.q,{htmlFor:t},r.createElement(o.b,{marginTop:1},r.createElement(o.K,{color:"orange",size:"sm"},n)))};var r=n("d6ZO"),o=(n.n(r),n("gEaE"))},"63R5":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.OTHER,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"web":"mweb";return new Promise(function(l,s){if(document.querySelector('script[src="'.concat(e,'"]'))){var u=0;if(t===c.GPLUS_ONE)if(window.gapi)l();else var d=setInterval(function(){window.gapi||u===o?(clearInterval(d),l()):(u+=1,r.default.increment("".concat(n,".loadScript.gplus_one.tries_").concat(u),i))},a);else if(t===c.FACEBOOK)if(window.FB)l();else var f=setInterval(function(){window.FB||u===o?(clearInterval(f),l()):(u+=1,r.default.increment("".concat(n,".loadScript.facebook.tries_").concat(u),i))},a);else l()}else{var p=document.createElement("script");p.src=e,p.async=!0,p.addEventListener("load",l),p.addEventListener("error",s),document.getElementsByTagName("head")[0].appendChild(p)}})};var r=n("FfPm"),o=20,a=100,i=.01,c=Object.freeze({OTHER:0,FACEBOOK:1,GPLUS_ONE:2})},"6oHq":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("YlIK"),o=n("mIxQ"),a=n.n(o),i=n("THYI"),c=n.n(i),l=n("/+lb"),s=n("EAiy"),u=n("63R5"),d=!1,f={ensureInit:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en_US";if(r)Object(u.b)("//connect.facebook.net/".concat(o,"/sdk.js"),u.a.FACEBOOK,!0).then(function(){t._fbCallback(e,n)});else{l.default.load([],"//connect.facebook.net/".concat(o,"/sdk.js"),"fb"),l.default.ready("fb",function(){t._fbCallback(e,n)})}},_fbCallback:function(e,t){var n=window.FB;n&&(d||(n.init({appId:a.a.FB_KEY,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",function(e){f.refreshAccessToken(t)}),d=!0),e(n))},ensureLoggedIn:function(e,t){f.ensureInit(function(t){f.logIn(t,e)},t)},logIn:function(e,t){e&&(e.getUserID()?t(e):e.login(function(){t(e)}))},refreshAccessToken:function(e){e.isAuthenticated()&&e.attributes.facebook_id&&!e.isLimitedLogin()&&f.ensureInit(function(e){if(e.getUserID()){var t=e.getAccessToken();if(t)c.a.create("UserSocialNetworkResource",{facebook_token:t}).callUpdate({showError:!1})}},e)},injectTrackingPixel:function(e){!function(){var e=window._fbq||(window._fbq=[]);if(!e.loaded){var t=document.createElement("script");t.async=!0,t.src="//connect.facebook.net/en_US/fbds.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),e.loaded=!0}}(),window._fbq=window._fbq||[],window._fbq.push(["track",e,{value:"0.00",currency:"USD"}])}};t.default=r.a.expose("Facebook",f)},"8EHR":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r="PinSaveRequestStartTraceEvent",(n="name")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}},"8N7E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"PinRepEditButton",function(){return c});var r=n("d6ZO"),o=(n.n(r),n("W/Cr")),a=n("mu3h"),i=n("gEaE"),c=function(e){var t=e.handlePinEditButtonClick,n=e.style;return r.createElement(i.o,{accessibilityLabel:o.a._("Edit","edit button on pin"),bgColor:n&&n.bgColor||"white",icon:"edit",iconColor:n&&n.iconColor||"darkGray",onClick:function(e){var n=e.event;t(n)},size:n&&n.size||"md"})};t.default=Object(a.a)(c)},"8e8Q":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",COMMUNITY:"community"}},"9FFf":function(e,t,n){var r=n("2azc"),o=1,a=4;e.exports=function(e){return r(e,o|a)}},"9bGG":function(e,t,n){"use strict";t.a=function(e){return function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;return l(e)}(this,(e=i(n)).call.apply(e,[this].concat(a))),s(l(l(t)),"state",{isHovering:!1}),s(l(l(t)),"handlers",{onMouseOver:function(){return t._setHover(!0)},onMouseLeave:function(){return t._setHover(!1)}}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,t),function(e,t,n){t&&a(e.prototype,t);n&&a(e,n)}(n,[{key:"componentDidMount",value:function(){m(this)}},{key:"componentWillUnmount",value:function(){this.hoverTimer&&clearTimeout(this.hoverTimer),y(this)}},{key:"_setHover",value:function(e){var t=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=e&&p?setTimeout(function(){return t._setHover(e)},d):setTimeout(function(){e!==t.state.isHovering&&t.setState({isHovering:e})},u)}},{key:"render",value:function(){return r.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}]),n}(r.Component)};var r=n("d6ZO");n.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=32,d=100,f=null,p=!1,h=[],b=function(){f&&clearTimeout(f),p=!0,f=setTimeout(function(){p=!1},d)},m=function(e){0===h.length&&window.addEventListener("scroll",b),h.push(e)},y=function(e){var t=h.indexOf(e);h.splice(t,1),0===h.length&&window.removeEventListener("scroll",b)}},AcTh:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("d6ZO"),o=n.n(r),a=n("IaRT");n.n(a);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(e,n){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=l(t).call(this,e,n),r=!a||"object"!==i(a)&&"function"!=typeof a?u(o):a,d(u(u(r)),"handleChange",function(e){r.props.onChange&&r.props.onChange.call(u(u(r)),e.target.value,e.target.selectionStart),r.setState({value:e.target.value})}),d(u(u(r)),"updateCursor",function(e){r.props.onCursorChange&&r.props.onCursorChange(e.target.selectionStart)}),d(u(u(r)),"handleKeyUp",function(e){r.props.onKeyUp&&r.props.onKeyUp(e),r.updateCursor(e)}),d(u(u(r)),"handleKeyDown",function(e){r.props.onKeyDown&&r.props.onKeyDown(e)}),d(u(u(r)),"handleFocus",function(e){r.props.onFocus&&r.props.onFocus(e),r.updateCursor(e)}),d(u(u(r)),"handleBlur",function(e){r.props.onBlur&&r.props.onBlur(e)}),d(u(u(r)),"handleClick",function(e){r.props.onClick&&r.props.onClick(e),r.updateCursor(e)}),r.state={isFocused:r.props.focused||!1,value:r.props.value},r}var n,a,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.focusIfNeeded()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({isFocused:e.focused,value:e.value})}},{key:"componentDidUpdate",value:function(){this.focusIfNeeded()}},{key:"focusIfNeeded",value:function(){this.state.isFocused&&document.activeElement!==this._textArea&&this._textArea.focus()}},{key:"select",value:function(){this._textArea.select()}},{key:"render",value:function(){var e=this,t=this.props;return o.a.createElement("textarea",{className:t.className,cols:t.cols,disabled:t.disabled?"disabled":"",id:t.id,name:t.name,onBlur:this.handleBlur,onChange:this.handleChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:t.placeholder,ref:function(t){e._textArea=t},rows:t.rows,style:t.style,value:this.state.value})}}])&&c(n.prototype,a),f&&c(n,f),t}();f.defaultProps={validators:[]}},CogI:function(e,t,n){"use strict";var r=n("d6ZO"),o=(n.n(r),n("rv2a")),a=n("gEaE");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}var n,i,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this,t=this.props,n=t.description,i=t.error,l=t.id,s=t.label,u=t.required,d=void 0!==u&&u,f=t.onLabelTouch,p=c(t,["description","error","id","label","required","onLabelTouch"]);return r.createElement(o.a,{description:n,error:i,id:l,label:s,required:d,onLabelTouch:f},r.createElement(a.M,Object.assign({},p,{hasError:!!i,id:l,ref:function(t){e.textfield=t?t.textfield:null}})))}}])&&l(n.prototype,i),f&&l(n,f),t}();t.a=f},DKBQ:function(e,t,n){"use strict";t.a=function(e,t){return function(n){return n(Object(r.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}};var r=n("S+Qs")},DNL0:function(e,t){},FTnl:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n("d6ZO"),o=n.n(r),a=n("GGB8"),i=n.n(a),c=n("IaRT"),l=(n.n(c),n("gEaE"));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=d(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==s(o)&&"function"!=typeof o?p(r):o,h(p(p(n)),"state",{hiding:!1,visible:!1}),h(p(p(n)),"handleHide",function(){n.setState({hiding:!0}),n.timeout=setTimeout(n.props.onHide,200)}),h(p(p(n)),"handleMouseEnter",function(){n.timeout&&clearTimeout(n.timeout)}),h(p(p(n)),"handleMouseLeave",function(){n.timeout=setTimeout(n.handleHide,n.props.duration)}),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.setState({visible:!0})},100),this.timeout=setTimeout(this.handleHide,this.props.duration)}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.imageUrl,r=e.href,a=e.onClick,c=e.text,s=e.openNewPage,u=this.props.color?this.props.color:"darkGray",d="string"==typeof c?c:"".concat(c[0]," ").concat(c[1]),f=t;r&&(f=n?void 0:"arrow-circle-forward");var p=r||n?o.a.createElement("div",{className:"imageWrapper"},o.a.createElement("img",{className:"toastImage",src:n,alt:d})):void 0,h=o.a.createElement(l.N,{color:u,icon:f,text:c,thumbnail:p});return o.a.createElement("div",{className:i()("ToastBase","react",{visible:this.state.visible},{hiding:this.state.hiding}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-test-id":"toast"},r?o.a.createElement("a",{href:r,onClick:a,target:s?"_blank":null,rel:s?"noopener noreferrer":null},h):h)}}])&&u(n.prototype,a),c&&u(n,c),t}();h(b,"defaultProps",{duration:2e3})},FUgs:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("tmfO"),i=n("gEaE");function c(e){var t=e.action,n=e.alignCenter,r=t.title,c=t.description,l=t.button,s=r&&r.text,u=c&&c.text,d=l&&l.text||"",f=l&&l.link||"",p=l&&d&&f.startsWith("http");return o.a.createElement(i.b,null,!!s&&o.a.createElement(i.b,{marginBottom:1},o.a.createElement(i.K,{bold:!0,align:n?"center":"left"},s)),!!u&&o.a.createElement(i.b,{marginBottom:1},o.a.createElement(i.K,{align:n?"center":"left"},u)),p&&o.a.createElement(i.b,{marginBottom:1},o.a.createElement(a.b,{to:f},o.a.createElement(i.c,{text:d,color:"white"}))))}t.a=function(e){var t=e.inModal,n=e.notice,r=n.title,a=n.description,u=n.actions,d=void 0===u?[]:u,f=a&&a.text||"",p=1===d.length;return o.a.createElement(i.b,{shape:"rounded",padding:6,dangerouslySetInlineStyle:{__style:t?s:l}},!!r&&!t&&o.a.createElement(i.b,{marginBottom:2,display:"flex"},o.a.createElement(i.m,{size:"xs"},r)),!!f&&o.a.createElement(i.b,{marginBottom:4},o.a.createElement("span",{style:{whiteSpace:"pre-wrap"}},o.a.createElement(i.K,{overflow:"normal",align:t?"center":"left"},f))),!!d.length&&o.a.createElement(i.b,{display:"flex",wrap:!0,marginStart:-2,marginEnd:-2,direction:t?"column":"row"},d.map(function(e){return o.a.createElement(i.b,{column:t||p?12:6,paddingY:1,paddingX:2,key:JSON.stringify(e)},o.a.createElement(c,{action:e,alignCenter:t||p}))})))};var l={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},s={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"}},GDBS:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("d6ZO"),o=n.n(r),a=n("RklN"),i=(n.n(a),n("gEaE"));function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=this,o=(e=s(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==c(o)&&"function"!=typeof o?d(r):o,f(d(d(n)),"setSearchFieldRef",function(e){n.searchField||(n.searchField=e)}),f(d(d(n)),"setFocus",function(){if(n.searchField){var e=Object(a.findDOMNode)(n.searchField);if(e instanceof HTMLElement){var t=e.querySelector("input");t instanceof HTMLInputElement&&t.focus()}}}),n}var n,p,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(p=[{key:"componentDidMount",value:function(){this.props.focused&&window.requestAnimationFrame(this.setFocus)}},{key:"componentDidUpdate",value:function(){this.props.focused&&this.setFocus()}},{key:"render",value:function(){var e=this.props,t=e.accessibilityLabel,n=e.id,r=e.onBlur,a=e.onChange,c=e.onFocus,l=e.placeholder,s=e.value;return o.a.createElement(i.D,{accessibilityLabel:t,id:n,onBlur:r,onChange:a,onFocus:c,placeholder:l,ref:this.setSearchFieldRef,value:s})}}])&&l(n.prototype,p),h&&l(n,h),t}()},GU18:function(e,t,n){"use strict";var r=n("d6ZO");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t,n;return n=t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t=function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;return s(e)}(this,(e=c(n)).call.apply(e,[this].concat(a))),u(s(s(t)),"makeCancelablePromise",function(e,n){if(n){var r=t.cancelCallbackMap[n];r&&(r(),delete t.cancelCallbackMap[n])}var o=function(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)},function(e){return r(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}}(e),a=o.cancel,i=o.promise;return n?t.cancelCallbackMap[n]=a:t.cancelCallbacks.push(a),i}),u(s(s(t)),"cancelCallbacks",[]),u(s(s(t)),"cancelCallbackMap",{}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,t),function(e,t,n){t&&i(e.prototype,t);n&&i(e,n)}(n,[{key:"componentWillUnmount",value:function(){var e=this;a(Object.keys(this.cancelCallbackMap).map(function(t){return e.cancelCallbackMap[t]})).concat(a(this.cancelCallbacks)).forEach(function(e){return e()}),this.cancelCallbacks=[],this.cancelCallbackMap={}}},{key:"render",value:function(){return r.createElement(e,Object.assign({},this.props,{makeCancelablePromise:this.makeCancelablePromise}))}}]),n}(r.Component),u(t,"displayName","WithPromiseCancellation(".concat(e.displayName||e.name,")")),n}},GhED:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function e(t){var n,r,o,a=t.result;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o="PinSaveRequestStopTraceEvent",(r="name")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this.result=a}},HEYN:function(e,t,n){"use strict";t.b=d,t.a=function(e){var t=e.boardId,n=e.name,i=e.nameSource,f=e.pinImport,p=0;"RECOMMENDATION"===i?p=1:"EDITED_RECOMMENDATION"===i&&(p=2);var h={board_id:t,initial_pins:f&&!f.all?f.pinIds:[],name:n,name_source:p};return function(e){return c.a.create("BoardSectionResource",h).callCreate({showError:!1}).then(function(n){var i=n.resource_response.data;e(d(t,i)),e(Object(o.a)({feedId:t,feedType:s.b.BOARD_SECTIONS,itemIds:[i.id],itemType:"board_section"})),e(Object(l.b)(t,"pin_count")),e(Object(u.f)("BoardSectionsRepinResource",{board_id:t}));var c=f||{all:!1,pinIds:[]},p=c.all,h=c.pinIds;return p?new Promise(function(n,r){return e(Object(a.a)({inverseSelection:!0,selectedPinIds:h,source:{boardId:t,sectionId:null},target:{boardId:t,sectionId:i.id}})).then(function(){return n(i)}).catch(r)}):(h.length>0&&e(Object(r.a)(s.b.BOARD_PINS,t)),i)})}};var r=n("VF/E"),o=n("Jw9X"),a=n("NmQ5"),i=n("THYI"),c=n.n(i),l=n("g5tP"),s=n("mZ/m"),u=n("S+Qs");function d(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}},HLDn:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return s});var r=n("B0A7"),o=n("VF/E"),a=n("S+Qs"),i=["alphabetical","last_pinned_to","oldest","newest","custom"],c={name:"BoardsResource",key:"boardsResource",options:function(e){var t=e.boardOrder,n=e.mixPublicSecret;return{privacy_filter:"all",sort:t||"last_pinned_to",field_set_key:"profile_grid_item",username:e.username,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0}}},l=function(e,t,n){return{privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}},s=function(e){return i.reduce(function(t,n){var i=[Object(o.a)("profileBoards",Object(r.c)(e,n))];return[!0,!1].forEach(function(t){i.push(Object(a.f)(c.name,c.options({username:e,boardOrder:n,mixPublicSecret:t})))}),t.concat(i)},[])}},Ib0y:function(e,t,n){"use strict";var r=n("b6H4");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s,u,d,f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,c(t).call(this,16))).viewType=21,e.sampleRate=.1,e.cause=4,e.registeredEvents.BoardPickerUserNavStartTraceEvent=e.handleStartCurrTimer,e.registeredEvents.BoardPickerUserNavStopTraceEvent=e.handleStopTiming,e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["a"]),n=t,(o=[{key:"handleStopTiming",value:function(e){if(this._currTimer){var t=this._currTimer;2===e.result&&(t.setResult(2),t.stopTiming(),this.constructPWT()),t.setResult(e.result),t.stopTiming(),this.constructPWT()}}}])&&a(n.prototype,o),s&&a(n,s),t}();function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}d="pwt/board_picker",(u="traceName")in(s=f)?Object.defineProperty(s,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[u]=d,n.d(t,"a",function(){return h});var h=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"handlers",[f]),p(this,"name","BoardPickerUserNavStartTraceEvent")}},JqyP:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("2aok"),i=(n.n(a),n("W/Cr")),c=n("XSNT"),l=n("gEaE"),s=n("+UuE"),u=function(e){var t=e.link,n=e.grayscale,r=e.handleClick,a=e.handleFocus;return o.a.createElement("div",{className:"ShareLink"},o.a.createElement("div",{className:"link"},o.a.createElement("div",{className:"icon"},o.a.createElement(s.c,{size:30,grayscale:n})),o.a.createElement(c.a,{ref:function(e){return e&&e.focus()},className:"Input linkField",value:t,onFocus:a}),o.a.createElement("div",{className:"cancelLink",onClick:r},o.a.createElement(l.n,{accessibilityLabel:i.a._("Close","close copy link"),icon:"cancel",bgColor:"white",color:"gray"}))))};u.defaultProps={grayscale:!1},t.a=u},Jw9X:function(e,t,n){"use strict";t.a=function(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},Kiph:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=(n("X6qR"),n("28Da")),i=n("OIxG"),c=n("iSgY"),l=n("gEaE"),s=function(e){e.isOpen;var t=e.showCollaborativeIcon,n=e.showPrivateIcon,r=e.showProtectedIcon,a=e.showSectionsIcon;return t||n||r||a?o.a.createElement(l.b,{display:"flex",direction:"row",dangerouslySetInlineStyle:{__style:{marginRight:20,paddingLeft:8}},alignItems:"center"},n&&o.a.createElement(c.a,{type:"secret"}),r&&o.a.createElement(c.a,{type:"protected"}),t&&o.a.createElement(c.a,{type:"group"}),a&&o.a.createElement(c.a,{type:"sections"})):null},u=n("BAXv"),d=n("W/Cr"),f=n("rgtM"),p=n("MQ2h"),h=n("8Zvv");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=y(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==b(o)&&"function"!=typeof o?v(r):o,E(v(v(n)),"state",{hovered:!1}),E(v(v(n)),"handleMouseEnter",function(){n.setState({hovered:!0})}),E(v(v(n)),"handleMouseLeave",function(){n.setState({hovered:!1})}),E(v(v(n)),"handleTouch",function(){var e=n.props,t=e.board;(0,e.onClick)(t)}),E(v(v(n)),"handleButtonClick",function(e){var t=e.event,r=n.props.onButtonClick;n.handleTouch(),r&&r(),t.stopPropagation()}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.state.hovered,t=this.props,n=t.board,r=t.buttonText,a=t.isSectionOpen,i=t.requestContext,c=t.shouldOpenSections,p=!!n.section_count&&n.section_count>0,b=Object(h.a)(i,n.image_cover_url);return o.a.createElement(f.a,{id:"board-picker-section"},o.a.createElement(l.P,{onTouch:this.handleTouch,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o.a.createElement(l.b,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:52,marginStart:3,marginEnd:3,marginBottom:1,dangerouslySetInlineStyle:{__style:{borderRadius:12}}},o.a.createElement(l.b,{flex:"none",marginBottom:1,marginLeft:2,marginRight:3,marginTop:1,overflow:"hidden",width:32,height:36,dangerouslySetInlineStyle:{__style:{borderRadius:8}}},b&&!c&&o.a.createElement(l.u,{wash:!0,width:36,height:36},o.a.createElement(l.p,{src:b,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})),b&&c?o.a.createElement(l.u,{wash:!0,width:36,height:36},o.a.createElement(l.p,{src:b,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"})):o.a.createElement(l.b,{color:c?"lightGray":"transparent",width:"100%",height:"100%"})),o.a.createElement(l.b,{flex:"grow",paddingY:1,overflow:"hidden",marginStart:1},o.a.createElement(l.K,{bold:c||!c,truncate:!0},n.name)),n&&(!e&&(p||c||a)||a&&!e||e&&p&&!a)?o.a.createElement(l.b,null,o.a.createElement(s,{isOpen:n.isOpen,showCollaborativeIcon:!!n.is_collaborative,showPrivateIcon:n.privacy===u.a.BoardPrivacy.SECRET,showProtectedIcon:n.privacy===u.a.BoardPrivacy.PROTECTED,showSectionsIcon:p&&c})):null,e&&(0===n.section_count||!c)&&o.a.createElement(l.b,{marginEnd:2},o.a.createElement(l.c,{accessibilityLabel:"save button",color:"red",inline:!0,onClick:this.handleButtonClick,text:r||d.a._("Save","save button")})))))}}])&&m(n.prototype,a),i&&m(n,i),t}();E(_,"defaultProps",{shouldOpenSections:!0});var w=Object(p.compose)(i.b)(_);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=C(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==S(o)&&"function"!=typeof o?k(r):o,P(k(k(n)),"state",{hovered:!1}),P(k(k(n)),"handleMouseEnter",function(){n.setState({hovered:!0})}),P(k(k(n)),"handleMouseLeave",function(){n.setState({hovered:!1})}),P(k(k(n)),"handleTouch",function(){var e=n.props,t=e.board;(0,e.onClick)(e.section,t)}),P(k(k(n)),"handleButtonClick",function(e){var t=e.event,r=n.props.onButtonClick;n.handleTouch(),r&&r(),t.stopPropagation()}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.state.hovered,t=this.props,n=t.buttonText,r=t.section;return o.a.createElement(l.P,{onTouch:this.handleTouch,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o.a.createElement(l.b,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:52,marginTop:1,dangerouslySetInlineStyle:{__style:{borderRadius:12,marginLeft:53}},width:256},o.a.createElement(l.b,{flex:"grow",paddingY:1,marginStart:4},o.a.createElement(l.K,{truncate:!0},r.title)),e&&o.a.createElement(l.b,{marginEnd:2},o.a.createElement(l.c,{accessibilityLabel:"save button",color:"red",inline:!0,text:n||d.a._("Save","save button"),onClick:this.handleButtonClick}))))}}])&&O(n.prototype,a),i&&O(n,i),t}(),x=n("JyNp"),T=Object(x.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function(e){return{board_id:e.board.id}}},{allowStale:!1})(function(e){var t=e.board,n=e.buttonText,r=e.sectionsResource,a=e.onClick,i=e.onButtonClick,c=r&&r.data||[];return o.a.createElement(l.b,null,!r.isLoaded&&o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},o.a.createElement(l.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!0})),r.isLoaded&&o.a.createElement(l.b,null,c.map(function(e){return o.a.createElement(I,{board:t,buttonText:n,key:e.id,onButtonClick:i,onClick:a,section:e})})))});function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=L(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==B(o)&&"function"!=typeof o?M(r):o,A(M(M(n)),"state",{hovered:!1}),A(M(M(n)),"handleMouseEnter",function(){n.setState({hovered:!0})}),A(M(M(n)),"handleMouseLeave",function(){n.setState({hovered:!1})}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.state.hovered,t=this.props,n=t.onClick,r=t.title;return o.a.createElement(l.P,{onTouch:function(){n({title:r})},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},o.a.createElement(l.b,{color:e?"lightGray":"white",display:"flex",alignItems:"center",height:52,marginStart:3,marginEnd:3,marginBottom:1,dangerouslySetInlineStyle:{__style:{borderRadius:12}}},o.a.createElement(l.b,{flex:"none",marginBottom:1,marginLeft:2,marginRight:3,marginTop:1,overflow:"hidden",width:36,height:36,dangerouslySetInlineStyle:{__style:{borderRadius:4}}},o.a.createElement(l.b,{color:"lightGray",width:"100%",height:"100%"})),o.a.createElement(l.b,{flex:"grow",paddingY:1},o.a.createElement(l.K,{bold:!0,truncate:!0},r)),e&&o.a.createElement(l.b,{marginEnd:2},o.a.createElement(l.c,{accessibilityLabel:"create button",color:"red",inline:!0,text:d.a._("Create","create button to create a new board")}))))}}])&&R(n.prototype,a),i&&R(n,i),t}(),F=Object(x.b)({name:"BoardTitleSuggestionsResource",key:"suggestionsResource",options:function(e){return{pin_id:e.pinId}}},{allowStale:!1})(function(e){var t=e.suggestionsResource,n=e.onClick,r=t&&t.data||[];return o.a.createElement(l.b,null,!t.isLoaded&&o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},o.a.createElement(l.G,{accessibilityLabel:d.a._("loading board suggestions","accessibility text for loading spinner"),show:!0})),t.isLoaded&&o.a.createElement(l.b,null,r.map(function(e,t){return o.a.createElement(N,{key:t,title:e.title,onClick:n})})))});function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=W(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==H(o)&&"function"!=typeof o?K(r):o,G(K(K(n)),"state",{hovering:!1}),G(K(K(n)),"handleMouseEnter",function(){n.setState({hovering:!0})}),G(K(K(n)),"handleMouseLeave",function(){n.setState({hovering:!1})}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onCreateBoardClick,n=e.isBoardCreate,o=this.state.hovering;return r.createElement(l.b,{"data-test-id":"create-board",height:"100%",display:"flex"},r.createElement(l.P,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTouch:t,shape:"rounded"},r.createElement(l.b,{display:"flex",alignItems:"center",color:o?"lightGray":"white",padding:2,width:"100%",height:"100%"},r.createElement(l.b,{marginRight:5,marginLeft:4},r.createElement(l.n,{accessibilityLabel:"",size:28,icon:"add-circle",color:"red"})),n?r.createElement(l.K,{truncate:!0,align:"center",bold:!0},d.a._("Create board")):r.createElement(l.K,{truncate:!0,align:"center",bold:!0},d.a._("Create section")))))}}])&&U(n.prototype,o),a&&U(n,a),t}(),Y=n("GDBS"),q=n("eD+K"),V=n("n9Oa"),X=n("Qqx1"),Z=n("woYD");function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ae(e,t,n[t])})}return e}function ee(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return se}),n.d(t,"a",function(){return ue});var ie=128.5,ce=52,le=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=this,a=(e=ne(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==J(a)&&"function"!=typeof a?oe(r):a,ae(oe(oe(n)),"state",{isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0}),ae(oe(oe(n)),"getItems",function(){var e=n.props,t=e.boardResource,r=e.suggestedBoardsShortListResource;if(!t||!t.data)return[];var o=(t&&t.data).all_boards.map(function(e){return n.mapBoards(e,"allBoards",0)}),a=(r&&r.data||[]).map(function(e,t){return n.mapBoards(e,"shortlist",t+1)}),i=n.state.searchQuery;return i.length>=X.a?ee(Object(V.a)(o,i)):ee(o.length>3&&a&&a.length?[{type:"header",title:d.a._("Top board suggestions","Header for top suggesions in board picker")}].concat(ee(a)):[]).concat([{type:"header",title:d.a._("All boards","Header for all boards in board picker")}].concat(ee(o)),ee(o.length<=3?[{type:"header",title:d.a._("Suggested board names","Header for suggested boards in board picker")}]:[]))}),ae(oe(oe(n)),"mapBoards",function(e,t,r){var o=n.props.setBoardWithSection,a=n.state,i=a.selectedBoardId,c=a.selectedBoardCategory,l=e.id===i&&t===c;return l&&o&&o(e),$({},e,{category:t,isOpen:l,gridIndex:r})}),ae(oe(oe(n)),"handleBack",function(){var e=n.props.setBoardWithSection;n.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),ae(oe(oe(n)),"handleSectionClick",function(e,t){var r=n.props.onItemChosen;Object(Z.a)(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),r({boardId:t.id,url:e.slug?"".concat(t.url).concat(e.slug,"/"):t.url,sectionId:e.id,title:e.title||""})}),ae(oe(oe(n)),"handleBoardWithSectionsClick",function(e){var t=n.state,r=t.selectedBoardId,o=t.selectedBoardCategory,a=r===e.id&&o===e.category;n.setState({isSectionOpen:!0,selectedBoardId:a?"":e.id,selectedBoardCategory:a?"":e.category})}),ae(oe(oe(n)),"handleBoardClick",function(e){var t=e.board,r=e.toggleSections,o=n.props.onItemChosen;n.setState({searchBoxFocused:!1}),r?n.handleBoardWithSectionsClick({id:t.id,category:t.category}):(Object(Z.a)(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),o({boardId:t.id,url:t.url,title:t.name||""}))}),ae(oe(oe(n)),"handleSearchQueryUpdate",function(e){n.setState(function(t){return $({},t,{searchQuery:e})})}),ae(oe(oe(n)),"renderFlyoutContents",function(){var e=n.props,t=e.boardResource,r=e.buttonText,a=e.onBoardCreate,i=e.onButtonClick,c=e.pin,s=e.suggestedBoardsShortListResource,u=n.state,p=u.searchBoxFocused,h=u.searchQuery;if(!t)return null;var b=[];(t.isLoaded&&!t.error||s&&s.data&&!s.error)&&(b=n.getItems());var m=b.filter(function(e){return e&&"allBoards"===e.category}).length;return o.a.createElement(o.a.Fragment,null,t&&t.isLoaded&&o.a.createElement(l.b,{position:"relative"},o.a.createElement(l.b,{display:"flex",direction:"column",width:"100%",dangerouslySetInlineStyle:{__style:{zIndex:0}}},o.a.createElement(l.b,{flex:"grow",padding:3},o.a.createElement(Y.a,{accessibilityLabel:d.a._("Search through your boards","search bar placeholder text"),focused:p,id:"pickerSearchField",onChange:function(e){var t=e.value;return n.handleSearchQueryUpdate(t)},placeholder:d.a._("Search","search bar placeholder text"),value:h})),o.a.createElement(l.b,{minHeight:"100%",maxHeight:240,overflow:"scrollY"},!s||!s.isLoaded&&o.a.createElement(f.a,{id:"suggestedBoardsContainer"},o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:ie},o.a.createElement(l.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!0}))),b.map(function(e,t){return"header"===e.type?o.a.createElement(l.b,{key:e.title,paddingX:2,paddingY:1,marginTop:t>0?2:1},o.a.createElement(l.K,{size:"sm"},e.title)):o.a.createElement(l.b,{key:"".concat(e.category,"-").concat(e.id)},o.a.createElement(w,{board:e,buttonText:r,onClick:function(e){n.handleBoardClick({board:e,toggleSections:!!e.section_count})},onButtonClick:i}),e.isOpen&&o.a.createElement(l.b,null,o.a.createElement(w,{board:e,buttonText:r,onClick:function(e){n.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:i,shouldOpenSections:!1}),o.a.createElement(T,{board:e,buttonText:r,onClick:n.handleSectionClick,onButtonClick:i})))}),m<=3&&c?o.a.createElement(F,{pinId:c.id,onClick:a}):null),o.a.createElement(l.j,null),o.a.createElement(l.b,{overflow:"hidden",height:"100%",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}}},o.a.createElement(Q,{onCreateBoardClick:function(){return a({title:n.state.searchQuery})}})))))}),ae(oe(oe(n)),"renderFlyoutContentsExperiment",function(){var e=n.props,t=e.boardResource,r=e.buttonText,a=e.onBoardCreate,i=e.onButtonClick,c=e.pin,s=e.suggestedBoardsShortListResource,u=n.state,p=u.isSectionOpen,h=u.searchBoxFocused,b=u.searchQuery;if(!t)return null;var m=[];(t.isLoaded&&!t.error||s&&s.data&&!s.error)&&(m=n.getItems());var y=m.filter(function(e){return e&&"allBoards"===e.category}).length,g=null===p?"":"BoardsSlideRight",v=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.j,null),o.a.createElement(l.b,{overflow:"hidden",height:ce,dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}}},o.a.createElement(Q,{onCreateBoardClick:function(){return a({title:n.state.searchQuery})},isBoardCreate:e})))};return o.a.createElement(l.b,{display:"flex",direction:"row"},t&&t.isLoaded&&o.a.createElement("div",{className:p?"BoardsSlideLeft":g},o.a.createElement(l.b,{position:"relative"},o.a.createElement(l.b,{display:"flex",direction:"row",width:640,dangerouslySetInlineStyle:{__style:{zIndex:0}}},o.a.createElement(l.b,{display:"flex",direction:"column",width:320},o.a.createElement(l.b,{flex:"grow",padding:3},o.a.createElement(Y.a,{accessibilityLabel:d.a._("Search through your boards","search bar placeholder text"),focused:h,id:"pickerSearchField",onChange:function(e){var t=e.value;return n.handleSearchQueryUpdate(t)},placeholder:d.a._("Search","search bar placeholder text"),value:b})),o.a.createElement(l.b,{maxHeight:322,overflow:"scrollY"},!s||!s.isLoaded&&o.a.createElement(f.a,{id:"suggestedBoardsContainer"},o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:ie},o.a.createElement(l.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!0}))),m.map(function(e,t){return"header"===e.type?o.a.createElement(l.b,{key:e.title,paddingX:3,paddingY:1,marginTop:t>0?2:1},o.a.createElement(l.K,{size:"sm"},e.title)):o.a.createElement(l.b,{key:"".concat(e.category,"-").concat(e.id)},o.a.createElement(w,{board:e,buttonText:r,onClick:function(e){n.handleBoardClick({board:e,toggleSections:!!e.section_count})},onButtonClick:i}))})),y<=3&&c?o.a.createElement(F,{pinId:c.id,onClick:a}):null,v(!0)),o.a.createElement(l.b,{display:"flex",direction:"column",width:320},o.a.createElement(l.b,{display:"flex",direction:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},o.a.createElement(l.h,{span:2},o.a.createElement(l.b,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3},o.a.createElement(l.o,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:n.handleBack,size:"sm"}))),o.a.createElement(l.h,{span:8},o.a.createElement(l.b,{display:"flex",justifyContent:"center",alignItems:"center",height:52},o.a.createElement(l.K,{bold:!0,size:"md"},d.a._("Choose section","Header for section header")))),o.a.createElement(l.h,{span:2},o.a.createElement(l.b,null))),o.a.createElement(l.j,null),o.a.createElement(l.b,{minHeight:334,maxHeight:334,overflow:"scrollY"},m?o.a.createElement(o.a.Fragment,null,m&&m.map(function(e,t){return"header"===e.type?null:o.a.createElement(l.b,{key:"".concat(e.category,"-").concat(e.id)},e.isOpen&&o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{board:e,buttonText:r,isSectionOpen:!0,onClick:function(e){n.handleBoardClick({board:e,toggleSections:!1})},onButtonClick:i,shouldOpenSections:!1,marginTop:3}),o.a.createElement(T,{board:e,buttonText:r,onClick:n.handleSectionClick,onButtonClick:i})))})):null),v(!1))))))}),n}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}},{key:"componentDidUpdate",value:function(e){e.boardResource&&!e.boardResource.isLoaded&&this.props.boardResource&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}},{key:"setPWTLoadingEnd",value:function(){var e=!this.props.boardResource||this.props.boardResource.error?3:1;q.a.sendEvent(new a.a({result:e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.boardResource,r=t.buttonText,a=t.onBoardCreate,i=t.onButtonClick,c=t.pin,s=t.suggestedBoardsShortListResource,u=this.state,p=u.isSectionOpen,h=u.searchBoxFocused,b=u.searchQuery;if(!n)return null;var m=[];(n.isLoaded&&!n.error||s&&s.data&&!s.error)&&(m=this.getItems());var y=m.filter(function(e){return e&&"allBoards"===e.category}).length,g=null===p?"":"BoardsSlideRight",v=function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.j,null),o.a.createElement(l.b,{overflow:"hidden",height:ce,dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}}},o.a.createElement(Q,{onCreateBoardClick:function(){return a({title:e.state.searchQuery})},isBoardCreate:t})))};return o.a.createElement(l.b,{background:"white",width:"100%",shape:"rounded",overflow:"hidden",height:439,dangerouslySetInlineStyle:{__style:{zIndex:1}}},!n||n&&!n.isLoaded&&o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},o.a.createElement(l.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!0})),o.a.createElement(l.b,{display:"flex",direction:"row"},n&&n.isLoaded&&o.a.createElement("div",{className:p?"BoardsSlideLeft":g},o.a.createElement(l.b,{position:"relative"},o.a.createElement(l.b,{display:"flex",direction:"row",width:640,dangerouslySetInlineStyle:{__style:{zIndex:0}}},o.a.createElement(l.b,{display:"flex",direction:"column",width:320},o.a.createElement(l.b,{flex:"grow",padding:3},o.a.createElement(Y.a,{accessibilityLabel:d.a._("Search through your boards","search bar placeholder text"),focused:h,id:"pickerSearchField",onChange:function(t){var n=t.value;return e.handleSearchQueryUpdate(n)},placeholder:d.a._("Search","search bar placeholder text"),value:b})),o.a.createElement(l.b,{maxHeight:322,overflow:"scrollY"},!s||!s.isLoaded&&o.a.createElement(f.a,{id:"suggestedBoardsContainer"},o.a.createElement(l.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:ie},o.a.createElement(l.G,{accessibilityLabel:d.a._("loading board picker","accessibility text for loading spinner"),show:!0}))),m.map(function(t,n){return"header"===t.type?o.a.createElement(l.b,{key:t.title,paddingX:3,paddingY:1,marginTop:n>0?2:1},o.a.createElement(l.K,{size:"sm"},t.title)):o.a.createElement(l.b,{key:"".concat(t.category,"-").concat(t.id)},o.a.createElement(w,{board:t,buttonText:r,onClick:function(t){e.handleBoardClick({board:t,toggleSections:!!t.section_count})},onButtonClick:i}))})),y<=3&&c?o.a.createElement(F,{pinId:c.id,onClick:a}):null,v(!0)),o.a.createElement(l.b,{display:"flex",direction:"column",width:320},o.a.createElement(l.b,{display:"flex",direction:"row",justifyContent:"center",alignContent:"center",alignItems:"center"},o.a.createElement(l.h,{span:2},o.a.createElement(l.b,{display:"flex",justifyContent:"start",alignContent:"center",alignItems:"center",marginStart:3},o.a.createElement(l.o,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"}))),o.a.createElement(l.h,{span:8},o.a.createElement(l.b,{display:"flex",justifyContent:"center",alignItems:"center",height:52},o.a.createElement(l.K,{bold:!0,size:"md"},d.a._("Choose section","Header for section header")))),o.a.createElement(l.h,{span:2},o.a.createElement(l.b,null))),o.a.createElement(l.j,null),o.a.createElement(l.b,{minHeight:334,maxHeight:334,overflow:"scrollY"},m?o.a.createElement(o.a.Fragment,null,m&&m.map(function(t,n){return"header"===t.type?null:o.a.createElement(l.b,{key:"".concat(t.category,"-").concat(t.id)},t.isOpen&&o.a.createElement(o.a.Fragment,null,o.a.createElement(w,{board:t,buttonText:r,isSectionOpen:!0,onClick:function(t){e.handleBoardClick({board:t,toggleSections:!1})},onButtonClick:i,shouldOpenSections:!1,marginTop:3}),o.a.createElement(T,{board:t,buttonText:r,onClick:e.handleSectionClick,onButtonClick:i})))})):null),v(!1)))))))}}])&&te(n.prototype,i),c&&te(n,c),t}(),se=Object(x.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:{field_set_key:"board_picker"}})(le),ue=Object(x.b)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:function(e){return{pin_id:e.pin.id,shortlist_length:3,num_shortlist_suggestions:3}}})(le)},Lgi6:function(e,t,n){"use strict";var r=n("hSTm"),o=n.n(r),a={get:function(e){o()().then(function(t){var n=t.default;n.load([],"https://apis.google.com/js/client:platform.js","gplus"),n.ready("gplus",function(){e(window.gapi)})})}};t.a=a},LzMI:function(e,t,n){"use strict";t.a=function(e){return{type:"PIN_BETTER_SAVE",payload:e}},t.b=function(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}},t.c=function(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}},"M/2V":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("b6H4");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s,u,d,f=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,c(t).call(this,17))).viewType=21,e.sampleRate=.1,e.cause=4,e.registeredEvents.PinSaveRequestStartTraceEvent=e.handleStartCurrTimer,e.registeredEvents.PinSaveRequestStopTraceEvent=e.handleStopTiming,e}var n,o,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,r["a"]),n=t,(o=[{key:"handleStopTiming",value:function(e){if(this._currTimer){var t=this._currTimer;2===e.result&&(t.setResult(2),t.stopTiming(),this.constructPWT()),t.setResult(e.result),t.stopTiming(),this.constructPWT()}}}])&&a(n.prototype,o),s&&a(n,s),t}();d="pwt/pin_save_request",(u="traceName")in(s=f)?Object.defineProperty(s,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[u]=d},MH3C:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n("BAXv"),o=function(e,t){if(!t)return e;var n=new RegExp(/http(s?):/);if(!n.test(e)){var r=n.exec(t);if(r&&r.length)e=r[0]+e}return e},a=function(e){var t=r.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION;return{clamped:e.length>50?e.slice(0,50).trim()+"…":e,full:e.length>t?e.slice(0,t):e}}},NCQM:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=n("iSgY"),c=n("lip+"),l=n("BAXv"),s=n("uIsx"),u=n("W/Cr"),d=n("Y5gj"),f=n("JyNp"),p=n("n9Oa"),h=n("vJNz"),b=n("Qqx1"),m=n("gEaE"),y=n("MQ2h");n.n(y);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){var t=e.board,n=e.hovered,r=e.searchQuery,a=t.privacy===l.a.BoardPrivacy.SECRET;return o.a.createElement(m.b,{color:n?"lightGray":"white",display:"flex",padding:2,shape:"rounded"},o.a.createElement(m.b,{flex:"grow"},o.a.createElement(m.K,{bold:!0},Object(h.b)(r,t.name))),o.a.createElement(m.b,{display:"flex",flex:"none",direction:"row"},a&&o.a.createElement(i.a,{type:"secret"}),t.is_collaborative&&o.a.createElement(i.a,{type:"group"})))}var C=function(e){function t(e,n){var r,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,i=E(t).call(this,e,n),r=!i||"object"!==g(i)&&"function"!=typeof i?w(a):i,S(w(w(r)),"getSections",function(){var e=r.state.searchQuery,t=r.props.boardResource.data.all_boards;return e.length>=b.a?[{items:Object(p.a)(t,e)}]:[{items:t}]}),S(w(w(r)),"createBtnDisabled",function(){var e=r.props.boardResource.data.all_boards,t=r.state.searchQuery;return e.some(function(e){return e.name.toLowerCase()===t.toLowerCase()})}),S(w(w(r)),"handleBoardCreate",function(e){return function(){var t=r.state.searchQuery;if(t){var n=r.props.onBoardCreate;if(n)n(t);else(0,r.props.dispatch)(Object(s.a)(t,e)).then(function(e){(0,r.props.onBoardChosen)(e)})}}}),S(w(w(r)),"handleBoardSelected",function(e){r.props.onBoardChosen(e),r.setState({selectedBoard:e})}),S(w(w(r)),"handleSearchQueryUpdate",function(e){r.setState({searchQuery:e})}),S(w(w(r)),"renderRow",function(e){var t=e.item,n=e.hovered,a=r.state.searchQuery;return o.a.createElement(O,{board:t,hovered:n,searchQuery:a})}),r.state={searchQuery:"",selectedBoard:e.board},r}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.boardResource,r=t.board,a=this.state,i=a.searchQuery,l=a.selectedBoard,s=u.a._("Select a board","Label for selecting a board in Edit Pin Modal");return r?s=r.name:l&&(s=l.name),o.a.createElement(m.b,null,o.a.createElement(m.G,{accessibilityLabel:u.a._("loading board picker","accessibility text for loading spinner"),show:!n.isLoaded}),n.data&&o.a.createElement(c.a,null,function(t){return o.a.createElement(d.a,{dropdownValue:s,onCreate:e.handleBoardCreate(t),onSearchQueryUpdate:e.handleSearchQueryUpdate,onSelect:e.handleBoardSelected,renderRow:e.renderRow,searchQuery:i,sections:e.getSections(),createBtnDisabled:e.createBtnDisabled()})}))}}])&&v(n.prototype,a),i&&v(n,i),t}();t.a=Object(y.compose)(Object(a.connect)(function(e){var t=e.advertiser,n=e.viewer;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}}),Object(f.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){S(e,t,n[t])})}return e}({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username},e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{})}},{allowStale:!1}))(C)},NmQ5:function(e,t,n){"use strict";t.b=function(e){return function(t){var n=e.selectedPinIds,r=e.source,o=e.target;t(Object(i.a)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?u.b.SECTION_PINS:u.b.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(a.a)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?u.b.SECTION_PINS:u.b.BOARD_PINS,itemIds:n,itemType:"pin"})),p(e,t)}},t.a=function(e){return function(t){return function(e,t){var n=e.inverseSelection,r=e.selectedPinIds,o=e.source,c=e.target;if(o.boardId===c.boardId&&(o.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){var s={board_id:o.boardId,new_board_id:c.boardId,old_section_id:o.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:r};return l.a.create("BulkEditSelectAllResource",s).callUpdate({showError:!1}).then(function(){return Promise.all([t(f(o)),t(f(c))])}).catch(d.a)}var p=function(e,n){t(Object(i.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?u.b.SECTION_PINS:u.b.BOARD_PINS,itemIds:r,itemType:"pin"})),t(Object(a.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?u.b.SECTION_PINS:u.b.BOARD_PINS,itemIds:r,itemType:"pin"}))};p(o,c);var h=function(){return p(c,o)};if(c.boardId===o.boardId){if(c.sectionId){var b={section_id:c.sectionId,pins:r};return l.a.create("BoardSectionEditResource",b).callUpdate({showError:!1}).catch(function(e){h(),Object(d.a)(e)})}var m={section_id:o.sectionId,pins:r};return l.a.create("BoardSectionPinsResource",m).callDelete({showError:!1}).catch(function(e){h(),Object(d.a)(e)})}var y={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:r};return l.a.create("BulkEditResource",y).callUpdate({showError:!1}).catch(function(e){h(),Object(d.a)(e)})}(e,t).then(function(){return p(e,t)})}};var r=n("DKBQ"),o=n("VF/E"),a=n("Jw9X"),i=n("pOmq"),c=n("THYI"),l=n.n(c),s=n("g5tP"),u=n("mZ/m"),d=n("ar0l"),f=function(e){return Object(o.a)(e.sectionId?u.b.SECTION_PINS:u.b.BOARD_PINS,e.sectionId||e.boardId)};function p(e,t){var n=e.source,o=e.target;o.boardId!==n.boardId?(t(Object(s.b)(n.boardId,"pin_count")),t(Object(s.b)(o.boardId,"pin_count"))):n.sectionId&&o.sectionId||t(Object(s.b)(o.boardId,"pin_count")),n.sectionId&&t(Object(r.a)(n.sectionId)),o.sectionId&&t(Object(r.a)(o.sectionId))}},NyaW:function(e,t,n){"use strict";t.a=function(e){return Object(f.compose)(l.a,Object(a.connect)(S,O),w)(e)};var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=n("BAXv"),c=n("W/Cr"),l=n("i0Ug"),s=n("g5tP"),u=n("HLDn"),d=(n("suNN"),n("S+Qs")),f=n("MQ2h"),p=(n.n(f),n("FrUj"));function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){_(e,t,n[t])})}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){var t,n;return n=t=function(t){function n(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return r=this,o=(e=g(n)).call.apply(e,[this].concat(l)),t=!o||"object"!==h(o)&&"function"!=typeof o?E(r):o,_(E(E(t)),"state",{createBoardError:null,inputName:t.props.prefilledName||"",nameValidators:[Object(p.p)({message:c.a._("Don't forget to name your board!")}),Object(p.j)({max:i.a.MAX_CHARS_FOR_BOARD_TITLE})],nameValidatorErrors:[],privacy:t.props.isAdAccountOwner?i.a.BoardPrivacy.PUBLIC:i.a.BoardPrivacy.PROTECTED,saving:!1}),_(E(E(t)),"handleChangeName",function(e,n){var r=Object(p.s)(t.state.nameValidators,e);t.setState({inputName:e,nameValidatorErrors:r,createBoardError:null},function(){n&&t.handleCreate()})}),_(E(E(t)),"handleChangePrivacy",function(){var e=t.state.privacy===i.a.BoardPrivacy.SECRET?i.a.BoardPrivacy.PUBLIC:i.a.BoardPrivacy.SECRET;t.setState({privacy:e})}),_(E(E(t)),"handleCreate",function(){var e=t.state,n=e.inputName,r=e.privacy,o=t.props,a=o.createBoard,i=o.invalidateResource,l=o.onCreate,s=o.isAdAccountOwner,u=o.advertiser_id,d=m({privacy:r,name:n},!s&&u?{advertiser_id:u}:{});t.setState({saving:!0,createBoardError:null}),a(d).then(function(e){t.setState({saving:!1}),l(e)}).catch(function(e){var n=c.a._("Uh oh! Something went wrong.");if(e.message){var r=e.message,o=e.message_detail;n=o?"".concat(r," ").concat(o):r}else"string"==typeof e&&(n=e);t.setState({saving:!1,createBoardError:n})}),i(r)}),t}var a,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,r["Component"]),a=n,(l=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.prefilledName&&this.setState({inputName:e.prefilledName})}},{key:"render",value:function(){var t=this.props,n=(t.createBoard,t.invalidateResource,b(t,["createBoard","invalidateResource"]));return o.a.createElement(e,Object.assign({onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,onBoardCreate:this.handleCreate},n,this.state))}}])&&y(a.prototype,l),s&&y(a,s),n}(),_(t,"displayName","WithBoardCreatePane(".concat(e.displayName||e.name,")")),n}function S(e){var t=e.advertiser,n=e.viewer,r=!t||n.isAuth&&t.owner_user_id===n.id,o=t&&t.id;return m({isAdAccountOwner:r},o?{advertiser_id:o}:{})}function O(e,t){return{invalidateResource:function(n){e(Object(d.f)("BoardsResource",Object(u.a)(t.viewer.username,n===i.a.BoardPrivacy.SECRET)))},createBoard:function(t){return e(Object(s.f)(t))}}}},Otfq:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("d6ZO"),o=(n.n(r),n("RklN")),a=n.n(o),i=n("b11Z"),c=(n("p58k"),n("gEaE"));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e,n){var o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,i=u(t).call(this,e,n),o=!i||"object"!==l(i)&&"function"!=typeof i?f(a):i,p(f(f(o)),"setSelectedItemRef",function(e){o.selectedItemRef=e}),p(f(f(o)),"handleIndexUpdate",function(e){var t=o.props.indexManager;o.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),p(f(f(o)),"handleSelectItem",function(e){return function(){var t=o.props,n=t.disabled,r=t.onSelectItem;n||r(e)}}),p(f(f(o)),"handleMouseEnter",function(e){return function(t){t.event;var n=o.props,r=n.disabled,a=n.indexManager;r||a.updateIndex(e)}}),p(f(f(o)),"handleMouseLeave",function(e){e.event;var t=o.props,n=t.disabled,r=t.indexManager;n||r.setInactive()}),p(f(f(o)),"renderItems",function(e,t){var n=o.props.renderItem,a=o.state.selectedIndex||{},i=a.row,l=a.section,s=e.customProps,u=void 0===s?{}:s,d=e.items,f=e.renderItem,p=u.isDisabled,h=void 0===p?function(e){return!1}:p,b=t===l,m=f||n;return m&&d.map(function(e,n){var a=h(e),l={section:t,row:n},s=b&&n===i;return r.createElement("div",{"data-test-id":"board-selection",key:n,ref:!a&&s&&o.setSelectedItemRef},a?m({item:e,hovered:s,sectionProps:u}):r.createElement(c.P,{onMouseEnter:o.handleMouseEnter(l),onMouseLeave:o.handleMouseLeave,onTouch:o.handleSelectItem(e),fullWidth:!1,shape:"rounded"},m({item:e,hovered:s,sectionProps:u})))})}),p(f(f(o)),"renderSections",function(){var e=o.props,t=e.renderSectionHeader;return e.sections.map(function(e,n){return r.createElement(c.b,{key:n},t&&t(e,n),o.renderItems(e,n))})});var s=o.props.indexManager;return o.state={selectedIndex:s.getIndex(),selectionMovedByKeyboard:!1},s.setUpdateCallback(o.handleIndexUpdate),o}var n,o,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.indexManager!==e.indexManager&&e.indexManager.setUpdateCallback(this.handleIndexUpdate)}},{key:"componentDidUpdate",value:function(){var e=this.containerRef;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&e){var t=a.a.findDOMNode(this.selectedItemRef);if(!(t instanceof HTMLElement))return;var n=t.getBoundingClientRect(),r=n.top,o=n.bottom,i=e.getBoundingClientRect(),c=i.top;o>=i.bottom?t.scrollIntoView(!1):r<=c&&t.scrollIntoView(!0)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.grow,o=void 0!==n&&n,a=t.maxHeight,l=t.fetchMore;return r.createElement(i.a,{fetchMore:l},function(t){var n=t.setRef,i=t.onScroll;return r.createElement(c.b,{flex:o?"grow":void 0,height:o?"100%":void 0,maxHeight:a,onScroll:i,overflow:"auto",ref:function(t){e.containerRef=t,n(t)}},e.renderSections())})}}])&&s(n.prototype,o),h&&s(n,h),t}()},Qqx1:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("vJNz"),i=n("28Da"),c=n("aC/n"),l=n("W/Cr"),s=n("9bGG"),u=n("gEaE");var d=Object(s.a)(function(e){var t=e.buttonLabel,n=e.isHovering,o=e.isRowItem,a=e.hasHoverState,i=e.hoverHandlers,c=e.name,s=e.onClick,d=c||t||l.a._("Create board");return r.createElement(u.P,{onMouseEnter:i.onMouseOver,onMouseLeave:i.onMouseLeave,onTouch:s},r.createElement(u.b,{alignItems:"center",color:a&&n?"lightGray":"white",display:"flex",flex:o?"shrink":"none",height:64,width:"100%"},r.createElement(u.b,{marginLeft:6,marginRight:3,"data-test-id":"createBoardButton"},r.createElement(u.n,{accessibilityLabel:l.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})),c?r.createElement(u.b,{margin:1},r.createElement(u.K,{inline:!0,overflow:"normal",__dangerouslyIncreaseLineHeight:!0}," ",l.a._("Create: ")," ")):null,r.createElement(u.K,{truncate:!0,align:"center",bold:!0,inline:!0,__dangerouslyIncreaseLineHeight:!0}," ",d," ")))}),f=n("p58k"),p=n("W0l8"),h=n("eD+K"),b=n("Otfq");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return S});var w="",S=2,O=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=arguments.length,l=new Array(c),s=0;s<c;s++)l[s]=arguments[s];return r=this,i=(e=g(t)).call.apply(e,[this].concat(l)),n=!i||"object"!==m(i)&&"function"!=typeof i?E(r):i,_(E(E(n)),"state",{searchQuery:w}),_(E(E(n)),"handleSelectItem",function(e){var t=n.props,r=t.onCreate,o=t.onSelected;!e&&r?r(n.state.searchQuery):e&&o(e);(r||e)&&n.setState({searchQuery:""})}),_(E(E(n)),"handleSearchQueryInput",function(e){n.setState({searchQuery:e})}),_(E(E(n)),"renderSectionHeader",function(e,t){return e.title?o.a.createElement(u.b,null,t>0&&o.a.createElement(u.j,null),o.a.createElement(u.b,{deprecatedPadding:{x:3,y:1}},o.a.createElement(u.K,{size:"sm"},e.title))):null}),_(E(E(n)),"renderRow",function(e){var t=e.item,r=e.hovered,i=e.sectionProps,c=void 0===i?{}:i,l=n.props,s=l.boardSavedTo,u=l.isSelectMode,d=l.disabledRowId,f=n.state.searchQuery,p=c.inSectionSelection,h=void 0!==p&&p,b=s&&s.board===t.id?s&&s.state:null,m="board_section"===t.type;return o.a.createElement(a.a,{isSelectMode:u,disabled:t.id===d&&h,item:t,isSection:m,isWithinSectionPicker:h,saveState:b,searchQuery:f,selected:r})}),n}var n,s,S;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(s=[{key:"componentDidUpdate",value:function(e){!e.isLoaded&&this.props.isLoaded&&this.setPWTLoadingEnd()}},{key:"setPWTLoadingEnd",value:function(){var e=this.props.hasLoadError?3:1;h.a.sendEvent(new i.a({result:e}))}},{key:"render",value:function(){var e=this.props,t=e.boardSavedTo,n=e.createButtonLabel,r=e.hasLowBoardCount,a=e.getSections,i=e.isLoaded,s=e.onCreate,h=e.pinId;if(i){var m=this.state.searchQuery,y=a(m);return this.indexManager=new f.a(y.map(function(e){return e.items})),this.indexManager.setSelectItem(this.handleSelectItem),o.a.createElement(u.b,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}}},!r&&o.a.createElement(u.b,null,o.a.createElement(u.b,{paddingX:6,marginBottom:4,marginTop:1},o.a.createElement(p.a,{disabled:!!t,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:m})),o.a.createElement(u.j,null)),o.a.createElement(b.a,{disabled:!!t,grow:!r&&!m,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:y}),o.a.createElement(u.j,null),s&&o.a.createElement(d,{buttonLabel:n,hasHoverState:!0,name:m,onClick:function(){return s(m)}}),r&&h&&o.a.createElement(c.a,{onBoardSelected:s,pinId:h}))}return o.a.createElement(u.b,{deprecatedPadding:{y:5}},o.a.createElement(u.G,{accessibilityLabel:l.a._("loading section picker","accessibility label for the loading spinner the repin picker"),show:!0}))}}])&&y(n.prototype,s),S&&y(n,S),t}();t.b=O},QuPB:function(e,t,n){"use strict";t.a=function(e){var t=e.url,n=e.description,c=e.color;return c=c||o.a.DEFAULT_IMAGELESS_PIN_COLOR,r.createElement(i.b,{shape:"rounded",height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:c}}},r.createElement(i.b,{maxHeight:200,padding:4,overflow:"hidden"},t&&r.createElement(i.b,{marginBottom:2},r.createElement(i.K,{color:"white",size:"xs"},a.a.parse(t).hostname||t)),r.createElement(i.b,{maxHeight:144},r.createElement(i.K,{bold:!0,color:"white",overflow:"normal",size:"lg"},n))))};var r=n("d6ZO"),o=(n.n(r),n("BAXv")),a=n("FJZF"),i=n("gEaE")},Svvu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n("hlP+"),a=n.n(o),i=n("BVzu"),c=n("XZ9g"),l=n.n(c),s=n("/4D9"),u=n.n(s),d=n("Lgi6"),f=n("W/Cr"),p=n("bYE1"),h=n("DLm7"),b=n("EAiy");function m(){}Object.assign(m.prototype,a.a),Object.assign(m.prototype,{connect:function(e,t){var n=this;(t=Object.assign({},{success:function(){},error:function(){},complete:function(){}},t)).rerequest_facebook_email?u()().then(function(e){e.default.ensureInit(function(e){e.login(function(e){var n,r,o=e.authResponse;o&&(n=(n=o.grantedScopes)?n.split(","):[],r=o.userID);var a=n.find(function(e){return"email"===e}),i={id:r};"connected"===e.status&&a?t.success(i):t.error(i),t.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},b.a)}):"gplus"===e?d.a.get(function(e){Object(p.a)().then(function(){e.auth2.getAuthInstance().grantOfflineAccess().then(function(e){t.success({one_time_code:e.code,redirect_uri:"postmessage"})}).catch(function(e){t.error(e)})})}):l()().then(function(r){var o=r.default.getWindowOptions(),a=window.open("/connect/"+e+"/","",o);if(!a)return i.default.showError(f.a._("You must enable popups!")),void t.error({network:e,alertedUpstream:!0});var c=h.a.setInterval(function(){a.closed&&(clearInterval(c),n.handleComplete({network:e,error_message:"Window closed."}))},1e3);n.once("connect:"+e,function(e){clearInterval(c),e.error_message?t.error(e):t.success(e),t.complete()})})},complete:function(e){this.handleComplete(e)},handleComplete:function(e){var t="connect:"+e.network;if("facebook"===e.network){var n=e.id;n&&"string"!=typeof n&&(e.error_message="Facebook id must be of string type")}this.trigger(t,e)}}),Object.assign(m,{instance:function(){return r||(r=new m),r},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&m.instance().complete(e.data)}),t.default=m},T0l7:function(e,t,n){"use strict";t.c=function(e,t){return i.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()},t.d=function(e,t){return i.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()},t.a=function(e,t){return function(n){var a=i.a.create("BoardInviteResource",{board_id:e,invited_user_id:t});return a.callUpdate().then(function(){r.a.trackEvent(c,"success"),o.a.instance.publish(e,"boardApprovedCollaboratorInvite",{userId:t})}).catch(function(){return r.a.trackEvent(c,"error")})}},t.b=function(e,t,n){return function(r){var a=e.invited_user,c=e.status,l=e.board.id,s=i.a.create("accepted"===c?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:l,field_set_key:"boardEdit",invited_user_id:a.id}).callDelete({showError:!1}).then(function(){o.a.instance.publish(l,"boardWriteAccessUpdated"),n&&o.a.instance.publish(l,"boardBannedCollaborator"),t&&(o.a.instance.publish("currentUser","boardRemovedCollaboratorSelf"),o.a.instance.publish(l,"boardRemovedCollaboratorSelf"))});return s}};var r=n("/e0Y"),o=n("Cjb7"),a=n("THYI"),i=n.n(a),c="collaborator_approve_invite"},"Td/c":function(e,t,n){"use strict";var r=n("d6ZO"),o=(n.n(r),n("DUIN")),a=n("BAXv"),i=n("HEYN"),c=n("W/Cr"),l=n("XSNT"),s=n("hkVh"),u=n("kxCB"),d=n("MQ2h"),f=(n.n(d),n("gEaE"));function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=m(t).call(this,e),n=!o||"object"!==p(o)&&"function"!=typeof o?g(r):o,v(g(g(n)),"onCreateSection",function(){var e=n.props,t=e.board,r=e.dispatch,o=e.completeCreateSectionAction,a=e.pinImport;return n.setState({isSaving:!0}),r(Object(i.a)({boardId:t.id,name:n.state.inputName.trim(),pinImport:a})).then(function(e){n.setState({isSaving:!1,newSection:e}),o(e)}).catch(function(e){n.setState({createError:e.message,isSaving:!1})})}),v(g(g(n)),"handleKeyDown",function(e){var t=n.state,r=t.createError,o=t.inputName;[a.a.KeyCode.ENTER,a.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!r&&o.trim()&&n.onCreateSection()}),v(g(g(n)),"handleChangeName",function(e){n.setState({createError:null,inputName:e})}),v(g(g(n)),"handleInputRef",function(e){n.setState({inputRef:e})}),n.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1},n}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.createError,o=n.inputRef;!o||t.inputRef&&!r||o.focus()}},{key:"render",value:function(){var e=this.props,t=e.onClearModal,n=e.showTitle,o=e.positionRelative,a=this.state,i=a.createError,u=a.inputName,d=a.isSaving,p=!!u.trim()&&!i;return r.createElement(f.b,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:o?"relative":"absolute",shape:"rounded",width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},n&&r.createElement(f.b,{marginTop:3,paddingX:6,paddingY:3},r.createElement(f.K,{size:"xl",bold:!0},c.a._("Add section","Title in the add section modal"))),r.createElement(f.b,{padding:3},r.createElement(f.b,{marginBottom:2},r.createElement(f.q,{htmlFor:"sectionEditName"},r.createElement(f.K,{size:"sm",color:i?"red":"gray"},c.a._("Name","Board section name")))),r.createElement(f.b,null,r.createElement(l.a,{className:"boardCreateInput".concat(i?" error":""),id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:c.a._('Like "Lighting"',"Placeholder for board section name"),ref:this.handleInputRef,type:"text",value:u,style:h({border:"none",outline:"none",fontSize:15,marginBottom:5,padding:6,width:"95%",color:"#333"},i?{background:"#e6abad",border:"1px solid #e60023",borderRadius:3}:{})}))),r.createElement(f.j,null),r.createElement(f.b,{display:"flex",flex:"grow"}),r.createElement(f.j,null),r.createElement(f.b,{padding:6},i&&r.createElement(f.b,{marginBottom:3},r.createElement(f.K,{align:"center",bold:!0,color:"red",size:"sm"},i)),r.createElement(f.b,{display:"flex",justifyContent:"between"},r.createElement(f.c,{onClick:t,text:c.a._("Cancel","cancel section add"),inline:!0}),r.createElement(s.a,{disabled:!p||d,onClick:this.onCreateSection,submitting:d,text:c.a._("Add","add a new section")}))))}}])&&b(n.prototype,o),u&&b(n,u),t}();t.a=Object(d.compose)(Object(o.connect)(),u.a)(E)},UVpX:function(e,t,n){"use strict";var r=n("hVsM"),o=n("SnoN"),a=n("BVzu"),i=n("6oHq"),c=n("ZIw6"),l=n("/e0Y"),s=n("W/Cr"),u=n("85jk"),d=n("EAiy"),f={checkFbTimelinePermission:function(e){i.default.ensureInit(function(t){t.api("/me/permissions",function(t){var n=t.data,r=!1;n&&(r=!!n.find(function(e){return"publish_actions"===e.permission&&"granted"===e.status})),r?e.success&&e.success():e.error&&e.error()})},d.a)},fbConnectedAccountMatchesLoggedInAccount:function(e,t){if(!t)return!0;var n=e.getAuthResponse();return!n||t===n.userID},maybeRequestFbTimelinePermission:function(e,t){i.default.ensureInit(function(n){if(!f.fbConnectedAccountMatchesLoggedInAccount(n,t))return a.default.showError(s.a._("Oops! Your account is linked to a different Facebook account than the one you're logged into now.")),e.error&&e.error(),void(e.complete&&e.complete());f.checkFbTimelinePermission({success:function(){e.success&&e.success(),e.complete&&e.complete()},error:function(){f.fbLogin(e)}})},d.a)},fbLogin:function(e){i.default.ensureInit(function(t){t.login(function(t){t.authResponse?f.checkFbTimelinePermission(e):e.error&&e.error(),e.complete&&e.complete()},{scope:"publish_actions"})},d.a)},shareFb:function(e){var t=e.ga_category||"share_facebook";l.a.trackEvent(t,"click");var n=e.dialog_options||{};n.callback=function(){var t=r.a.fromEventType(1300);e.object_id&&t.setObjectIdStr(e.object_id),o.a.getInstance().addEvent(t)};var a=n.object_type;a&&Object(u.a)("facebook_share_dialog_open_"+a),c.default.open(n)},getLocaleString:function(e){var t=e;switch(t=t.replace(/-/g,"_")){case"de":t="de_DE";break;case"fr":t="fr_FR";break;case"it":t="it_IT";break;case"ja":t="ja_JP";break;case"nl":t="nl_NL";break;case"tr":t="tr_TR";break;case"en_AU":t="en_US";break;case"es_419":case"es_AR":t="es_LA"}return t}};t.a=f},"VF/E":function(e,t,n){"use strict";t.a=function(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}},W0l8:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("RklN"),i=n.n(a),c=n("BAXv"),l=n("W/Cr"),s=(n("p58k"),n("gEaE"));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var b=function(e){function t(){var e,n,r,o,a,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,d=new Array(s),p=0;p<s;p++)d[p]=arguments[p];return r=this,o=(e=f(t)).call.apply(e,[this].concat(d)),n=!o||"object"!==u(o)&&"function"!=typeof o?h(r):o,a=h(h(n)),l=function(e){var t=n.props,r=t.disabled,o=t.indexManager;if(!r)switch(e.which){case c.a.KeyCode.ENTER:case c.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),o.select();break;case c.a.KeyCode.UP:e.preventDefault(),o.prev();break;case c.a.KeyCode.DOWN:e.preventDefault(),o.next()}},(i="handleKeyDown")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n}var n,a,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this._input;if(e){var t=i.a.findDOMNode(e);if(t instanceof HTMLElement){var n=t.querySelector("input");n&&n.focus()}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.onChange,r=t.value;return o.a.createElement("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"}},o.a.createElement(s.D,{accessibilityLabel:"",id:"pickerSearchField",onChange:function(e){var t=e.value;return n(t)},placeholder:l.a._("Search","search bar placeholder text"),ref:function(t){e._input=t},value:r}))}}])&&d(n.prototype,a),b&&d(n,b),t}();t.a=b},W9T9:function(e,t,n){"use strict";t.a=function(e){var t=e.commentsDisabled,n=e.onCommentChange,i=e.onPhotoChange,c=e.photosDisabled,l=e.isManagedView;return r.createElement(a.b,null,r.createElement(a.j,null),r.createElement(a.b,{md:{display:"flex"},justifyContent:"between",paddingX:l?0:4,paddingY:l?6:3},!l&&r.createElement(a.b,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(a.K,{size:"sm"},o.a._("Comment and Photo Permissions"))),r.createElement(a.b,{xs:{column:12},md:{column:l?12:8}},r.createElement(a.b,{paddingY:1,display:"flex",alignItems:"center"},r.createElement(a.I,{onChange:n,id:"CommentSwitch",switched:!t}),r.createElement(a.b,{paddingX:2},r.createElement(a.q,{htmlFor:"CommentSwitch"},r.createElement(a.K,{size:"sm"},o.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form"))))),r.createElement(a.b,{paddingY:1,alignItems:"center",display:"flex"},r.createElement(a.I,{onChange:i,id:"PhotoSwitch",switched:!c}),r.createElement(a.b,{paddingX:2},r.createElement(a.q,{htmlFor:"PhotoSwitch"},r.createElement(a.K,{size:"sm"},o.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form"))))))))};var r=n("d6ZO"),o=(n.n(r),n("W/Cr")),a=n("gEaE")},WxTF:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("W/Cr"),i=n("XSNT"),c=(n("IaRT"),n("skut")),l=n("pN+K"),s=n("5tOk"),u=n("gEaE");function d(e){var t=e.body,n=e.img,o=e.onClick,i=e.selected,c=e.title,l=e.username,s=e.valid,d=l||t;return r.createElement(u.b,{marginBottom:4},r.createElement(u.P,{onTouch:o},r.createElement(u.b,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,r.createElement(u.b,{marginLeft:3,flex:"grow",marginRight:2},r.createElement(u.b,{marginBottom:1},r.createElement(u.K,{bold:!0,size:"md",truncate:!0},c)),r.createElement(u.K,{size:"xs",truncate:!0},d)),r.createElement(u.b,{marginLeft:2},function(e,t){if(l)return e?r.createElement(u.n,{icon:"check-circle",color:"red",accessibilityLabel:a.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):r.createElement(u.b,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});var n={text:a.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return e||(n.text=a.a._("Invite","Add board collaborator invite"),n.disabled=Boolean(!t)),r.createElement(u.c,n)}(i,s)))))}var f=n("T0l7");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}var E=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=b(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==p(o)&&"function"!=typeof o?y(r):o,g(y(y(n)),"state",{selectedCollaborators:[],showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""}),g(y(y(n)),"handleTextFieldChange",function(e){n.setState({value:e})}),g(y(y(n)),"handleCollaboratorClick",function(e){var t=e.id,r=e.type;n.isIdSelected[t]=!n.isIdSelected[t];var o=n.state.selectedCollaborators.concat([e]),a="email"===r?f.c:f.d;n.props.onSelectedCollaboratorsChange({id:t,resource:a}),n.setState({selectedCollaborators:o})}),g(y(y(n)),"handleTypeaheadSuggestionsChange",function(e){n.setState({typeaheadSuggestions:e})}),g(y(y(n)),"isIdSelected",{}),n}var n,l,E;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(l=[{key:"render",value:function(){var e=this,t=this.state.value,n=(""===t?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:t,valid:Object(s.g)(t)}).concat(this.props.shareSuggestions).filter(v)).map(function(t,n){return function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){var o=r.createElement(u.a,{name:e.title||e.full_name,src:e.image_medium_url,size:"md"});return r.createElement(d,{img:o,onClick:function(){return n(e)},selected:t,title:e.full_name,username:e.username})}if("email"===e.type){var i,c,l=e.id,f=e.valid,p=r.createElement(u.b,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},r.createElement(u.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:a.a._("Email icon","Email icon on board create modal")})),h=Object(s.c)(a.a._("Email {{ email }}"),{email:l});return t?(i=a.a._("Done!","Text that lets the user know we sent the board invite email"),c=function(){}):(i=f?a.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):a.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),c=function(){return f?n(e):void 0}),r.createElement(d,{body:i,img:p,onClick:c,selected:t,title:h,valid:f})}}(t,e.isIdSelected[t.id],e.handleCollaboratorClick)}).map(function(e,t){return o.a.createElement("li",{key:t},e)});return o.a.createElement(u.b,{display:"flex",direction:"column",height:"100%"},o.a.createElement(u.b,{paddingX:3,marginBottom:4,marginTop:3},o.a.createElement(u.K,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create"))),o.a.createElement(u.b,{paddingX:3,marginBottom:4,width:"100%"},o.a.createElement(u.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"4px"}},color:"lightGray",flex:"grow",display:"flex",alignItems:"center",height:40,position:"relative"},o.a.createElement(u.b,{paddingX:4,height:"100%",position:"absolute",top:!0,left:!0,display:"flex",alignItems:"center"},o.a.createElement(u.n,{accessibilityLabel:"",icon:"search",size:20})),o.a.createElement(c.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:t},o.a.createElement(i.a,{className:"SearchBoxInput",onChange:this.handleTextFieldChange,placeholder:a.a._("Search by name or email"),value:t})))),o.a.createElement(u.b,{paddingX:3,overflow:"scrollY"},o.a.createElement("ul",null,n)))}}])&&h(n.prototype,l),E&&h(n,E),t}();g(E,"defaultProps",{shareSuggestions:[]});t.a=Object(l.b)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(E)},X6qR:function(e,t){},XSNT:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("d6ZO"),o=n.n(r),a=n("IaRT");n.n(a);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(e,n){var r,o,a,c,s,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=l(t).call(this,e,n),r=!a||"object"!==i(a)&&"function"!=typeof a?u(o):a,c=u(u(r)),d=function(e){r.props.onChange&&r.props.onChange(e.target.value),r.setState({value:e.target.value,hasChanged:!0})},(s="handleChange")in c?Object.defineProperty(c,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[s]=d,r.state={isFocused:r.props.focused||!1,value:r.props.value,hasChanged:void 0!==r.props.value},r}var n,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.state.isFocused&&this._input.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"getId",value:function(){return this.props.id}},{key:"getValue",value:function(){return this.state.value}},{key:"focus",value:function(){this._input.focus()}},{key:"render",value:function(){var e=this;return o.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function(t){e._input=t},style:this.props.style,type:this.props.type,value:this.state.value||""})}}])&&c(n.prototype,a),d&&c(n,d),t}();d.defaultProps={type:"text"}},XZ9g:function(e,t,n){e.exports=function(){return new Promise(function(e){n.e(68).then(function(t){e(n("ZIw6"))}.bind(null,n)).catch(n.oe)})}},Y5gj:function(e,t,n){"use strict";var r=n("d6ZO"),o=(n.n(r),n("W/Cr")),a=n("p58k"),i=n("W0l8"),c=n("9bGG"),l=n("Otfq"),s=n("gEaE");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=f(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==u(o)&&"function"!=typeof o?h(r):o,b(h(h(n)),"state",{showFlyout:!1}),b(h(h(n)),"setContainerRef",function(e){n.containerRef=e}),b(h(h(n)),"handleCreate",function(){n.hideFlyout();var e=n.props.onCreate;e&&e()}),b(h(h(n)),"handleSelectItem",function(e){n.hideFlyout();var t=n.props,r=t.onSelect,o=t.onCreate;e?r(e):o&&o()}),b(h(h(n)),"handleDropdownTouch",function(){n.setState(function(e){return{showFlyout:!e.showFlyout}})}),b(h(h(n)),"handleHideFlyout",function(e){n.containerRef&&e.target instanceof HTMLElement&&!n.containerRef.contains(e.target)&&n.hideFlyout()}),b(h(h(n)),"hideFlyout",function(){(0,n.props.hoverHandlers.onMouseLeave)(),n.setState({showFlyout:!1})}),n}var n,c,m;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r["Component"]),n=t,(c=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}},{key:"render",value:function(){var e=this.props,t=e.dropdownValue,n=e.fetchMore,c=e.hoverHandlers,u=c.onMouseOver,d=c.onMouseLeave,f=e.isHovering,p=e.onCreate,h=e.onSearchQueryUpdate,b=e.renderRow,m=e.searchQuery,y=e.sections,g=e.createBtnDisabled,v=this.state.showFlyout;this.indexManager=new a.a(y.map(function(e){return e.items})),this.indexManager.setSelectItem(this.handleSelectItem);var E=!m.trim()||!!g;return r.createElement("div",{ref:this.setContainerRef},r.createElement(s.P,{onMouseEnter:u,onMouseLeave:d,onTouch:this.handleDropdownTouch,fullWidth:!1,shape:"rounded"},r.createElement(s.b,{alignItems:"center",color:f?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:3,shape:"rounded"},r.createElement(s.b,{display:"flex",flex:"grow"},r.createElement(s.K,{bold:!0},t)),r.createElement(s.n,{icon:"arrow-down",size:14,color:"darkGray",accessibilityLabel:""}))),v&&r.createElement(s.b,{position:"relative"},r.createElement(s.b,{shape:"rounded",color:"white",display:"flex",direction:"column",overflow:"hidden",position:"absolute",width:"100%",dangerouslySetInlineStyle:{__style:{border:"1px solid #efefef",zIndex:1}}},r.createElement(s.b,null,r.createElement(s.b,{display:"flex",padding:2,marginLeft:-1,marginRight:-1},r.createElement(s.b,{display:"flex",flex:"grow",paddingX:1},r.createElement(i.a,{hideIcon:!0,indexManager:this.indexManager,onChange:h,value:m})),p&&r.createElement(s.b,{paddingX:1},r.createElement(s.c,{disabled:E,inline:!0,onClick:this.handleCreate,text:o.a._("Create","board or section dropdown create button")})))),r.createElement(l.a,{fetchMore:n,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:b,sections:y}))))}}])&&d(n.prototype,c),m&&d(n,m),t}();t.a=Object(c.a)(m)},ZIw6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("WjSu"),o=n("6oHq"),a=n("yJ1G"),i=n.n(a),c=n("THYI"),l=n.n(c),s=n("FJZF"),u=n("EAiy");var d={open:function(e){var t=i()(e,d._validParams),n=d._getDialogType(e),r=d.generateFbRef(),a=e.object_type&&e.object_id&&"feed"===n,c=s.a.absolutify(e.path),f=s.a.getQueryStringParams();if(f.ptrf&&(c=s.a.appendQueryString(c,{ptrf:f.ptrf})),a&&(c=s.a.appendQueryString(c,{fb_ref:r})),t.method=n,"feed"===t.method){var p=d.getWindowOptions(e.width||580,e.height||400),h="http://www.facebook.com/sharer/sharer.php?u="+c;t.picture&&(h+="&picture="+t.picture),t.name&&(h+="&title="+t.name),t.description&&(h+="&description="+t.description),t.caption&&(h+="&caption="+t.caption),window.open(encodeURI(h),"sharer",p)}else"send"===t.method?t.link=c:"share"===t.method&&(t.href=c),o.default.ensureInit(function(n){n.getLoginStatus(function(){if("send"===t.method){n.ui(t);var o,i=10,c=setInterval(function(){!(o=function(){var e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(e.length){if(1===e.length)return e[0];for(var t=e.splice(0,e.length-1),n=0;n<t.length;n+=1)t[n].parentNode.removeChild(t[n]);return e[0]}}())&&i||(clearInterval(c),o&&d.executeMessengerCallback(o,e.callback)),i-=1},1e3)}else"share"===t.method&&n.ui(t,function(t){if(a&&t&&t.post_id){var n=l.a.create("LogFacebookFeedShare",{});n.options={object_type:e.object_type,object_id:e.object_id,fb_ref:r},n.callCreate({showError:!1})}e.callback&&e.callback(t)})})},u.a)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback:function(e,t){var n=10,r=setInterval(function(){"0px"!==e.style.width&&n||(clearInterval(r),e.style.width="575px"),n-=1},1e3);t&&t()},generateFbRef:function(){for(var e="";e.length<20;)e+=Math.floor(65535*Math.random()).toString(16);return(u.a.id||r.a.instance.unauth_id)+":"+e},_getDialogType:function(e){return d._validOptions.includes(e.type)?e.type:"feed"},getWindowOptions:function(e,t){var n=e||580,r=t||400,o=screen.width,a=screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+n+",height="+r+",left="+Math.round((o-n)/2)+",top="+(a>r?Math.round((a-r)/2):0)}};t.default=d},"aC/n":function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("28Da"),i=n("gEaE");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=s(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==c(o)&&"function"!=typeof o?d(r):o,f(d(d(n)),"state",{isHovering:!1}),f(d(d(n)),"onHover",function(){n.setState({isHovering:!0})}),f(d(d(n)),"offHover",function(){n.setState({isHovering:!1})}),n}var n,a,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.name,n=e.selected,r=e.image;return e.inFlyoutExp?o.a.createElement(i.b,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover},o.a.createElement(i.b,null,o.a.createElement(i.u,{height:40,width:40,shape:"rounded"},this.state.isHovering&&r?o.a.createElement(i.p,{alt:"",color:"",fit:"cover",naturalHeight:r.height,naturalWidth:r.width,src:r.url}):o.a.createElement(i.b,{color:"lightGray",height:40,width:40}))),o.a.createElement(i.b,{padding:2},o.a.createElement(i.K,{bold:!0,size:"xl"},t))):o.a.createElement(i.b,{alignItems:"center",color:n?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2},o.a.createElement(i.b,null,o.a.createElement(i.n,{color:n?"darkGray":"gray",icon:"add",accessibilityLabel:""})),o.a.createElement(i.b,{marginLeft:3},o.a.createElement(i.K,{color:n?"darkGray":"gray",bold:!0,size:"lg"},t)))}}])&&l(n.prototype,a),p&&l(n,p),t}(),h=n("W/Cr"),b=n("eD+K"),m=n("pN+K"),y=n("MQ2h"),g=n("y2lE");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=-1,j=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=_(t).call(this,e),n=!a||"object"!==v(a)&&"function"!=typeof a?S(r):a,O(S(S(n)),"_processSuggestions",function(e){return e&&e.length?e.map(function(e){return e.title}):[]}),O(S(S(n)),"handleClick",function(e){var t=n.state.suggestedBoardsNames,r=n.props,o=r.contextLog;(0,r.onBoardSelected)(t[e],!1),o(101,{component:13025,element:23})}),O(S(S(n)),"handleMouseEnter",function(e){n.setState({selectedIndex:e})}),O(S(S(n)),"handleMouseLeave",function(){n.setState({selectedIndex:C})}),O(S(S(n)),"renderSuggestionRow",function(e,t){var r=n.state.selectedIndex===t;return o.a.createElement("li",{key:t},o.a.createElement(i.P,{onTouch:function(){return n.handleClick(t)},onMouseEnter:function(){return n.handleMouseEnter(t)},onMouseLeave:n.handleMouseLeave},o.a.createElement(p,{selected:r,name:e,inFlyoutExp:n.props.inFlyoutExp,image:n.props.image})))}),n.state={selectedIndex:C,suggestedBoardsNames:n._processSuggestions(e.boards)},n}var n,c,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,r["Component"]),n=t,(c=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({suggestedBoardsNames:this._processSuggestions(e.boards)})}},{key:"componentDidUpdate",value:function(e){!e.resourceLoaded&&this.props.resourceLoaded&&this.props.inFirstBoardCreateGestaltExp&&this.setPWTLoadingEnd()}},{key:"setPWTLoadingEnd",value:function(){var e=this.props.error?3:1;b.a.sendEvent(new a.a({result:e}))}},{key:"renderGestaltBoardSuggestionList",value:function(){h.a._("Suggested board names","text above suggested board names list");return o.a.createElement(i.b,null,o.a.createElement(i.b,{marginTop:5,marginLeft:6,marginBottom:3},o.a.createElement(i.K,{size:"md"},h.a._("Suggested board names"))),o.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}},{key:"renderPreviewBoardSuggestionList",value:function(){return o.a.createElement("div",null,o.a.createElement("ul",null,this.state.suggestedBoardsNames.map(this.renderSuggestionRow)))}},{key:"render",value:function(){var e=this.props,t=e.inFirstBoardCreateGestaltExp,n=e.inFlyoutExp,r=e.minHeight;if(!e.resourceLoaded)return o.a.createElement(i.b,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:r||""},o.a.createElement(i.G,{accessibilityLabel:h.a._("Loading board suggestions","Accesibility label for loading board suggestions"),show:!0}));var a=this.state.suggestedBoardsNames;return a&&a.length?n?this.renderPreviewBoardSuggestionList():t?this.renderGestaltBoardSuggestionList():o.a.createElement(i.b,null,o.a.createElement(i.b,{marginTop:2,paddingX:5},o.a.createElement(i.K,null,h.a._("Suggested board names"))),o.a.createElement("ul",null,a.map(this.renderSuggestionRow))):null}}])&&E(n.prototype,c),l&&E(n,l),t}();t.a=Object(y.compose)(Object(m.b)({name:"BoardTitleSuggestionsResource",options:function(e){return{pin_id:e.pinId}},key:"boards"}),g.a)(j)},ar0l:function(e,t,n){"use strict";t.a=function(e){r.default.showError(function(e){switch(e.api_error_code){case a:case i:case c:return o.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))};var r=n("BVzu"),o=n("W/Cr"),a=2171,i=2172,c=2173},b11Z:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n("d6ZO"),o=n.n(r),a=n("WBZ1"),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=200,h=function(e,t){var n=e.scrollTop,r=e.clientHeight,o=e.scrollHeight;return n+r+(t?t(r):2*r)>o},b=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return r=this,o=(e=s(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==c(o)&&"function"!=typeof o?d(r):o,f(d(d(n)),"setContainerRef",function(e){n.containerRef=e}),f(d(d(n)),"fetchMoreIfNecessary",i()(function(){var e=n.props,t=e.fetchMore,r=e.scrollBuffer;t&&n.containerRef&&h(n.containerRef,r)&&t()},p)),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:"componentDidMount",value:function(){setTimeout(this.fetchMoreIfNecessary)}},{key:"componentDidUpdate",value:function(){this.fetchMoreIfNecessary()}},{key:"render",value:function(){return(0,this.props.children)({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}])&&l(n.prototype,r),a&&l(n,a),t}()},bYE1:function(e,t,n){"use strict";var r=n("BAXv"),o=n("85jk"),a={scope:"profile email",client_id:r.a.GEN.templateConst.settings.GPLUS_CLIENT_ID,app_package_name:r.a.GEN.templateConst.settings.GPLUS_APP_PACKAGE_NAME,access_type:"offline",cookie_policy:"single_host_origin"},i=function(e){return Object(o.a)("unauth_web.gapi_auth2_load.success"),e()};t.a=function(){return new Promise(function(e,t){window.gapi.auth2?window.gapi.auth2.init(a).then(function(){return i(e)}):window.gapi.load("auth2",{callback:function(){window.gapi.auth2.init(a).then(function(){return i(e)})},onerror:function(){Object(o.a)("unauth_web.api_auth2_load.error"),t()},timeout:15e3,ontimeout:function(){Object(o.a)("unauth_web.api_auth2_load.timeout"),t()}})})}},g5tP:function(e,t,n){"use strict";t.h=function(){return{type:"BOARDS_FETCH_ALL_IF_NEEDED",payload:{}}},t.i=function(){return{type:"BOARDS_FETCH_LAST_PINNED_TO_IF_NEEDED",payload:{}}},t.b=y,t.j=g,t.f=function(e){var t=f({},e);return function(n){return n({type:"BOARD_CREATE",payload:{board:e}}),i.a.create("BoardResource",t).callCreate().then(function(e){r.a.trackEvent(h,"success");var o=e.resource_response.data;return o&&(l.b.publish("currentUser","boardCreated",o),n(g()),n(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}(t,o))),o}).catch(function(e){throw r.a.trackEvent(h,"error"),e})}},t.e=v,t.m=function(e){return function(t){var n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},o=f({board_id:e.id,name:e.name,description:e.description,category:e.category,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled},n);return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:o}}),i.a.create("BoardResource",o).callUpdate().then(function(n){r.a.trackEvent(m,"success");var a=n&&n.resource_response&&n.resource_response.data||e;t(v(o,a))}).catch(function(e){throw r.a.trackEvent(m,"error"),e})}},t.d=function(e,t){return{type:"BOARD_UPDATE_COLLABORATION_SETTINGS",payload:{boardId:e,collaboratorRequestsEnabled:t}}},t.g=function(e){return function(t,n){var o=n().boards.content[e],a=o.pin_count,c=o.owner.id;return t({type:"BOARD_DELETE",payload:{boardId:e}}),i.a.create("BoardResource",{board_id:e}).callDelete().then(function(){r.a.trackEvent(b,"error"),l.b.publish("currentUser","boardDeleted",e),t(E(e)),t(Object(u.a)({userId:c,increment:-a}))}).catch(function(e){throw r.a.trackEvent(b,"error"),e})}},t.c=function(e){return{type:"BOARD_PIN_TO",payload:{board:e}}},t.a=function(e){return function(t){return t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),i.a.create("BoardArchiveResource",{boardId:e}).callUpdate()}},t.l=function(e){return function(t){return t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),i.a.create("BoardArchiveResource",{boardId:e}).callDelete()}},t.k=function(e,t){return function(n){return i.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(function(){return Promise.all([n(E(e)),n(y(t,"pin_count")),n(Object(o.a)(c.b.BOARD_SECTIONS,t))])})}};var r=n("/e0Y"),o=n("VF/E"),a=n("THYI"),i=n.n(a),c=n("mZ/m"),l=n("Cjb7"),s=n("HLDn"),u=n("D+PP"),d=n("S+Qs");function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h="board_create",b="board_delete",m="board_edit";function y(e,t){return Object(d.a)("BoardResource",{board_id:e,field_set_key:t})}function g(){return function(e,t){var n=t().viewer;n.isAuth&&Object(s.b)(n.username).forEach(function(t){e(t)})}}function v(){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},board:arguments.length>1?arguments[1]:void 0},error:arguments.length>2?arguments[2]:void 0}}function E(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}},hSTm:function(e,t,n){e.exports=function(){return new Promise(function(e){n.e(84).then(function(t){e(n("/+lb"))}.bind(null,n)).catch(n.oe)})}},hkVh:function(e,t,n){"use strict";t.a=function(e){var t=e.disabled,n=e.submitting,a=e.text,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["disabled","submitting","text"]);return r.createElement(o.b,{display:"flex",position:"relative"},n&&r.createElement(c,null),r.createElement(o.c,Object.assign({},i,{inline:!0,color:"red",type:"submit",text:a,disabled:t||n})))};var r=n("d6ZO"),o=(n.n(r),n("gEaE"));var a={__style:{borderRadius:4}},i={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function c(){return r.createElement(o.b,{alignItems:"center",color:"red",dangerouslySetInlineStyle:a,display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%"},r.createElement(o.b,{dangerouslySetInlineStyle:i,display:"inlineBlock",height:18,position:"relative",shape:"circle",width:18}))}},iSgY:function(e,t,n){"use strict";var r=n("d6ZO"),o=(n.n(r),n("W/Cr")),a=n("gEaE");t.a=function(e){var t=e.type,n={group:{accessibilityLabel:o.a._("group board","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:o.a._("protected board","Board picker protected board icon"),icon:"lock"},secret:{accessibilityLabel:o.a._("secret board","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:o.a._("board with sections","Board picker board with sections icon"),icon:"arrow-down"}}[t];return r.createElement(a.b,{marginLeft:1},r.createElement(a.b,{marginStart:2},"sections"===t||"sectionsInline"===t?r.createElement(a.n,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:"12",color:"darkGray"}):r.createElement(a.n,{accessibilityLabel:n.accessibilityLabel,icon:n.icon,size:16,color:"darkGray"})))}},"j1/O":function(e,t,n){"use strict";var r=n("hlP+"),o=n.n(r),a=n("g1tx"),i=n("THYI"),c=n.n(i),l=n("eD+K"),s=n("EAiy"),u=l.a.findHandlerByName("search_autocomplete_render"),d=function(e){e=e||{},this.tags=e.tags,this.enable_recent_queries=!!e.enable_recent_queries,this.minimum_term_character_length=e.minimum_term_character_length||0,this.bypass_lru_cache=e.bypass_lru_cache;var t={tags:e.tags,pin:e.pin_id},n=e.num_places;n?t.num_places=n:t.count="count"in e?e.count:5,e.exclude_non_followers&&(t.exclude_non_followers=!0),e.field_set_key&&(t.field_set_key=e.field_set_key),e.pin_scope&&(t.pin_scope=e.pin_scope);var r="TypeaheadResource";e.resource_name&&(r=e.resource_name),this.searchResource=c.a.create(r,t),this.itemsCache=new a.a};Object.assign(d.prototype,o.a),Object.assign(d.prototype,{search:function(e,t){var n;if(!e&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&s.a.isLimitedLogin())return this.abortSearch(),this.publishData(e,[],{},t);if(!e&&this.enable_recent_queries&&s.a&&s.a.isAuthenticated())n="recent_search";else{var r=this.bypass_lru_cache?{}:this.itemsCache.get(e);if(r){var o=r.items;if(o&&o.length){this.abortSearch();var a=r.hint;return void this.publishData(e,o,a,t)}}}e.length>=this.minimum_term_character_length?this.fetch(e,n,t):this.publishData(e,[],{},t)},getResource:function(){return this.searchResource},abortSearch:function(){this.trigger("typeaheadSearchAbort"),this.getResource().abort()},publishData:function(e,t,n,r){var o={term:e,items:t,hint:n};this.trigger("data",o),r&&r(o)},setAutocompleteScope:function(e){this.getResource().set("autocompleteScope",e)},fetch:function(e,t,n){var r=this,o=null,a=null;u&&u.hasActiveStopwatch()&&(o=u._currTraceId,a=u._currTimer&&u._currTimer.spanId);var i=this.getResource();if(i.isCalling()){var c=i.get("term");if(e===c)return;this.abortSearch()}""!==this.tags&&(this.trigger("typeaheadSearchStart",e),i.set("term",e),i.set("tags",t||this.tags),i.resetBookmark(),i.callGet({showError:!1,tracingParams:{traceId:o,parentSpanId:a}}).then(function(t){var o=t.resource_response.data,a=o.items,i=o.hint||{},c={hint:i,items:a};r.cacheData(e,c),r.publishData(e,a,i,n)},function(e){r.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm:function(e){this.itemsCache.remove(e)},cacheData:function(e,t){this.itemsCache.set(e,t)},prefetch:function(){this.warm||(c.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0)}}),t.a=d},jnRL:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e,t){return{type:"MOST_RECENT_BOARD",payload:{id:e,name:t}}}},kxCB:function(e,t,n){"use strict";t.a=function(e){var t,n;return n=t=function(t){function n(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;return f(e)}(this,(e=u(n)).call.apply(e,[this].concat(o))),p(f(f(t)),"showToast",function(e){t.context.showToast?t.context.showToast(e):c()().then(function(t){var n=t.default;n.showReactToast(e)})}),p(f(f(t)),"hideAllToasts",function(){t.context.hideAllToasts?t.context.hideAllToasts():c()().then(function(e){var t=e.default;t.removeAllToasts()})}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,t),function(e,t,n){t&&s(e.prototype,t);n&&s(e,n)}(n,[{key:"render",value:function(){return r.createElement(e,Object.assign({},this.props,{hideAllToasts:this.hideAllToasts,showToast:this.showToast}))}}]),n}(r.Component),p(t,"displayName","WithShowToast(".concat(e.displayName||e.name,")")),p(t,"contextTypes",{showToast:a.a.func,hideAllToasts:a.a.func}),n};var r=n("d6ZO"),o=(n.n(r),n("IaRT")),a=n.n(o),i=n("qMdf"),c=n.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},"lip+":function(e,t,n){"use strict";var r=n("DUIN");t.a=Object(r.connect)(function(e){return{viewer:e.viewer}})(function(e){return(0,e.children)(e.viewer)})},mSxZU:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=n("28Da"),c=n("vBru"),l=n("wUWH"),s=n("HcmU"),u=n("DKBQ"),d=n("biwq"),f=n("W/Cr"),p=n("R6a3");var h=n("1Xwf");var b=n("M/2V"),m=n("8EHR"),y=n("GhED"),g=n("UVpX"),v=n("Svvu"),E=n("EAiy"),_=n("pN+K"),w=n("MQ2h"),S=n("gEaE");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return o=this,a=(e=j(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==O(a)&&"function"!=typeof a?P(o):a,I(P(P(n)),"state",{isFacebookChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.facebook_publish_stream_enabled,isTwitterChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.twitter_publish_enabled}),I(P(P(n)),"handleTwitterCheckboxChanged",function(){var e=!n.state.isTwitterChecked;n.setState({isTwitterChecked:e}),n.props.onSocialConnect(v.default.TWITTER,e)}),I(P(P(n)),"handleFacebookCheckboxChanged",function(){var e=!n.state.isFacebookChecked;e?g.a.maybeRequestFbTimelinePermission({success:function(){n.setState({isFacebookChecked:!0}),E.a.set("facebook_publish_stream_enabled",e),n.props.onSocialConnect(v.default.FACEBOOK,e)},error:function(){n.setState({isFacebookChecked:!1}),E.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(v.default.FACEBOOK,e)}}):(n.setState({isFacebookChecked:!1}),E.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(v.default.FACEBOOK,e))}),I(P(P(n)),"renderFacebookShare",function(){return r.createElement(S.b,{display:"flex",alignItems:"center",marginLeft:2},r.createElement(S.e,{checked:n.state.isFacebookChecked,id:"share_facebook",onChange:n.handleFacebookCheckboxChanged,size:"sm"}),r.createElement(S.q,{htmlFor:"share_facebook"},r.createElement(S.b,{marginLeft:2},r.createElement(S.K,null,f.a._("Post to Facebook")))))}),I(P(P(n)),"renderTwitterShare",function(){return r.createElement(S.b,{display:"flex",alignItems:"center",marginLeft:5},r.createElement(S.e,{checked:n.state.isTwitterChecked,id:"share_twitter",onChange:n.handleTwitterCheckboxChanged,size:"sm"}),r.createElement(S.q,{htmlFor:"share_twitter"},r.createElement(S.b,{marginLeft:2},r.createElement(S.K,null,f.a._("Post to Twitter")))))}),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(o=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.resourceLoaded,n=e.userSocial;t&&n&&this.setState({isFacebookChecked:!!n.facebook_publish_stream_enabled,isTwitterChecked:!!n.twitter_publish_enabled})}},{key:"render",value:function(){var e=this.props,t=e.resourceLoaded,n=e.userSocial;if(!t||!n)return null;var o=n.connected_to_facebook,a=n.twitter_url;return!(!o&&!a)&&r.createElement(S.b,{display:"flex",padding:2},o&&this.renderFacebookShare(),a&&this.renderTwitterShare())}}])&&C(n.prototype,o),a&&C(n,a),t}(),T=Object(w.compose)(Object(a.connect)(function(e){var t=e.viewer;return{userId:t.isAuth?t.id:""}}),Object(_.b)({name:"UserResource",key:"userSocial",options:function(e){return{user_id:e.userId,field_set_key:"social_connect"}}}))(x),B=n("Cjb7"),R=n("THYI"),L=n.n(R),D=n("FUgs"),M=(n("DNL0"),n("6oHq")),A=n("sYje"),N=n("JqyP");function F(e){var t,n,o="-7 -7 30 30";switch(e.name){case"facebook":n=r.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#3B5998"}),t=r.createElement("path",{fill:"#fff",d:"M9.267 16V8.702h2.506l.376-2.845H9.267V4.041c0-.823.234-1.384 1.442-1.384l1.541-.001V.112A21.09 21.09 0 0 0 10.005 0C7.783 0 6.262 1.325 6.262 3.76v2.097H3.75v2.845h2.512V16h3.005z"});break;case"messenger":n=r.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#1DA1F2"}),t=r.createElement("path",{fill:"#fff",d:"M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.981 5.769V16l2.724-1.495c.727.201 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z"});break;case"pinterest":o="0 0 16 16",t=r.createElement("path",{fill:"#e60023",d:"M5.644 15.648A8.01 8.01 0 0 0 8 16a8 8 0 1 0-2.847-.521c-.073-.625-.151-1.655.017-2.378.145-.621.934-3.958.934 -3.958s-.238-.477-.238-1.183c0-1.107.642-1.934 1.44-1.934.68 0 1.008.51 1.008 1.122 0 .683-.435 1.705-.66 2.652-.187.792.398 1.439 1.18 1.439 1.416 0 2.504-1.493 2.504-3.647 0-1.907-1.37-3.24-3.327 -3.24-2.266 0-3.596 1.7-3.596 3.456 0 .684.264 1.418.593 1.817a.238.238 0 0 1 .055.229c-.06.252-.195.792-.221.903-.035.146-.116.177-.267.107C3.581 10.4 2.96 8.946 2.96 7.778c0-2.512 1.825-4.82 5.262-4.82 2.763 0 4.91 1.97 4.91 4.6 0 2.745-1.73 4.954-4.133 4.954-.807 0-1.566-.42-1.825-.914 0 0-.4 1.52-.496 1.893-.188.722-.71 1.637-1.033 2.157z"});break;case"link":n=r.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#EFEFEF"}),t=r.createElement("path",{fill:"#8e8e8e",d:"M6.555 7.236L4.848 8.943l-2.389 2.39 2.21 2.21 2.39-2.39 1.707-1.707.82.821a.92.92 0 0 1 .006 1.301l-4.166 4.167a.926.926 0 0 1-1.302-.005L.272 11.878a.92.92 0 0 1-.005-1.302L4.433 6.41a.924.924 0 0 1 1.302.005l.82.821zM9.45 8.764l1.707-1.707 2.389-2.389-2.21-2.211-2.39 2.389-1.707 1.707-.82-.82a.921.921 0 0 1-.006-1.302L10.578.265a.924.924 0 1 1.301.006l3.853 3.852a.92.92 0 0 1 .004 1.301l-4.165 4.167a.924.924 0 0 1-1.302-.006l-.82-.82zm-4.573.889l4.779-4.78 1.473 1.474-4.779 4.78-1.473-1.474z"});break;default:t=null}return r.createElement("svg",{width:"36",height:"36",viewBox:o},n,t)}var H=n("8e8Q");function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=z(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==U(o)&&"function"!=typeof o?G(r):o,Q(G(G(n)),"state",{showShareLink:!1,pinterestProfileLink:"",fb:null}),Q(G(G(n)),"selectText",function(e){e.target.select()}),Q(G(G(n)),"openSocialDialog",function(e,t){var r,o=n.props,a=o.handleShare,i=o.dismissModal,c=o.experienceComplete;switch(e){case"facebook":M.default.logIn(n.state.fb,function(){A.a.shareFacebookInvite(n.getShareOptions(5))});break;case"messenger":M.default.logIn(n.state.fb,function(){A.a.shareFbMessengerInvite(n.getShareOptions(6))});break;case"link":r=n.getShareOptions(12),A.a.createAndLogShareInvite(r).then(function(e){var t=e.invite_url;t?n.setState({pinterestProfileLink:t,showShareLink:!0}):a&&a()});break;default:a&&a()}"link"!==e&&(c&&c(),i(!0))}),Q(G(G(n)),"handleShareLinkDismiss",function(e){n.setState({showShareLink:!1})}),Q(G(G(n)),"handleFacebookClick",function(e){n.openSocialDialog("facebook",e)}),Q(G(G(n)),"handleMessengerClick",function(e){n.openSocialDialog("messenger",e)}),Q(G(G(n)),"handlePinterestClick",function(e){n.openSocialDialog("pinterest",e)}),Q(G(G(n)),"handleLinkClick",function(e){n.openSocialDialog("link",e)}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;M.default.ensureInit(function(t){return e.setState({fb:t})})}},{key:"getShareOptions",value:function(e){var t=this.props.pin;return{invite_channel:e,object_type:H.a.PIN,object_id:t.id,name:"",description:t.description||"",path:"/pin/".concat(t.id,"/"),picture:t.images&&t.images["236x"]&&t.images["236x"].url||""}}},{key:"render",value:function(){var e=this.props.close,t=this.state,n=t.pinterestProfileLink,r=t.showShareLink,a=o.a.createElement(N.a,{link:n,handleClick:this.handleShareLinkDismiss,handleFocus:this.selectText}),i=function(e,t,n){var i="share-upsell-label-"+e,c="";return"facebook"===e?c="#3b5998":"messenger"===e&&(c="#1da1f2"),"link"===e&&r?a:o.a.createElement(S.P,{onTouch:function(e){var t=e.event;return n(t)},fullWidth:!1},o.a.createElement(S.b,{display:"flex",paddingY:2,alignItems:"center"},o.a.createElement(F,{name:e}),o.a.createElement(S.h,{xs:1}),o.a.createElement("div",{id:i},o.a.createElement(S.K,{size:"xl",bold:!0},o.a.createElement("span",{style:{color:c}},t)))))};return o.a.createElement(S.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},o.a.createElement("div",null,o.a.createElement(S.b,{paddingX:6,flex:"none"},o.a.createElement(S.b,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:16,right:16}}},o.a.createElement(S.o,{icon:"cancel",onClick:e,accessibilityLabel:f.a._("Cancel"),size:"sm"})),o.a.createElement(S.m,{size:"md"},f.a._("Saved!","Save pin to board")),o.a.createElement(S.b,{paddingY:3,marginRight:8},o.a.createElement(S.K,{size:"xl"},f.a._("Know someone who might like it?","Upsell share a recently saved pin to board"))),o.a.createElement(S.b,{paddingY:2,flex:"none"},i("facebook",f.a._("Send on Facebook"),this.handleFacebookClick),i("messenger",f.a._("Send on Messenger"),this.handleMessengerClick),i("pinterest",f.a._("Send on Pinterest"),this.handlePinterestClick),i("link",f.a._("Send a link"),this.handleLinkClick)))),o.a.createElement(S.h,{xs:1}))}}])&&W(n.prototype,a),i&&W(n,i),t}(),q=n("FTnl"),V=n("eD+K"),X=n("kxCB"),Z=n("EfF6"),J=n("5tOk"),$=n("MH3C"),ee=n("D+PP"),te=n("y2lE"),ne=n("g5tP");function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){se(e,t,n[t])})}return e}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return de}),n.d(t,"d",function(){return me}),t.b=function(e){return o.a.createElement(ve,Object.assign({action:"create"},e))},t.c=function(e){return o.a.createElement(Ee,Object.assign({action:"repin"},e))};var ue=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,de=4e3,fe=660,pe="236x",he="PinPanePinMeta",be=236,me={LOADING:"loading",SUCCESS:"success"},ye=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,a=(e=ie(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==re(a)&&"function"!=typeof a?le(r):a,se(le(le(n)),"state",{pinDescription:n.props.pin&&n.props.pin.description||"",showSharingUpsell:!1,resolve:void 0,experienceComplete:function(){},experienceDismiss:function(){},newPin:null,boardSavedTo:null,height:0,sharing:{facebook:!1,twitter:!1},modalTitle:n.props.showCreate?f.a._("Create board"):f.a._("Choose board")}),se(le(le(n)),"setModalTitle",function(e){return n.safeSetState({modalTitle:e})}),se(le(le(n)),"setPWTSaveRequestTiming",function(e,t){e?(n.setPWTAbort(),V.a.sendEvent(new m.a)):t&&V.a.sendEvent(new y.a({result:t}))}),se(le(le(n)),"getPinHeight",function(){var e=(n.props.pin.images[be+"x"]||{}).height||0,t=document.getElementById(he);return t&&e?t.clientHeight+e:0}),se(le(le(n)),"unmounted",!1),se(le(le(n)),"safeSetState",function(e,t){n.unmounted?t&&t():n.setState(e,t)}),se(le(le(n)),"scrollToRelatedPins",function(){document&&document.documentElement&&"scrollBehavior"in document.documentElement.style?window.scroll({top:n.state.height,left:0,behavior:"smooth"}):window.scrollTo(0,n.state.height)}),se(le(le(n)),"handleBoardSaveSuccess",function(e,t,r){var o=n.props,a=o.action,i=o.dispatch,c=o.pin,l=o.setCompletionPromise,d=o.viewerUserId;s.a.instance.refreshPlacedExperiences(),n.setPWTSaveRequestTiming(!1,1);var f=s.a.instance.getPlacedExperience(33),p=s.a.instance.getPlacedExperience(11);if(l(n._makeCancelablePromise(new Promise(function(t,o){var c=e.resource_response.data;n._triggerPubSubs(c);var l=n.state.pinDescription.match(ue)||[];l.length>0&&n.props.contextLog(2,{element:10273,hashtags:JSON.stringify(l),objectId:n.props.pin.id}),"repin"===a?(n._fetchBoardRecommendation(c).then(function(e){n._showSuccessToast(e,c,r)}),f&&500388===f.experience_id?n.safeSetState({showSharingUpsell:!0,newPin:c,resolve:t}):t(c)):("create"===a&&p&&500840===p.experience_id&&(i({type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:!0}}),n.props.contextLog(7510,{component:13233})),t(c))}))),i(Object(ne.c)(t)),i(Object(Z.d)({boardId:t.id,sectionId:r&&r.id,increment:1})),d&&i(Object(ee.a)({userId:d,increment:1})),r||!t.image_cover_url){var h=c.image_url,b=c.images;t.image_cover_url=h||b[pe]&&b[pe].url||"",i(Object(ne.e)({},t))}r&&i(Object(u.a)(r.id)),i({type:"PIN_SAVE",payload:{pinId:c.id,saved:!0}})}),se(le(le(n)),"_adjustHeightToPin",function(){0===n.state.height&&(n.safeSetState({height:fe}),n.props.onHeightChange&&n.props.onHeightChange(fe))}),se(le(le(n)),"close",function(){var e=n.props,t=e.contextLog,r=e.onClose;n.experienceDismiss&&n.experienceDismiss(),r&&(n.setPWTAbort(),r(),t(2502,{component:5,element:610}))}),se(le(le(n)),"handleSaveToBoard",function(e,t){if(!n.state.boardSavedTo){n.setPWTSaveRequestTiming(!0);var r="secret"===(e.privacy||""),o={board:t?t.id:e.id,state:me.LOADING};n.safeSetState({boardSavedTo:o},function(){n._getPinResource(r,e.id,(t||{}).id).callCreate({showError:!0}).then(function(r){n.safeSetState({boardSavedTo:Object.assign(o,{state:me.SUCCESS})},function(){return n.handleBoardSaveSuccess(r,e,t)})}).catch(function(e){n.unmounted||n.safeSetState({boardSavedTo:null}),n.setPWTSaveRequestTiming(!1,3);var t=n._makeCancelablePromise(Promise.reject(e));n.props.setCompletionPromise(t)})})}}),se(le(le(n)),"handleSocialConnectSet",function(e,t){var r=Object.assign({},n.state.sharing);e===v.default.FACEBOOK?r.facebook=t:e===v.default.TWITTER&&(r.twitter=t),n.safeSetState({sharing:r})}),se(le(le(n)),"updateDescription",function(e){n.safeSetState({pinDescription:e})}),se(le(le(n)),"handleLogToastClick",function(){n.props.contextLog(101,{component:20,view:52})}),se(le(le(n)),"_makeCancelablePromise",function(e){var t=!1;return{promise:new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)}),e.catch(function(e){return r(t?{isCanceled:!0}:e)})}),cancel:function(){t=!0}}}),se(le(le(n)),"_getPinResource",function(e,t,r){var o,a=n.props,i=a.color,c=a.location,l=a.pin,s=a.method,u=a.guid,f=a.additionalCreateFields,p=a.advertiser_id;l.id&&(o=Object(d.a)(l,c)||"".concat(l.tracking_params,"~0"));var h=l.id?"RepinResource":"PinResource",b=!l.id&&l.image_url?Object($.b)(l.image_url,l.link):"",m=oe({},f,{board_id:t||"",color:i||"",clientTrackingParams:o,description:n.state.pinDescription,guid:u||"",link:l.link,image_base64:l.image_base64,image_url:b,is_buyable_pin:!1,is_removable:l.promoted_is_removable,media_upload_id:l.media_upload_id,method:s||"",pin_id:l.id||"",section:r,title:l.title||""},p?{advertiser_id:p}:{});if(!e){var y=n.state.sharing,g=y.facebook,v=y.twitter;m.share_facebook=g,m.share_twitter=v}return L.a.create(h,m)}),se(le(le(n)),"_triggerPubSubs",function(e){B.a.instance.publish("currentUser","pinCreated",e),B.a.instance.publish(e.board.id,"pinCreated",{pin:e}),"repin"===n.props.action&&(B.a.instance.publish(e.board.id,"pinRepinned",e),B.a.instance.publish(n.props.pin.id,"pinRepinned",e))}),se(le(le(n)),"_showSuccessToast",function(e,t,r){var a=n.props,i=a.hideAllToasts,c=a.showSuccessToast,l=a.showToast;if(c&&!n.state.showSharingUpsell){i();var s,u=t.board,d=u.image_cover_url,p=u.name,h=u.url;if(s=r?[Object(J.c)(f.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board"),{sectionName:r.title,boardName:p})]:[f.a._("Saved to"),p],l(function(e){var t=e.onHide;return o.a.createElement(q.a,{duration:de,onHide:t,text:s,href:r?"".concat(h).concat(r.slug):h,imageUrl:d,onClick:n.handleLogToastClick})}),e){var b=e.name,m=e.url,y=e.image_thumbnail_url;l(function(e){var t=e.onHide;return o.a.createElement(q.a,{duration:de,onHide:t,text:[f.a._("You might also like","Post repin suggested board"),b],href:m,imageUrl:y,onClick:n.handleLogToastClick})})}}}),se(le(le(n)),"_fetchBoardRecommendation",function(e){return L.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(function(e){return Promise.resolve(e.resource_response.error?null:e.resource_response.data[0])})}),se(le(le(n)),"dismissModal",function(e){var t=n.state,r=t.resolve,o=t.newPin;n.experienceDismiss&&!e&&n.experienceDismiss(),r&&r(o)}),n}var n,a,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.boardWithSection,n=e.showCreate;this._adjustHeightToPin(),t&&n?this.setModalTitle(f.a._("Create section","modal title for create section pane")):t&&!n&&this.setModalTitle(f.a._("Choose section","modal title for choose section")),V.a.isDisabled()||V.a.addHandler(new b.a)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.safeSetState({pinDescription:e.pin&&e.pin.description||e.description||""})}},{key:"componentDidUpdate",value:function(){this._adjustHeightToPin()}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"setPWTAbort",value:function(){V.a.sendEvent(new i.a({result:{COMPLETE:1,USER_ABORT:2,RESPONSE_ERROR:3,RESPONSE_TIMEOUT:4,NETWORK_ERROR:5,CLIENT_SOFTWARE_ERROR:6,OTHER:7,NAVIGATE_AWAY:8,EXIT_APP:9,BACKGROUND_APP:10,COMPLETE_WITHOUT_CONTENT:11}.ABORTED}))}},{key:"render",value:function(){var e=this;if(!this.props.pin&&!this.props.resourceLoaded)return null;var t=this.props,n=t.color,r=t.pin,a=t.isInModal,i=t.onCloseAndShare,s=t.sensitiveContentNotice,u=t.showCreate,d=t.suggestedBoardTitle,b=this.state,m=b.showSharingUpsell,y=b.boardSavedTo,g=b.height||660,v=s&&s.title||this.state.modalTitle,E=s?o.a.createElement(D.a,{notice:s,inModal:!0}):o.a.createElement(S.b,{position:"relative",height:g,width:"100%",display:"flex",justifyContent:"center"},o.a.createElement(S.b,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",shape:"rounded",width:"100%"},o.a.createElement(S.b,{width:"40%",direction:"column",display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #f5f5f5"}}},o.a.createElement(S.b,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"start",direction:"column",marginTop:3},o.a.createElement(h.a,{color:n,pin:r,updateDescription:this.updateDescription})),o.a.createElement(T,{onSocialConnect:this.handleSocialConnectSet})),m?o.a.createElement(l.a,{placementId:33,experienceIds:[500388]},function(t){var n=t.complete,a=t.dismiss;t.display_data;return e.experienceComplete=n,e.experienceDismiss=a,o.a.createElement(Y,{handleShare:i,close:e.close,experienceComplete:n,pin:r,dismissModal:e.dismissModal})}):o.a.createElement(S.b,{display:"flex",width:"60%"},o.a.createElement(c.a,{boardSavedTo:y,boardWithSection:this.props.boardWithSection,isRepin:!0,onBoardCreated:this.props.onBoardCreated,onBoardSave:this.handleSaveToBoard,onClose:this.close,pinId:r.id,showCreate:u,suggestedBoardTitle:d,setModalTitle:a?this.setModalTitle:void 0}))));return a?o.a.createElement(p.a,{accessibilityCloseLabel:f.a._("Close"),accessibilityModalLabel:v,onDismiss:this.close,heading:v,size:"lg"},E):E}}])&&ae(n.prototype,a),g&&ae(n,g),t}();function ge(e){var t=e.advertiser,n=e.viewer,r=e.location,o=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null;return oe({location:r},o?{advertiser_id:o}:{},n.isAuth?{viewerUserId:n.id}:{})}se(ye,"defaultProps",{pwtAuxData:{}});var ve=Object(w.compose)(Object(a.connect)(ge),X.a,te.a,Object(_.b)({name:"FakePinResource",key:"pin",options:function(e){return oe({},e.fakeResource.options)}}))(ye);var Ee=Object(w.compose)(Object(a.connect)(ge),X.a,te.a)(ye)},mu3h:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=n("qZXM"),c=n("ymrh"),l=n("MQ2h"),s=(n.n(l),n("gEaE")),u=n("myYc"),d=n("woYD");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(l.compose)(Object(a.connect)(function(e,t){var n=e.pins,r=t.pinId,o=t.carouselSlotCurrentIndex,a=((n&&r&&n[r]||{}).carousel_data||{}).index;return void 0!==o?{carouselSlotCurrentIndex:a||o||0}:{}}),function(e){return function(t){function n(){var e,t,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return r=this,o=(e=b(n)).call.apply(e,[this].concat(c)),t=!o||"object"!==f(o)&&"function"!=typeof o?y(r):o,g(y(y(t)),"state",{showEditModal:!1}),g(y(y(t)),"onHide",function(){t.setState({showEditModal:!1}),(t.props.onToggleModal||u.g)(!1)}),g(y(y(t)),"handlePinEditButtonClick",Object(i.a)(function(e){e&&e.stopPropagation();var n=t.props,r=n.component;(n.onToggleModal||u.g)(!0),Object(d.a)(101,p({element:3},r?{component:r}:{})),t.setState({showEditModal:!0})})),t}var a,l,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,r.PureComponent),a=n,(l=[{key:"render",value:function(){var t=this.props,n=t.pinId,r=t.onDelete,a=t.onSubmit,i=t.carouselSlotCurrentIndex,l=this.state.showEditModal,u=p({},this.props,{handlePinEditButtonClick:this.handlePinEditButtonClick});return o.a.createElement(s.i,null,o.a.createElement(e,u),l&&o.a.createElement(c.a,{carouselSlotCurrentIndex:i,onDelete:r,onHide:this.onHide,onSubmit:a,pinId:n}))}}])&&h(a.prototype,l),v&&h(a,v),n}()})},n9Oa:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},o=function(e){if(!e)return"";for(var t="",n=0;n<e.length;n+=1)t+=r[e.charAt(n)]||e.charAt(n);return t},a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",r=t.toLowerCase();return e.filter(function(e){return function(e,t){for(var n=t.split(" "),r=e.split(" "),a=0,i=0;i<r.length;i+=1)(o(r[i]).includes(n[a])||r[i].includes(n[a]))&&(a+=1);return a===n.length}(e[n].toLowerCase(),r)})}},ogic:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),t.c=function(e){return!!e&&e.severity===o.ABUSIVE&&e.advisory===r.EMOTIONAL_DISDRESS_OR_SUICIDE};var r={EMOTIONAL_DISDRESS_OR_SUICIDE:4},o={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2}},p58k:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",function(){return c});var o={row:0,section:0},a={row:-1,section:-1},i=function(){},c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.index=Object.assign({},o),this.sections=t,this.updateCallback=i,this.selectItem=i}var t,n,c;return t=e,(n=[{key:"getIndex",value:function(){return this.index}},{key:"isAtStart",value:function(){var e=this.index,t=e.row,n=e.section;return 0===t&&0===n}},{key:"isAtEnd",value:function(){var e=this.index,t=e.row,n=e.section,r=this.sections[n]||[];return this.sections.length===n+1&&r.length===t+1}},{key:"next",value:function(){if(!this.isAtEnd()){var e=this.index,t=e.row,n=e.section;t===a.row&&n===a.section?this.index=Object.assign({},o):this.sections[n].length>t+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}}},{key:"prev",value:function(){if(!this.isAtStart()){var e=this.index,t=e.row,n=e.section;if(t===a.row&&n===a.section)this.index=Object.assign({},o);else if(t>0)this.index.row-=1;else{var r=this.index.section-1;this.index={section:r,row:this.sections[r].length-1}}this.updateCallback(!0)}}},{key:"select",value:function(){var e=this.index,t=e.row,n=e.section;this.selectItem((this.sections[n]||[])[t])}},{key:"setInactive",value:function(){this.index=Object.assign({},a),this.updateCallback()}},{key:"setSelectItem",value:function(e){this.selectItem=e}},{key:"setUpdateCallback",value:function(e){this.updateCallback=e}},{key:"updateIndex",value:function(e){this.index=e,this.updateCallback()}}])&&r(t.prototype,n),c&&r(t,c),e}()},"pN+K":function(e,t,n){"use strict";t.a=g,t.c=function(e){var t=e.name,n=e.options;return Object(o.connect)(_({name:t,options:n||{}}))};var r=n("d6ZO"),o=(n.n(r),n("DUIN")),a=n("lJK6"),i=n("FfPm"),c=n("IaRT"),l=(n.n(c),n("S+Qs"));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){y(e,t,n[t])})}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return Object(a.a)("function"==typeof e?e(t):e||{})}var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var o,a;return a=o=function(o){function a(){var n,r,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];return o=this,i=(n=h(a)).call.apply(n,[this].concat(u)),r=!i||"object"!==s(i)&&"function"!=typeof i?m(o):i,y(m(m(r)),"loadData",function(n){var r=t;e.forEach(function(e){var t=e.options,o=e.name,a="function"==typeof t?t(n):t;n.dispatch(Object(l.a)(o,a,void 0,void 0,r.traceLoggerHandlerName))})}),y(m(m(r)),"loadMoreData",function(n){var r=t;e.forEach(function(e){var t=e.options,o=e.name,a="function"==typeof t?t(n):t;n.dispatch(Object(l.d)(o,a,void 0,void 0,r.traceLoggerHandlerName))})}),y(m(m(r)),"resourcesHash",JSON.stringify(e.map(function(e){return f({},e,{options:g(e.options,r.props)})}))),r}var i,c,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,r["Component"]),i=a,(c=[{key:"componentDidMount",value:function(){!1!==t.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function(e){var t,n,r=d(Object.keys(this.props)).concat(d(Object.keys(e))),o=!0,a=!1,i=void 0;try{for(var c,l=r[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var s=c.value;if("resourceData"===s){if(t=this.props.resourceData,n=e.resourceData,JSON.stringify(t)!==JSON.stringify(n))return!0}else if(this.props[s]!==e[s])return!0}}catch(e){a=!0,i=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw i}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(e.map(function(e){return f({},e,{options:g(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function(){var e=this,t=this.props,o=t.error,a=t.isAtEnd,i=t.isFetching,c=t.resourceData,l=t.resourceLoaded,s=u(t,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete s.onResourceError,delete s.onResourceLoaded,r.createElement(n,Object.assign({},c,s,{error:o,fetchMoreData:function(){return e.loadMoreData(e.props)},isAtEnd:a,isFetching:i,refreshData:function(){return e.loadData(e.props)},resourceLoaded:l}))}}])&&p(i.prototype,c),v&&p(i,v),a}(),y(o,"WrappedComponent",n),y(o,"displayName",1===e.length?e[0].name:"".concat(e.length," resources")),a}},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r,a={name:e.name,options:e.options||{},key:e.key||"data"};return Object(o.connect)((r={},function(e){return function(t,n){var o,a=t.resources,c=a.fetching,l=a.data,s=e.some(function(e){var t=e.name,r=e.options;return c[t]&&c[t][g(r,n)]}),u={},d=[];e.forEach(function(e){var t=e.name,a=e.options,c=e.key;if(l[t]){var s=g(a,n);if(r[t]||(s in l[t]?i.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(l[t]).length,level:"success",v:1}):Object.keys(l[t]).length?i.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(l[t]).length,level:"error",v:1}):i.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(l[t]).length,level:"warn",v:1})),r[t]=!0,l[t][s]){var f=l[t][s],p=f.data,h=f.nextBookmark,b=f.error;u[c]=p,d.push(h),b&&(o=b)}}else i.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var f=e.every(function(e){var t=e.key;return void 0!==u[t]});return{resourceLoaded:f,isAtEnd:f&&!s&&d.every(function(e){return"-end-"===e}),isFetching:s,nextBookmark:d[0],resourceData:u,error:o}}})([a]))(v([a],t)(n))}};t.b=E;var _=function(e){var t=e.name,n=e.options;return function(e,r){var o=e.resources.data;if(o[t]){var a=g(n,r);if(o[t][a])return{data:o[t][a].data}}return{data:null}}}},pOmq:function(e,t,n){"use strict";t.a=function(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}},q6Rf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=(n("2FON"),n("OIxG")),c=n("Ib0y"),l=n("GGB8"),s=n.n(l),u=n("biwq"),d=n("W/Cr"),f=n("r/ec"),p=n("tmfO"),h=n("8N7E"),b=n("M/2V"),m=n("8EHR"),y=n("GhED"),g=n("THYI"),v=n.n(g),E=n("eD+K"),_=n("kxCB"),w=n("Kiph"),S=n("EfF6"),O=n("MQ2h"),C=n("6oz1"),j=n("Cjb7"),k=n("suNN"),P=n("ogic"),I=n("jnRL"),x=n("+B8E"),T=n("woYD"),B=n("D+PP"),R=n("FTnl"),L=n("LzMI");function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var H=function(e){var t=e.boardId,n=e.boardUrl,r=e.postRepinMoreIdeasUpsell;if(!n)return!1;var o=r.recentSaves;if(r.recentUpsell[t])return!1;var a=o.findIndex(function(e){return e.boardId!==t});return(-1===a?o.length:a)+1>=3},U=function(e){function t(){var e,n,r,o,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return r=this,o=(e=A(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==D(o)&&"function"!=typeof o?F(r):o,a=F(F(n)),c=function(){var e=n.props.boardId;Object(T.a)(101,{component:20,element:10805,objectId:e})},(i="handleClick")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,r["PureComponent"]),n=t,(o=[{key:"componentDidMount",value:function(){(0,this.props.toastShown)()}},{key:"render",value:function(){var e=this.props,t=e.boardName,n=e.boardUrl,o=e.onHide;return r.createElement(R.a,{duration:5e3,onHide:o,text:Object(k.b)(d.a._("Find more ideas for {{ boardName }}"),{boardName:t}).join(""),href:"".concat(n,"more_ideas/?ideas_referrer=").concat(16),onClick:this.handleClick})}}])&&M(n.prototype,o),a&&M(n,a),t}(),W=Object(O.compose)(Object(a.connect)(null,function(e,t){return{toastShown:function(){return e(Object(L.c)(t.boardId))}}}))(U),z=n("JyNp"),K=n("mSxZU"),G=n("gEaE"),Q=n("te8a");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$(e,t,n[t])})}return e}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PinBetterSave",function(){return re});var ee=40,te=44,ne=4,re=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];return r=this,a=(e=X(t)).call.apply(e,[this].concat(l)),n=!a||"object"!==Y(a)&&"function"!=typeof a?J(r):a,$(J(J(n)),"state",{boardWithSection:null,buttonRef:null,createdBoard:null,searchQuery:"",suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null}),$(J(J(n)),"saveButtonRef",function(e){n.setState({buttonRef:e})}),$(J(J(n)),"setBoardSaveCompletionPromise",function(e){var t=n.state.createdBoard;n._repinCompletionPromise=e,n._repinCompletionPromise.promise.then(function(e){if(e.board){var r=e.board,o={boardId:r.id,title:r.name,url:r.url};n.updateSelectedBoardOrSection(o),n.updateSavedState(q({},o,{localPinId:e.id})),t&&Object(P.c)(t.sensitivity)&&t.sensitivity&&t.sensitivity.notice?n.setState({sensitiveContentNotice:t.sensitivity.notice}):n.handleRepinHide()}})}),$(J(J(n)),"updateSavedState",function(e){var t=n.props,r=t.save,o=t.onSave;r(q({pinId:t.pin.id},e)),o&&o()}),$(J(J(n)),"updateSelectedBoardOrSection",function(e){var t=n.props;(0,t.selectBoardOrSection)(q({pinId:t.pin.id},e))}),$(J(J(n)),"updateSelectedItem",function(){var e=n.props,t=e.initialSelection;!e.selectedItem&&t&&n.updateSelectedBoardOrSection(t)}),$(J(J(n)),"dropdownRef",o.a.createRef()),$(J(J(n)),"handleItemChosen",function(e){n.updateSelectedBoardOrSection(e),n.hideFlyout(!0),n.save(e)}),$(J(J(n)),"handleBoardCreate",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title,t=void 0===e?"":e;n.hideFlyout(!0),n.setState(function(e){return q({},e,{suggestedBoardTitle:t,showRepinModal:!0})});var r=n.props.onToggleFlyout;r&&r(!0,!0)}),$(J(J(n)),"handleBoardCreated",function(e){n.setState({createdBoard:e})}),$(J(J(n)),"handleRepinHide",function(){n.setState(function(e){return q({},e,{suggestedBoardTitle:"",showRepinModal:!1})});var e=n.props.onToggleFlyout;e&&e(!1,!1)}),$(J(J(n)),"handleBoardDropdownClick",function(e){var t=n.props,r=t.pin.id,o=t.viewParameter;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),n.state.showBoardFlyout?n.hideFlyout(!0):(Object(T.a)(101,{component:13282,element:10960,viewParameter:o,objectId:r}),E.a.sendEvent(new c.a),n.showFlyout())}),$(J(J(n)),"handleSaveClick",function(e){var t=n.props.selectedItem;t?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),Object(T.a)(101,{component:13282,element:36,objectId:t.boardId,grid_index:ne}),n.save(t)):n.handleBoardDropdownClick(e)}),$(J(J(n)),"setBoardWithSection",function(e){n.setState({boardWithSection:e})}),$(J(J(n)),"handleEditSubmit",function(e){var t=e.boardId,r=e.sectionId,o=e.url,a=e.title,i=n.props,c=i.pin.id,l=i.savedInfo,s=(l=void 0===l?{}:l).localPinId;n.updateSavedState({pinId:c,localPinId:s,boardId:t,sectionId:r||"",url:o,title:a})}),$(J(J(n)),"resetPinSavedState",function(){n.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),$(J(J(n)),"save",function(e){var t=n.props,r=t.isLimitedLogin,a=t.mostRecentBoard,i=t.pin.id,c=t.postRepinMoreIdeasUpsell,l=t.postRepinUpsellDisabled,s=t.requestContext,u=t.save,d=t.setMostRecentBoard,f=t.showToast;return E.a.sendEvent(new m.a),n.updateSavedState(e),E.a.sendEvent(new y.a({result:1})),new x.c(s,"web_save_animation").enabled(),n.getPinResource(e).callCreate({showError:!r}).then(function(t){var r=t.resource_response.data,s=e.url,p=n.props,h=p.incrementBoardPinCount,b=p.updateUserPinCount,m=p.viewerUserId;!l&&s&&H({boardId:e.boardId,boardUrl:s,postRepinMoreIdeasUpsell:c})&&f(function(t){var n=t.onHide;return o.a.createElement(W,{boardId:e.boardId,boardName:e.title,boardUrl:s,onHide:n})}),u(q({pinId:i},q({},e,{localPinId:r.id}))),j.b.publish("currentUser","pinCreated",r),j.b.publish(r.board.id,"pinCreated",{pin:r}),j.b.publish(r.board.id,"pinRepinned",r),h({boardId:e.boardId,sectionId:e.sectionId}),b(m),a&&e.boardId!==a.id&&d(e.boardId,e.title)}).catch(function(e){n.resetPinSavedState()})}),$(J(J(n)),"hideFlyout",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.props.onToggleFlyout;n.setState({showBoardFlyout:!1}),t&&t(!1,e)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){E.a.isDisabled()||E.a.addHandler(new b.a),this.updateSelectedItem()}},{key:"componentDidUpdate",value:function(e){this.updateSelectedItem()}},{key:"getPinResource",value:function(e){var t=this.props,n=t.carousel_data,r=t.location,o=t.pin,a=n&&n.index,i=Object(u.a)(o,r)||"".concat(o.tracking_params,"~0"),c=q({description:o.description||"",link:o.link,title:o.title||"",clientTrackingParams:i,board_id:e.boardId||"",pin_id:o.id||"",image_base64:o.image_base64,is_buyable_pin:!1,is_removable:o.promoted_is_removable,carousel_slot_index:a||0},e.sectionId?{section:e.sectionId}:{},Object(Q.b)(o)||{});return v.a.create("RepinResource",c)}},{key:"showFlyout",value:function(){var e=this.props.onToggleFlyout;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}},{key:"render",value:function(){var e=this,t=this.props,n=t.backgroundColor,r=t.boardResource,a=t.inMasonry,i=t.inCloseup,c=t.isMoreIdeasSaveTooltip,l=t.onToggleModal,u=t.pin,b=t.renderTooltipEducation,m=t.selectedItem,y=t.savedInfo,g=t.unselectedText,v=t.variant,E=t.viewParameter,_=this.state,S=_.boardWithSection,O=_.buttonRef,j=_.showBoardFlyout,P=_.showRepinModal,I=_.sensitiveContentNotice,x=_.suggestedBoardTitle,T=a?f.a:G.k,B=u.carousel_data,R="lego"===v?"sm":"md";return o.a.createElement(G.b,{width:"100%"},y&&y.title?o.a.createElement(C.a,{name:"web_save_animation",activate:!1},function(t){var n=t.anyEnabled;return o.a.createElement(G.b,{display:"flex",justifyContent:n?"end":"center",direction:"row",alignItems:"center"},(i||!n)&&o.a.createElement(G.b,{paddingX:1,flex:"grow","data-test-id":"saved-info"},o.a.createElement(p.b,{className:"underlineLink",stopPropagation:!0,style:{color:i?"#333":"#fff"},to:y.url},o.a.createElement(G.K,{color:i?"darkGray":"white",inline:!0,size:R},Object(k.b)(d.a._("Saved to {{ destination }}","Saved to label for better save"),{destination:o.a.createElement(G.K,{color:i?"darkGray":"white",bold:!0,inline:!0,key:"pin_auto_save_link"},y.title)})))),o.a.createElement(G.b,{paddingX:1},o.a.createElement(h.default,{component:0,onDelete:e.resetPinSavedState,onSubmit:e.handleEditSubmit,pinId:y.localPinId,onToggleModal:l,viewParameter:E,carouselSlotCurrentIndex:B&&B.index,style:!i&&n&&y?{bgColor:"transparentDarkGray",iconColor:"white",size:"sm"}:null})))}):o.a.createElement(G.b,{alignItems:"center",display:"flex",width:"100%",height:"lego"===v?te:ee},o.a.createElement("button",{className:s()("PinBetterSave__Dropdown",{"PinBetterSave__Dropdown--lightGray":"lightGray"===n,"PinBetterSave__Dropdown--transparentWhite":"transparentWhite"===n,"PinBetterSave__Dropdown--lego":"lego"===v,"PinBetterSave__Dropdown--expanded":j&&"classic"===v,"PinBetterSave__Dropdown--expandedLego":j&&"lego"===v}),"data-test-id":"PinBetterSaveDropdown",onClick:this.handleBoardDropdownClick,ref:this.dropdownRef},o.a.createElement(G.b,{paddingX:4,display:"flex",flex:"grow",alignItems:"center"},o.a.createElement(G.b,{flex:"grow",minWidth:0,overflow:"hidden"},m&&m.title?o.a.createElement(G.K,{truncate:!0,__dangerouslyIncreaseLineHeight:!0,size:R},o.a.createElement("span",{className:s()("PinBetterSave__DropdownText",{"PinBetterSave__DropdownText--lego":"lego"===v})},m.title)):o.a.createElement(G.K,{color:"gray",__dangerouslyIncreaseLineHeight:!0,truncate:!0,size:R},o.a.createElement("span",{className:s()("PinBetterSave__DropdownText",{"PinBetterSave__DropdownText--lego":"lego"===v})},g))),o.a.createElement(G.b,{marginLeft:2,flex:"none","data-test-id":"boardSelectionDropdown"},o.a.createElement("div",{className:s()("PinBetterSave__DownArrowContainer",{"PinBetterSave__DownArrowContainer--lego":"lego"===v})},o.a.createElement(G.n,{accessibilityLabel:d.a._("Select a board you want to save to","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))))),!j&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:s()("PinBetterSave__Button",{"PinBetterSave__Button--lego":"lego"===v}),onClick:this.handleSaveClick,"data-test-id":"PinBetterSaveButton",ref:this.saveButtonRef},o.a.createElement(G.K,{bold:!0,color:"white",size:R},d.a._("Save","BetterSave Save label"))),c&&b&&!!O&&b(O))),P&&o.a.createElement(K.c,{isInModal:!0,onClose:this.handleRepinHide,onBoardCreated:this.handleBoardCreated,sensitiveContentNotice:I,pin:u,pwtAuxData:{pin_create_method:"repin"},setCompletionPromise:this.setBoardSaveCompletionPromise,showCreate:!0,suggestedBoardTitle:x,additionalCreateFields:{is_stl_pin:Object(Q.d)(u)},boardWithSection:S}),j&&o.a.createElement(T,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!a,size:"lg"},o.a.createElement(w.a,{boardResource:r,setBoardWithSection:this.setBoardWithSection,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:u})))}}])&&V(n.prototype,r),a&&V(n,a),t}();$(re,"defaultProps",{backgroundColor:"lightGray",variant:"classic"});t.default=o.a.memo(Object(O.compose)(i.b,Object(a.connect)(function(e,t){var n=e.location,r=e.mostRecentBoard,o=e.pins,a=e.ui,i=e.viewer,c=o[t.pin.id],l=a.postRepinMoreIdeasUpsell;return{carousel_data:c&&c.carousel_data,isLimitedLogin:i.isLimitedLogin,savedInfo:c&&c.savedInfo,selectedItem:c&&c.selectedItem,location:n,postRepinMoreIdeasUpsell:l,mostRecentBoard:r,viewerUserId:i.id}},function(e){return{incrementBoardPinCount:function(t){var n=t.boardId,r=t.sectionId;return e(Object(S.d)({boardId:n,sectionId:r,increment:1}))},save:function(t){return e(Object(L.a)(t))},selectBoardOrSection:function(t){return e(Object(L.b)(t))},setMostRecentBoard:function(t,n){return e(Object(I.a)(t,n))},updateUserPinCount:function(t){return e(Object(B.a)({userId:t,increment:1}))}}}),_.a,Object(z.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function(){return{field_set_key:"board_picker"}}}),Object(z.b)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsShortListResource",options:function(e){return{pin_id:e.pin.id,shortlist_length:2,num_shortlist_suggestions:2,suggestions_only:!0,min_confidence:.5}}}))(function(e){var t=e.suggestedBoardsShortListResource,n=e.initialSelection,r=e.mostRecentBoard;if(n)return o.a.createElement(re,Object.assign({},e,{postRepinUpsellDisabled:!0,unselectedText:n.title}));var a=t&&t.data&&t.data[0];return o.a.createElement(re,Object.assign({},e,{initialSelection:t&&t.isLoaded&&a&&{boardId:a.id,title:a.name,url:a.url}||t&&t.isLoaded&&!a&&r&&{boardId:r.id,title:r.name}||void 0,unselectedText:t&&t.isLoaded?d.a._("Select","BetterSave label to pick a board from the list"):"..."}))}))},qMdf:function(e,t,n){e.exports=function(){return new Promise(function(e){n.e(17).then(function(t){e(n("6VYw"))}.bind(null,n)).catch(n.oe)})}},qZXM:function(e,t,n){"use strict";var r=n("4Qfy"),o=n("MY3l");t.a=function(e){var t=r.a.instance&&r.a.instance.getState()||{viewer:{}};return!t.viewer.isAuth||t.viewer.isLimitedLogin?function(e){return r.a.instance.dispatch(o.a)}:e}},qtmg:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("W/Cr"),i=n("xfx3"),c=n("THYI"),l=n.n(c),s=n("GU18"),u=n("suNN"),d=n("gEaE");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=5,v=27,E=38,_=40,w=13,S=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=h(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==f(o)&&"function"!=typeof o?m(r):o,y(m(m(n)),"state",{isOpen:n.props.editing,recommendations:[],selectedIndex:0,resourceLoaded:!1}),y(m(m(n)),"onDismiss",function(){n.setState({isOpen:!1})}),y(m(m(n)),"mounted",!1),y(m(m(n)),"addHashtag",function(e){n.props.addHashtag(e),n.setState({recommendations:[]})}),y(m(m(n)),"handleKeyDown",function(e){e.keyCode===E?n.handlePrevHashtag(e):e.keyCode===_?n.handleNextHashtag(e):e.keyCode===v?n.handleClose(e):e.keyCode===w&&n.handleSubmit(e)}),y(m(m(n)),"handlePrevHashtag",function(e){e.preventDefault(),n.state.selectedIndex>0&&n.setState(function(e){return{selectedIndex:e.selectedIndex-1}})}),y(m(m(n)),"handleNextHashtag",function(e){e.preventDefault(),n.state.selectedIndex<n.state.recommendations.length-1&&n.setState(function(e){return{selectedIndex:e.selectedIndex+1}})}),y(m(m(n)),"handleClose",function(e){e.preventDefault(),n.setState({recommendations:[]})}),y(m(m(n)),"handleSubmit",function(e){e.preventDefault(),n.addHashtag(n.state.recommendations[n.state.selectedIndex].query)}),y(m(m(n)),"callResource",function(e){(0,n.props.makeCancelablePromise)(l.a.create("HashtagTypeaheadResource",{query:e,showPinCount:!0}).callGet(),"typeahead").then(function(e){if(n.mounted){var t=e.resource_response.data;n.setState({recommendations:t.slice(0,g),resourceLoaded:!0})}}).catch(function(e){e.isCanceled||n.setState({resourceLoaded:!1})})}),n}var n,r,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.query!==this.props.query&&""!==e.query&&this.callResource(e.query)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.recommendations,r=t.resourceLoaded,c=t.selectedIndex,l=this.props,s=l.anchor,f=l.idealDirection,p=n.filter(function(e){return e.query}),h=f||"down",b="flyout_"+p.length;return r&&p.length>0?o.a.createElement("div",{className:"HashtagFlyout"},o.a.createElement(d.k,{key:b,anchor:s,idealDirection:h,onDismiss:this.onDismiss,size:"sm"},o.a.createElement("div",{className:"HashtagRecommendations"},p.length>0?p.map(function(t,n){return o.a.createElement("div",{className:"HashtagItem",key:t.query},o.a.createElement(d.P,{onTouch:function(n){return e.addHashtag(t.query)},fullWidth:!1},o.a.createElement(d.b,{display:"flex",justifyContent:"between",alignItems:"center",color:n===c?"lightGray":"transparent",deprecatedPadding:1},o.a.createElement(d.b,{flex:"grow"},o.a.createElement(d.K,{inline:!0,size:"sm",bold:!0},t.query)),o.a.createElement(d.b,{flex:"none"},o.a.createElement(d.K,{inline:!0,size:"xs"},Object(u.b)(a.a.ngettext("{{ count }} pin","{{ count }} pins",Number(t.pin_count),"label for n pins in hashtag flyout"),{count:o.a.createElement(i.a,{value:Number(t.pin_count),key:"pinCount"})}))))))}):null))):null}}])&&p(n.prototype,r),c&&p(n,c),t}();t.a=Object(s.a)(S)},"r/ec":function(e,t,n){"use strict";var r=n("d6ZO"),o=(n.n(r),n("impO"));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(){var e,n,r,o,c,s,d;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var f=arguments.length,p=new Array(f),h=0;h<f;h++)p[h]=arguments[h];return r=this,o=(e=l(t)).call.apply(e,[this].concat(p)),n=!o||"object"!==a(o)&&"function"!=typeof o?u(r):o,c=u(u(n)),d=function(){var e=n.props,t=e.setActive,r=e.showOnTopOfModal;t("flyout",i(e,["setActive","showOnTopOfModal"]),r||!1)},(s="renderFlyout")in c?Object.defineProperty(c,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[s]=d,n}var n,o,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){this.renderFlyout()}},{key:"componentDidUpdate",value:function(){this.renderFlyout()}},{key:"componentWillUnmount",value:function(){this.props.setActive()}},{key:"render",value:function(){return null}}])&&c(n.prototype,o),d&&c(n,d),t}(),f=function(e){return r.createElement(o.a.Consumer,null,function(t){return r.createElement(d,Object.assign({},e,{setActive:t}))})};f.displayName="MasonryFlyout",t.a=f},rv2a:function(e,t,n){"use strict";var r=n("d6ZO"),o=(n.n(r),n("gEaE"));t.a=function(e){var t=e.children,n=e.description,a=e.error,i=e.id,c=e.label,l=e.required,s=e.onLabelTouch;return r.createElement(o.b,null,r.createElement(o.b,{marginBottom:1},r.createElement(o.q,{htmlFor:i},r.createElement(o.K,{color:a?"orange":"darkGray"},c,l&&r.createElement(o.K,{color:"orange",bold:!0,inline:!0},r.createElement("span",{"aria-hidden":"true"},"*"))))),t,(!!a||!!n)&&r.createElement(o.q,{htmlFor:i},r.createElement(o.b,{marginTop:1},s?r.createElement(o.P,{onTouch:s},r.createElement(o.K,{color:a?"orange":"darkGray",size:"sm"},a||n)):r.createElement(o.K,{color:a?"orange":"darkGray",size:"sm"},a||n))))}},sYje:function(e,t,n){"use strict";var r=n("ZIw6"),o=n("THYI"),a=n.n(o),i=n("/e0Y"),c=n("FJZF"),l=n("1zCC"),s={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog:function(e){var t=e.ga_category||"share_twitter";i.a.trackEvent(t,"click");var n=s._getWindowUrl(e.tweet_path,e.tweet_text);l.a.open(n,s.DIALOG_WIDTH,s.DIALOG_HEIGHT)},_getWindowUrl:function(e,t){return c.a.appendQueryString("https://twitter.com/intent/tweet",{via:"pinterest",url:e?c.a.absolutify(e):void 0,text:t||void 0})}},u=s,d={ObjectTypeToInviteObject:{pin:1,board:2,pinner:3,article:5,did_it:6,community:7},_convertToInviteObject:function(e){return this.ObjectTypeToInviteObject[e]||0},_logShareInvite:function(e,t){var n=this._convertToInviteObject(e.object_type),r=e.invite_channel,o=null==e.invite_category?3:e.invite_category,i=e.object_id;return a.a.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:o,invite_object:n,invite_channel:r},invite_code:t,object_id:i}).callCreate()},createAndLogShareInvite:function(e){return d.createShareInviteData(e).then(function(t){return d._logShareInvite(e,t.invite_code),Promise.resolve(t)},function(e){return Promise.reject(e)})},createShareInviteData:function(e){var t=this._convertToInviteObject(e.object_type),n=e.invite_channel,r=null==e.invite_category?3:e.invite_category,o=e.object_id;return a.a.create("CreateExternalInviteResource",{invite_type:{invite_category:r,invite_object:t,invite_channel:n},object_id:o}).callCreate().then(function(e){return Promise.resolve(e.resource_response.data)},function(e){return Promise.reject(e)})},logShareInvite:function(e,t){t&&d._logShareInvite(e,t.invite_code)},shareFacebookInvite:function(e){return d.createShareInviteData(e).then(function(t){var n=t.invite_url,o=t.invite_code;return n&&r.default.open({type:"share",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback:function(t){t&&t.success&&d._logShareInvite(e,o)}}),Promise.resolve(t)},function(e){return Promise.reject(e)})},shareTwitterInvite:function(e){var t=this._convertToInviteObject(e.object_type);return d.createShareInviteData(e).then(function(n){var r=n.invite_url,o=n.invite_code,a=e.description;return 6===t&&e.name&&(a=e.name),r&&u.openDialog({tweet_path:r,tweet_text:a}),d._logShareInvite(e,o),Promise.resolve(n)},function(e){return Promise.reject(e)})},shareFbMessengerInvite:function(e){return d.createShareInviteData(e).then(function(t){var n=t.invite_url,o=t.invite_code;return n&&r.default.open({type:"send",object_type:e.object_type,object_id:e.object_id,name:e.name,caption:t.title,description:e.description,path:n,picture:e.picture,callback:function(t){t&&t.success&&d._logShareInvite(e,o)}}),Promise.resolve(t)},function(e){return Promise.reject(e)})}};t.a=d},skut:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("d6ZO"),o=(n.n(r),n("IaRT")),a=(n.n(o),n("j1/O"));function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return r=this,o=(e=l(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==i(o)&&"function"!=typeof o?u(r):o,d(u(u(n)),"searchCache",Object.create(null)),d(u(u(n)),"lastSearchedQuery",null),d(u(u(n)),"search",function(e){n.lastSearchedQuery=e,e in n.searchCache?n.props.onTypeaheadSuggestionsChange(n.searchCache[e],e):n.provider.search(e,function(t){var r=t.items;n.searchCache[e]=r,e===n.lastSearchedQuery&&n.props.onTypeaheadSuggestionsChange(r,e)})}),n}var n,o,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),n=t,(o=[{key:"componentDidMount",value:function(){var e=this.props.resourceOptions||{};this.provider=new a.a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}({resource_name:this.props.resourceName},e));var t=this.props.value;null!=t&&this.props.allowSearchOnMount&&this.search(this.props.value)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;null!=t&&t!==this.props.value&&this.search(t)}},{key:"render",value:function(){return this.props.children||null}}])&&c(n.prototype,o),f&&c(n,f),t}();d(f,"defaultProps",{resourceName:"TypeaheadResource"})},uIsx:function(e,t,n){"use strict";t.a=function(e,t){var n={name:e,privacy:r.a.BoardPrivacy.PUBLIC};return function(e){return a.a.create("BoardResource",n).callCreate().then(function(n){var r=n.resource_response.data;return e(t.username&&Object(c.f)("BoardsResource",Object(i.a)(t.username,!1))),r})}};var r=n("BAXv"),o=n("THYI"),a=n.n(o),i=n("HLDn"),c=n("S+Qs")},vBru:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=n("WxTF"),c=n("BAXv"),l=n("CogI"),s=n("W/Cr"),u=n("hkVh"),d=n("NyaW"),f=n("gEaE");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){function t(){var e,n,r,o,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return r=this,o=(e=b(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==p(o)&&"function"!=typeof o?y(r):o,a=y(y(n)),c=function(e){e.preventDefault(),n.props.onBoardCreate()},(i="handleBoardCreateFormSubmit")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,a,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.createBoardError,n=e.inputName,r=e.nameValidatorErrors,a=e.onCancel,d=e.onChangeBoardName,p=e.onChangeBoardPrivacy,h=e.onInvite,b=e.privacy,m=e.saving,y=e.showTitle,g=e.isAdAccountOwner,v=0===r.length,E=b===c.a.BoardPrivacy.SECRET;return o.a.createElement(f.b,{color:"white",height:"100%",position:"absolute",width:"100%",top:!0,left:!0},o.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit,style:{height:"100%"}},o.a.createElement(f.b,{direction:"column",display:"flex",height:"100%"},y&&o.a.createElement(f.b,{display:"flex",marginTop:3,paddingX:6,paddingY:3},o.a.createElement(f.K,{size:"xl",bold:!0},s.a._("Create board"))),o.a.createElement(f.b,{padding:3},o.a.createElement(f.b,{marginBottom:2},o.a.createElement(f.q,{htmlFor:"boardEditName"},o.a.createElement(f.K,null,s.a._("Name")))),o.a.createElement(f.b,null,o.a.createElement(l.a,{error:r.join(", "),id:"boardEditName",name:"boardName",onChange:function(e){var t=e.value;return d(t)},placeholder:s.a._('Like "Places to Go" or "Recipes to Make"'),value:n}))),o.a.createElement(f.j,null),g&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f.b,{padding:3},o.a.createElement(f.b,{marginBottom:2},o.a.createElement(f.q,{htmlFor:"secret"},o.a.createElement(f.K,null,s.a._("Secret","secret board")))),o.a.createElement(f.b,null,o.a.createElement(f.I,{onChange:p,id:"secret",switched:E}))),o.a.createElement(f.j,null),o.a.createElement(f.b,{display:"flex",flex:"grow",overflow:"hidden"},o.a.createElement(f.b,{width:"100%"},o.a.createElement(i.a,{onSelectedCollaboratorsChange:h}))),o.a.createElement(f.j,null)),!g&&o.a.createElement(o.a.Fragment,null,o.a.createElement(f.b,{padding:3},o.a.createElement(f.b,{marginBottom:2},o.a.createElement(f.q,{htmlFor:"protected"},o.a.createElement(f.K,null,s.a._("Protected board (not listed on user's profile)","protected board")))),o.a.createElement(f.b,null,o.a.createElement(f.I,{onChange:function(){},id:"protected",switched:!0,disabled:!0}))),o.a.createElement(f.j,null)),o.a.createElement(f.b,{padding:6},!!t&&o.a.createElement(f.b,{marginBottom:3},o.a.createElement(f.K,{align:"center",bold:!0,color:"red",size:"sm"},t)),o.a.createElement(f.b,{display:"flex",justifyContent:"between"},o.a.createElement(f.c,{inline:!0,onClick:a,text:s.a._("Cancel","cancel board create")}),o.a.createElement(u.a,{disabled:!n.trim()||!v||!!t||m,submitting:m,text:s.a._("Create","create a new board")}))))))}}])&&h(n.prototype,a),d&&h(n,d),t}(),v=Object(d.a)(g),E=n("Td/c"),_=n("JyNp"),w=n("n9Oa"),S=n("Qqx1");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var I=function(e){function t(){var e,n,r,o,a,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return r=this,o=(e=j(t)).call.apply(e,[this].concat(s)),n=!o||"object"!==O(o)&&"function"!=typeof o?P(r):o,a=P(P(n)),c=function(e){var t=n.props,r=t.board,o=t.sectionsResource.data;return e.length>=S.a?[{items:Object(w.a)([r],e),customProps:{inSectionSelection:!0}},{items:Object(w.a)(o,e,"title")}]:[{items:[r],customProps:{inSectionSelection:!0}},{items:o}]},(i="getSections")in a?Object.defineProperty(a,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[i]=c,n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.sectionsResource,n=t.error,r=t.isLoaded,a=e.boardSavedTo,i=e.isSelectMode,c=e.onSectionCreate,l=e.onSectionSelected,u=e.pinId;return o.a.createElement(S.b,{isSelectMode:i,boardSavedTo:a,createButtonLabel:s.a._("Add section","Button for creating a board section"),hasLoadError:!!n,isLoaded:r,getSections:this.getSections,onCreate:c,onSelected:l,pinId:u})}}])&&C(n.prototype,a),i&&C(n,i),t}(),x=Object(_.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function(e){return{board_id:e.board.id}}})(I),T=n("S+Qs"),B=n("MQ2h");function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=2,H=3,U=void 0,W=function(e){var t=[],n=[];return e.forEach(function(e){e.name.match(/^\d/)?n.push(e):t.push(e)}),t.concat(n)};function z(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){N(e,t,n[t])})}return e}({},e?{pin_id:e}:{},t?{username:t}:{},n?{advertiser_id:n,filter:"protected"}:{},{field_set_key:"board_picker",limit:U,shortlist_suggestions:F})}var K=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=D(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==R(o)&&"function"!=typeof o?A(r):o,N(A(A(n)),"getSections",function(e){var t=n.props.boardResource.data;if(!t)return[];var r=t.all_boards,o=t.boards_shortlist,a=W(r);return a.length<=H?[{items:a}]:e.length>=S.a?[{items:Object(w.a)(a,e)}]:[o.length?{items:o,title:s.a._("Top choices")}:{items:[]},{items:a,title:s.a._("All boards","title for board picker all boards section")}]}),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.boardResource,n=t.data,r=t.error,a=t.isLoaded,i=e.boardSavedTo,c=e.isSelectMode,l=e.onBoardCreate,s=e.onBoardSelected,u=e.pinId,d=a&&!!n&&n.all_boards.length<=H;return o.a.createElement(S.b,{isSelectMode:c,boardSavedTo:i,hasLoadError:!!r,hasLowBoardCount:d,isLoaded:a,getSections:this.getSections,onCreate:l,onSelected:s,pinId:u})}}])&&L(n.prototype,a),i&&L(n,i),t}();var G=Object(B.compose)(Object(a.connect)(function(e){var t=e.advertiser,n=e.viewer;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}}),Object(_.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function(e){return z(e.pinId,e.username,e.advertiser_id)}}))(K),Q=n("y2lE");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=V(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==Y(o)&&"function"!=typeof o?Z(r):o,J(Z(Z(n)),"state",{newName:"",selectedSectionBoard:n.props.boardWithSection||null,showCreate:n.props.showCreate||!1,inviteQueue:{}}),J(Z(Z(n)),"close",function(){var e=n.state,t=e.selectedSectionBoard,r=e.showCreate,o=n.props.onClose;r?n.setState({showCreate:!1},n.manageModalTitle):t?n.setState({selectedSectionBoard:null},n.manageModalTitle):o()}),J(Z(Z(n)),"sendInvites",function(e){var t=n.state.inviteQueue;Object.keys(t).forEach(function(n){t[n].resource(e.id,[n])})}),J(Z(Z(n)),"handleInvite",function(e){var t=n.state.inviteQueue;if(t[e.id]){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){J(e,t,n[t])})}return e}({},t);delete r[e.id],n.setState({inviteQueue:r})}else{var o=Object.assign({},t,J({},e.id,e));n.setState({inviteQueue:o})}}),J(Z(Z(n)),"handleBoardSave",function(e){var t=n.state.selectedSectionBoard,r=n.props,o=r.onBoardSave,a=r.onBoardCreated,i=r.invalidatePinBetterSaveResource;if((0,r.invalidateResource)(),i(),t&&"board_section"===e.type)return o(t,e);var c=e,l=c.section_count;!t&&(void 0===l?0:l)>0?n.setState({selectedSectionBoard:c},n.manageModalTitle):(n.sendInvites(e),o(c),a&&a(c))}),J(Z(Z(n)),"handleCreate",function(e){return function(t){t=t||"",n.setState({newName:t,showCreate:!0},n.manageModalTitle);var r=e?13105:13025,o=e?10306:249;n.props.contextLog(101,{component:r,element:o})}}),J(Z(Z(n)),"manageModalTitle",function(){var e=n.props.setModalTitle,t=n.state,r=t.selectedSectionBoard,o=t.showCreate;e&&e(o&&r?s.a._("Add section","Repin title for making a board section"):o&&!r?s.a._("Create board","Repin title for making a new board"):r&&!o?s.a._("Choose section","Repin title for choosing a board section"):s.a._("Choose board","Repin title for choosing a board"))}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,o.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.boardSavedTo,n=e.isRepin,r=e.isSelectMode,a=e.pinId,i=e.setModalTitle,c=e.suggestedBoardTitle,l=this.state,s=l.inviteQueue,u=l.newName,d=l.selectedSectionBoard,p=l.showCreate,h=!!d,b=!i;return o.a.createElement(f.b,{display:"flex",width:"100%",position:"relative"},o.a.createElement(f.b,{width:"100%",display:"flex",direction:"column",marginTop:4},d?o.a.createElement(x,{isSelectMode:r,board:d,boardSavedTo:t,onSectionCreate:this.handleCreate(h),onSectionSelected:this.handleBoardSave}):o.a.createElement(G,{isSelectMode:r,boardSavedTo:t,onBoardCreate:this.handleCreate(h),onBoardSelected:this.handleBoardSave,pinId:a})),p&&!d&&o.a.createElement(v,{prefilledName:u||c,onCancel:this.close,onCreate:this.handleBoardSave,onInvite:this.handleInvite,inviteQueue:s,showTitle:b}),p&&d&&o.a.createElement(E.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:u,isRepin:n,onClearModal:this.close,showTitle:b}))}}])&&q(n.prototype,r),a&&q(n,a),t}();t.a=Object(B.compose)(Q.a,Object(a.connect)(null,function(e,t){return{invalidateResource:function(){e(Object(T.f)("BoardPickerBoardsResource",z(t.pinId)))},invalidatePinBetterSaveResource:function(){e(Object(T.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}))($)},vJNz:function(e,t,n){"use strict";t.b=l;var r=n("d6ZO"),o=(n.n(r),n("iSgY")),a=n("BAXv"),i=n("W/Cr"),c=n("gEaE");function l(e,t){var n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce(function(n,o,a){if(n.length>0&&e&&e.length){var i=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(r.createElement("em",{key:a,style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"}},t.substring(i,i+e.length)),o)}return[o]},[]):t}function s(e){var t=e.disabled,n=e.item,s=e.isSection,u=e.isSelectMode,d=e.isWithinSectionPicker,f=e.saveState,p=e.searchQuery,h=e.selected,b=e.size,m=s?null:n,y=s?n:null,g=y&&y.title||m&&m.name||"",v="",E=!1,_="",w=0;if(m){v=m.image_cover_url,E=m.is_collaborative,_=m.privacy;var S=m.section_count;w=void 0===S?0:S}var O=l(p,g),C=_===a.a.BoardPrivacy.SECRET,j=!t&&(h||!!f),k=!d&&w>0,P=w>0?"boardWithSection":"boardWithoutSection",I=u?i.a._("Select","Board select button label"):i.a._("Save","Pin save button label");return r.createElement(c.b,{alignItems:"center",color:j?"lightGray":"white",display:"flex",paddingX:"lg"===b?4:6,paddingY:2,"data-test-id":P},r.createElement(c.b,{height:"lg"===b?40:36,width:"lg"===b?40:36,color:"lightGray",overflow:"hidden",shape:"rounded",marginRight:2,flex:"none"},v?r.createElement(c.p,{src:v,alt:g,fit:"cover",naturalWidth:1,naturalHeight:1}):r.createElement("span",null)),r.createElement(c.b,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow"},r.createElement(c.K,{color:t?"gray":"darkGray",bold:!0,size:"lg"===b?"xl":"md",truncate:!0},O),(k||!j)&&r.createElement(c.b,{alignItems:"center",display:"flex"},C&&r.createElement(o.a,{type:"secret"}),E&&r.createElement(o.a,{type:"group"}),k&&r.createElement(o.a,{type:"sections"})),!k&&j&&!f&&r.createElement(c.b,{alignItems:"center","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,dangerouslySetInlineStyle:{__style:{backgroundColor:"#e60023",borderRadius:"4px"}}},!u&&r.createElement(c.b,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},r.createElement(c.n,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})),r.createElement(c.K,{bold:!0,color:"white",size:"sm",overflow:"normal"},I)),!k&&j&&"loading"===f&&r.createElement(c.b,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35},r.createElement(c.G,{accessibilityLabel:i.a._("Saving","Accessibility label for saving a pin to a board"),show:!0}))))}s.defaultProps={size:"md"},t.a=s},wUWH:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("zTOp"),i=n.n(a),c=n("mHth");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){return null},b=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=u(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==l(o)&&"function"!=typeof o?f(r):o,p(f(f(n)),"view",function(e){var t=e.placement_id,r=e.experience_id;n.props.experienceClient.viewExperience(t,r)}),p(f(f(n)),"complete",function(e){var t=e.placement_id,r=e.experience_id,o=n.props,a=o.experienceClient,i=o.preventRemoval;i?a.completeExperience(t,r,i):a.completeExperience(t,r)}),p(f(f(n)),"dismiss",function(e){var t=e.placement_id,r=e.experience_id,o=n.props,a=o.experienceClient,i=o.preventRemoval;i?a.dismissExperience(t,r,i):a.dismissExperience(t,r)}),n}var n,a,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){if(!this.props.disableAutoView){var e=this.getExperience(this.props);e&&this.shouldRenderExperience(e)&&this.view(e)}}},{key:"componentDidUpdate",value:function(e,t){if(!this.props.disableAutoView){var n=this.getExperience(e),r=this.getExperience(this.props);r&&this.shouldRenderExperience(r)&&(n&&n.experience_id===r.experience_id||this.view(r))}}},{key:"getExperience",value:function(e){return e.experienceClient.experienceForPlacement}},{key:"shouldRenderExperience",value:function(e){if(e){var t=e.type,n=e.experience_id;if(this.props.experienceIds&&this.props.experienceIds.includes(n))return!0;if(!this.props.experienceIds){if(this.props.type&&this.props.type===t)return!0;if(this.props.transitionType&&this.props.transitionType===t)return!0}}return!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.disableAutoView,a=this.getExperience(this.props);if(a&&this.shouldRenderExperience(a)&&n){if(i()(n)){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}({},a,{complete:function(){return e.complete(a)},dismiss:function(){return e.dismiss(a)}});return r&&(c.view=function(){return e.view(a)}),n(c)}return o.a.Children.only(n)}return o.a.createElement(h,null)}}])&&s(n.prototype,a),c&&s(n,c),t}();t.a=Object(c.a)(b)},xGyi:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=n("HEYN"),c=n("W/Cr"),l=n("Y5gj"),s=n("JyNp"),u=n("MQ2h"),d=(n.n(u),n("n9Oa")),f=n("vJNz"),p=n("Qqx1"),h=n("gEaE");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w="NO_SECTION_VALUE";function S(e){var t=e.section,n=e.hovered,r=e.searchQuery;return o.a.createElement(h.b,null,o.a.createElement(h.b,{color:n?"lightGray":"white",display:"flex",padding:2,shape:"rounded"},o.a.createElement(h.b,{flex:"grow"},o.a.createElement(h.K,{bold:!0},Object(f.b)(r,t.title)))),t.id===w&&o.a.createElement(h.j,null))}var O=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return r=this,a=(e=g(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==b(a)&&"function"!=typeof a?E(r):a,_(E(E(n)),"state",{searchQuery:""}),_(E(E(n)),"getPickerSections",function(){var e=n.state.searchQuery,t=n.props,r=t.sectionsResource,o=t.mergingFromSectionId,a=r&&r.data||[];return a=o?a.filter(function(e){return e.id!==o}):[{id:w,title:c.a._("No section","default dropdown option for selecting a board section on pin edit")}].concat(m(a)),e.length>=p.a&&(a=Object(d.a)(a,e,"title")),[{items:a}]}),_(E(E(n)),"createBtnDisabled",function(){var e=n.props.sectionsResource,t=n.state.searchQuery;return!(!e||!e.data)&&e.data.some(function(e){return e.title.toLowerCase()===t.toLocaleLowerCase()})}),_(E(E(n)),"handleSectionCreate",function(){var e=n.props,t=e.board,r=e.onSectionChange,o=e.sectionsResource,a=e.dispatch,c=e.onSectionCreate,l=n.state.searchQuery;c?c(l):a&&t.id&&a(Object(i.a)({boardId:t.id,name:l})).then(function(e){o&&o.refreshData(),n.setState({searchQuery:""}),r(e)})}),_(E(E(n)),"handleSectionSelected",function(e){var t=n.props.onSectionChange;e.id===w?(t(null),n.setState({searchQuery:""})):(t(e),n.setState({searchQuery:""}))}),_(E(E(n)),"handleSearchQueryUpdate",function(e){n.setState({searchQuery:e})}),_(E(E(n)),"renderRow",function(e){var t=e.item,r=e.hovered,a=n.state.searchQuery;return o.a.createElement(S,{section:t,hovered:r,searchQuery:a})}),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=e.selectedSectionId;if(this.props.selectedSectionId!==t){var n=this.props.sectionsResource;n&&n.refreshData()}}},{key:"render",value:function(){var e,t=this.props,n=t.sectionsResource,r=t.selectedSectionId,a=t.mergingFromSectionId,i=t.selectedSectionName,s=this.state.searchQuery,u=a?c.a._("Pick a section","default dropdown option for selecting a board section to merge to"):c.a._("No section","default dropdown option for selecting a board section on pin edit");r?(n&&n.data&&(e=n.data.find(function(e){return e.id===r})),u=e&&e.title||u):i&&(u=i);return o.a.createElement(h.b,null,o.a.createElement(h.G,{accessibilityLabel:c.a._("loading board picker","accessibility text for loading spinner"),show:!n||!n.isLoaded}),(!n||n&&n.isLoaded)&&o.a.createElement(l.a,{dropdownValue:u,onCreate:a?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:s,sections:this.getPickerSections(),createBtnDisabled:this.createBtnDisabled()}))}}])&&y(n.prototype,a),s&&y(n,s),t}();t.b=Object(u.compose)(Object(a.connect)(),Object(s.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function(e){return{board_id:e.board.id}}},{allowStale:!1}))(O)},ymrh:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("DUIN"),i=n("djV9"),c=n("+51L"),l=n("uHNA"),s=n("9FFf"),u=n.n(s),d=n("W9T9"),f=n("lip+"),p=n("BAXv"),h=n("uIsx"),b=n("HEYN"),m=n("Esb+"),y=n.n(m),g=n("W/Cr"),v=n("R6a3"),E=n("hkVh"),_=n("rgtM"),w=n("FTnl"),S=n("kxCB"),O=n("gEaE");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return r=this,a=(e=k(t)).call.apply(e,[this].concat(c)),n=!a||"object"!==C(a)&&"function"!=typeof a?I(r):a,x(I(I(n)),"state",{deleting:!1}),x(I(I(n)),"unmounted",!1),x(I(I(n)),"handleConfirm",function(){if(!n.state.deleting){var e=n.props.onDeletePin;n.setState({deleting:!0}),e().then(function(){return n.handleDeleteDidComplete()}).catch(function(e){return n.handleDeleteDidComplete(e)})}}),x(I(I(n)),"handleDeleteDidComplete",function(e){n.unmounted||n.setState({deleting:!1}),e||n.props.showToast(function(e){var t=e.onHide;return o.a.createElement(w.a,{onHide:t,text:g.a._("Pin deleted!","User deleted their pin")})})}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,o.a.PureComponent),n=t,(r=[{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){var e=this.props.onDismiss,t=this.state.deleting;return o.a.createElement(v.a,{accessibilityCloseLabel:g.a._("Close","Accessible label for button to close confirm delete pin modal"),heading:g.a._("Are you sure?","Confirm the user wants to delete the pin"),accessibilityModalLabel:g.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:o.a.createElement(O.b,{display:"flex",justifyContent:"end",marginLeft:-1,marginRight:-1},o.a.createElement(O.b,{paddingX:1},o.a.createElement(O.c,{onClick:e,text:g.a._("Cancel")})),o.a.createElement(O.b,{paddingX:1},o.a.createElement(_.a,{id:"confirm-delete-pin"},o.a.createElement(E.a,{color:"red",onClick:this.handleConfirm,text:g.a._("Delete Pin"),submitting:t}))))},o.a.createElement(O.b,{padding:4},o.a.createElement(O.K,null,g.a._("Once you delete a Pin, you can't undo it!"))))}}])&&j(n.prototype,r),a&&j(n,a),t}(),B=Object(S.a)(T);B.displayName="DeletePinConfirmation";var R=B,L=n("NCQM");function D(e){var t=e.board,n=e.canEdit,o=e.onBoardChange,a=e.onBoardCreate;return r.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(O.q,{htmlFor:"BoardPicker"},r.createElement(O.K,{size:"sm"},g.a._("Board")))),n?r.createElement(O.b,{xs:{column:12},md:{column:8}},r.createElement(L.a,{id:"BoardPicker",board:t,onBoardChosen:o,onBoardCreate:a})):r.createElement(O.b,{xs:{column:12},md:{column:8},paddingY:2},r.createElement(O.K,{bold:!0,size:"sm"},t.name)))}var M=n("3ZhG");function A(e){var t=e.canEdit,n=e.description,o=e.onDescriptionChange,a=e.errorMessage;return r.createElement(r.Fragment,null,r.createElement(O.j,null),r.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(O.q,{htmlFor:"DescriptionField"},r.createElement(O.K,{size:"sm"},g.a._("Description")))),t?r.createElement(O.b,{xs:{column:12},md:{column:8}},r.createElement(O.b,null,r.createElement(O.L,{id:"DescriptionField",placeholder:g.a._("Tell us about this Pin..."),value:n,onChange:o,hasError:(a||"").length>0})),!!a&&r.createElement(O.b,{justifyContent:"center"},r.createElement(M.a,{errorMessage:a,htmlFor:"pin-edit-description"}))):r.createElement(O.b,{xs:{column:12},md:{column:8},paddingY:2},r.createElement(O.K,{bold:!0,size:"sm"},n))))}var N=n("xGyi");function F(e){var t=e.board,n=e.canEdit,o=e.currentSection,a=e.onSectionChange,i=e.onSectionCreate,c=e.sectionId,l=e.sectionName,s=t.id?N.b:N.a;return r.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:3},r.createElement(O.q,{htmlFor:"SectionPicker"},r.createElement(O.K,{size:"sm"},g.a._("Section","label for editing a Pin's board section")))),n?r.createElement(O.b,{xs:{column:12},md:{column:8}},r.createElement(s,{id:"SectionPicker",board:t,onSectionChange:a,selectedSectionId:c,selectedSectionName:l,onSectionCreate:i})):r.createElement(O.b,{xs:{column:12},md:{column:8},paddingY:2},r.createElement(O.K,{bold:!0,size:"sm"},o&&!(t||{}).is_collaborative?o.title:g.a._("No section","default dropdown option for selecting a board section on pin edit"))))}function H(e){var t=e.onTitleChange,n=e.title,o=e.errorMessage;return r.createElement(r.Fragment,null,r.createElement(O.j,null),r.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(O.q,{htmlFor:"TitleField"},r.createElement(O.K,{size:"sm"},g.a._("Title","Label for editing title of pin")))),r.createElement(O.b,{xs:{column:12},md:{column:8}},r.createElement(O.b,null,r.createElement(O.M,{id:"TitleField",value:n,onChange:t,hasError:(o||"").length>0})),!!o&&r.createElement(O.b,{justifyContent:"center"},r.createElement(M.a,{errorMessage:o,htmlFor:"pin-edit-title"})))))}function U(e){var t=e.onChangeWebsite,n=e.link,o=e.errorMessage;return r.createElement(r.Fragment,null,r.createElement(O.j,null),r.createElement(O.b,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(O.b,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(O.q,{htmlFor:"WebsiteField"},r.createElement(O.K,{size:"sm"},g.a._("Website")))),r.createElement(O.b,{xs:{column:12},md:{column:8}},r.createElement(O.b,null,r.createElement(O.M,{id:"WebsiteField",value:n,onChange:t,hasError:(o||"").length>0})),!!o&&r.createElement(O.b,{justifyContent:"center"},r.createElement(M.a,{errorMessage:o,htmlFor:"pin-edit-website"})))))}var W=n("Cjb7"),z=n("THYI"),K=n.n(z),G=n("pN+K"),Q=n("EfF6"),Y=n("woYD"),q=n("D+PP"),V=n("MQ2h"),X=n("FrUj"),Z=n("NmQ5"),J=n("S+Qs");function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ae(e,t,n[t])})}return e}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){return Boolean(e&&e.trim().length)}function ce(e,t){var n=ie(e),r=ie(t);return(n||r)&&e!==t}var le=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return r=this,o=(e=ne(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==$(o)&&"function"!=typeof o?oe(r):o,ae(oe(oe(n)),"state",{board:n.props.data&&n.props.data.board||null,commentsDisabled:n.props.data&&n.props.data.comments_disabled||!1,description:n.props.data&&n.props.data.description.trim()||"",link:n.props.data&&n.props.data.link||"",photosDisabled:n.props.data&&n.props.data.did_it_disabled||!1,sectionId:n.props.data&&n.props.data.section&&n.props.data.section.id||null,sectionName:n.props.data&&n.props.data.section&&n.props.data.section.title||null,showDeleteConfirmation:!1,carousel_data:n.props.data&&n.props.data.carousel_data||null,title:n.props.data&&n.props.data.title||"",isProcessing:!1,currentIndex:void 0!==n.props.carouselSlotCurrentIndex?n.props.carouselSlotCurrentIndex:n.props.data&&n.props.data.carousel_data&&n.props.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1}),ae(oe(oe(n)),"onClickDeleteButton",function(){return n.setState({showDeleteConfirmation:!0})}),ae(oe(oe(n)),"onHideConfirmation",function(){return n.setState({showDeleteConfirmation:!1})}),ae(oe(oe(n)),"updateCarouselSlotIndex",function(){var e=n.props.carouselSlotCurrentIndex;n.setState({currentIndex:void 0!==e?e:n.props.data&&n.props.data.carousel_data&&n.props.data.carousel_data.index||0})}),ae(oe(oe(n)),"handleBoardChange",function(e){var t=n.state.board.id;e.id!==t&&n.setState({board:e,sectionId:null,sectionName:null})}),ae(oe(oe(n)),"createBoard",function(e){var t=n.state.board;!t.id&&t.name&&e&&(0,n.props.dispatch)(Object(h.a)(t.name,e)).then(function(e){if(n._isMounted){var t=n.state,r=t.sectionId,o=t.sectionName;!r&&o?(n.setState({board:e}),n.createSection()):(n.handleBoardChange(e),n.handleSave())}})}),ae(oe(oe(n)),"handleBoardCreateClick",function(e){if(e){var t={name:e,privacy:p.a.BoardPrivacy.PUBLIC};n.setState({board:t,sectionId:null,sectionName:null})}}),ae(oe(oe(n)),"createSection",function(){var e=n.state,t=e.board,r=e.sectionName;if(r)if(t.id){var o={boardId:t.id,name:r};(0,n.props.dispatch)(Object(b.a)(o)).then(function(e){n._isMounted&&(n.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),n.handleSave())})}else n.createBoard()}),ae(oe(oe(n)),"handleSectionCreateClick",function(e){0!==e.length&&(n.state.board&&n.setState({sectionId:null,sectionName:e}))}),ae(oe(oe(n)),"handleSectionChange",function(e){return n.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null})}),ae(oe(oe(n)),"handleDeletePin",function(){var e=n.props,t=e.data,r=e.pinId,o=e.onDelete,a=e.onHide,i=e.changeBoardPinCount,c=e.changeUserPinCount,l=e.advertiser_id,s=ee({},l?{advertiser_id:l}:{},{id:r});return K.a.create("PinResource",s).callDelete().then(function(){if(n._isMounted){var e=t.board.id,l=t.pinner.id,s=t.section;i({boardId:e,sectionId:s&&s.id||void 0,increment:-1}),c({userId:l,increment:-1}),W.a.instance.publish(e,"pinDeleted",r),W.a.instance.publish(l,"pinDeleted"),W.a.instance.publish(r,"pinDeleted"),a(),o&&o()}})}),ae(oe(oe(n)),"sanitizeCarouselData",function(e){var t=n.state.carousel_data;if(e&&(t=e),t){var r=t.carousel_slots;if(r){var o={carousel_slots:[]};return r.forEach(function(e){var t={};t.description=e.details||"",t.title=e.title||"",t.link=e.link||"",o.carousel_slots.push(t)}),o}}return null}),ae(oe(oe(n)),"triggerBoardAndSectionCreate",function(e){return function(){var t=n.state,r=t.board,o=t.sectionId,a=t.sectionName;!r.id&&r.name?n.createBoard(e):!o&&a?n.createSection():n.handleSave()}}),ae(oe(oe(n)),"handleSave",function(){n.setState({isProcessing:!0});var e,t=n.props,r=t.advertiser_id,o=t.pinId,a=n.state,i=a.carousel_data,c=a.shouldShowValidationLinkFormatError;if(i){var l=n.sanitizeCarouselData();l&&(e=JSON.stringify(l))}var s=n.props,u=s.data,d=u.board,f=u.comments_disabled,p=u.did_it_disabled,h=u.title,b=u.description,m=u.link,g=u.section,v=u.carousel_data,E=s.invalidatePinResource,_=s.completeResourceFetch,w=s.onHide,S=n.state,O=S.board,C=void 0===O?d:O,j=S.commentsDisabled,k=S.currentIndex,P=S.photosDisabled,I=S.title,x=S.description,T=S.sectionId,B=S.carousel_data,R=c?m:n.state.link,L=ee({board_id:C.id,board_section_id:T,carousel_data_json:e,description:x,disable_comments:j,disable_did_it:P,id:o,link:R,title:I},r?{advertiser_id:r}:{}),D=g&&g.id||null,M=C.id,A=d.id,N=A!==M,F=(Boolean(D)||Boolean(T))&&D!==T,H=ce(h,I),U=ce(b,x),W=ce(m,R),z=Boolean(B)&&Boolean(v)&&!y()(B,v);N||F||H||U||W||z||(f!==j||p!==P)?K.a.create("PinResource",L).callUpdate().then(function(e){var t=e.resource_response;if(n._isMounted){var r=n.props,o=r.changeBoardPinCount,a=r.onSubmit,i=r.pinId,c=r.pinMoved,l=r.view,s=r.viewParameter;(N||F)&&M&&A&&(c({selectedPinIds:[i],source:{boardId:A,sectionId:D},target:{boardId:M,sectionId:T}}),o({boardId:M,sectionId:T||void 0,increment:1}),o({boardId:A,sectionId:D||void 0,increment:-1})),a&&M&&C.url&&a({boardId:M,title:C.name,sectionId:T,url:C.url}),w(),E(i);var u=t.data;u.carousel_data&&(u.carousel_data.index=k),_(u);var d={};d.objectId=i,N&&(d.board_was_modified=!0),!N&&F&&(d.board_section_was_modified=!0),U&&(d.original_pin_description=b,d.edited_pin_description=x),z&&(d.original_carousel_data=JSON.stringify(n.sanitizeCarouselData(v)),d.edited_carousel_data=JSON.stringify(n.sanitizeCarouselData(B))),Object(Y.a)(2,ee({component:208,view:l,viewParameter:s},d))}}).catch(function(){var e=n.state,t=e.shouldShowValidationTitleError,r=e.shouldShowValidationDescriptionError,o=e.shouldShowValidationLinkFormatError;n.setState({isProcessing:!1,shouldShowGenericUpdateError:!t&&!r&&!o})}):(w(),E(o)),n.setState({isProcessing:!1})}),ae(oe(oe(n)),"handleTextChanges",function(e,t){var r=n.state.carousel_data;if(r){var o=u()(r),a=o.carousel_slots,i=void 0===a?[]:a,c=n.state,l=c.currentIndex,s=c.shouldApplyTextToAll,d=c.description,f=c.link,p=c.title,h=n.valueIsValidForType(e,t);switch(s?i.forEach(function(n){return n[t]=e}):i[l]&&(i[l][t]=e),t){case"details":var b=0===l?e:d;n.setState({description:b,carousel_data:o||null,shouldShowValidationDescriptionError:!h,shouldShowGenericUpdateError:!1});break;case"link":var m=0===l?e:f;n.setState({link:m,carousel_data:o||null,shouldShowValidationLinkFormatError:!h,shouldShowGenericUpdateError:!1});break;case"title":var y=0===l?e:p;n.setState({title:y,carousel_data:o||null,shouldShowValidationTitleError:!h,shouldShowGenericUpdateError:!1})}}}),ae(oe(oe(n)),"handleDescriptionChange",function(e){var t=e.value,r=n.valueIsValidForType(t,"description");n.setState({description:t,shouldShowValidationDescriptionError:!r,shouldShowGenericUpdateError:!1})}),ae(oe(oe(n)),"handleCarouselDetailsChange",function(e){var t=e.value;n.handleTextChanges(t,"details")}),ae(oe(oe(n)),"handleTitleChange",function(e){var t=e.value,r=n.valueIsValidForType(t,"title");n.setState({title:t,shouldShowValidationTitleError:!r,shouldShowGenericUpdateError:!1})}),ae(oe(oe(n)),"handleCarouselTitleChange",function(e){var t=e.value;n.handleTextChanges(t,"title")}),ae(oe(oe(n)),"valueIsValidForType",function(e,t){switch(g.a._("Not a valid url.","Validation error for an improperly formated url"),t){case"details":case"description":return e.length<=500;case"link":return e.length>0&&0===Object(X.s)([Object(X.r)()],e).length;case"title":return e.length<=100;default:return!0}}),ae(oe(oe(n)),"handleWebsiteChange",function(e){var t=e.value,r=n.valueIsValidForType(t,"link");n.setState({link:t,shouldShowValidationLinkFormatError:!r,shouldShowGenericUpdateError:!1})}),ae(oe(oe(n)),"handleCarouselWebsiteChange",function(e){var t=e.value;n.handleTextChanges(t,"link")}),ae(oe(oe(n)),"handleCommentChange",function(e){return n.setState({commentsDisabled:!e.value})}),ae(oe(oe(n)),"handlePhotoChange",function(e){return n.setState({photosDisabled:!e.value})}),ae(oe(oe(n)),"handleShouldApplyToAll",function(e){if(e){var t=n.state,r=t.currentIndex,o=t.carousel_data;if(!o)return;var a=u()(o),i=a.carousel_slots,c=i[r],l=c.details,s=c.link,d=c.title;i.forEach(function(e){e.details=l,e.title=d,e.link=s}),n.setState({carousel_data:a,shouldApplyTextToAll:e})}else n.setState({shouldApplyTextToAll:e})}),ae(oe(oe(n)),"handleCarouselSlider",function(e){var t=n.state.carousel_data,r=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<r&&n.setState({currentIndex:e})}),ae(oe(oe(n)),"handleMouseEnter",function(){n.setState({shouldShowCarouselSliders:!0})}),ae(oe(oe(n)),"handleMouseLeave",function(){n.setState({shouldShowCarouselSliders:!1})}),n}var n,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this._isMounted=!0,this.updateCarouselSlotIndex()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.data,n=e.carouselSlotCurrentIndex;t&&this.setState({board:t.board,commentsDisabled:t.comments_disabled,description:t.description&&t.description.trim(),link:t.link,photosDisabled:t.did_it_disabled,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,carousel_data:t.carousel_data,currentIndex:void 0!==n?n:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"generateIndexIndicator",value:function(){var e=this.state,t=e.currentIndex,n=e.carousel_data,r=n&&n.carousel_slots&&n.carousel_slots.length||1;return r<2?"":o.a.createElement(O.b,{direction:"row",padding:2},o.a.createElement(O.q,{htmlFor:"CardsIndex"},o.a.createElement(O.K,{size:"sm"},t+1,"/",r)))}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.onHide,a=t.resourceLoaded,s=t.pinId,u=this.state,p=u.board,h=u.commentsDisabled,b=u.description,m=u.link,y=u.photosDisabled,E=u.sectionId,w=u.sectionName,S=u.showDeleteConfirmation,C=u.title,j=u.isProcessing,k=u.carousel_data,P=u.shouldApplyTextToAll,I=u.currentIndex,x=u.shouldShowCarouselSliders,T=u.shouldShowValidationTitleError,B=u.shouldShowValidationDescriptionError,L=u.shouldShowValidationLinkFormatError,N=u.shouldShowGenericUpdateError,W=k&&k.carousel_slots&&k.carousel_slots.length>0&&k.carousel_slots[I]||{},z=W.details,K=void 0===z?"":z,G=W.link,Q=void 0===G?"":G,Y=W.title,q=void 0===Y?"":Y;if(S)return o.a.createElement(R,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});var V=n&&n.story_pin_data_id,X=k&&k.carousel_slots&&k.carousel_slots.length>1,Z=X?g.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins"):g.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin"),J=X?g.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins"):g.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin"),$=X?g.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):g.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin"),ee=n&&(n.access||[]).includes("write")||this.props.canEdit,te=function(e){return ee&&!n.is_repin&&(n.native_creator&&n.native_creator.id===e||X&&n.pinner.id===e||n.link_domain&&n.link_domain.official_user&&n.link_domain.official_user.id===e||!!n.domain&&n.pinner&&n.pinner.domain_url&&n.pinner.domain_url.includes(n.domain))};return o.a.createElement(v.a,{accessibilityCloseLabel:g.a._("Close","Accessible label for button to close edit pin modal"),heading:g.a._("Edit this Pin","Edit a previously saved pin"),accessibilityModalLabel:g.a._("Edit your previously saved pin","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:r,footer:o.a.createElement(O.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},o.a.createElement(O.b,null,o.a.createElement(_.a,{id:"delete-pin-button"},o.a.createElement(O.c,{text:g.a._("Delete"),onClick:this.onClickDeleteButton}))),N&&o.a.createElement(O.b,{display:"flex",marginLeft:2,marginTop:2,justifyContent:"center"},o.a.createElement(M.a,{errorMessage:g.a._("Sorry! There was an error editing your Pin.","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),o.a.createElement(f.a,null,function(t){return o.a.createElement(O.b,{display:"flex",justifyContent:"between",marginLeft:-2,marginRight:-2},o.a.createElement(O.b,{paddingX:2},o.a.createElement(O.c,{text:g.a._("Cancel"),onClick:r})),o.a.createElement(O.b,{paddingX:2,"data-test-id":"edit-pin-save"},o.a.createElement(O.c,{text:g.a._("Save"),color:"red",onClick:e.triggerBoardAndSectionCreate(t)})))}))},!a||j?o.a.createElement(O.b,{paddingX:12,paddingY:9},o.a.createElement(O.G,{accessibilityLabel:g.a._("loading","Accessible label for the edit pin loading icon"),show:!0})):o.a.createElement(f.a,null,function(t){return o.a.createElement(O.b,{md:{display:"flex"},justifyContent:"between"},o.a.createElement(O.b,{xs:{column:12},md:{column:9}},o.a.createElement(D,{board:p||n.board,canEdit:ee,onBoardChange:e.handleBoardChange,onBoardCreate:e.handleBoardCreateClick}),o.a.createElement(F,{board:p||n.board,canEdit:ee,currentSection:n.section,onSectionChange:e.handleSectionChange,sectionId:E,sectionName:w,onSectionCreate:e.handleSectionCreateClick}),function(e){return te(e.id)}(t)&&o.a.createElement(H,{onTitleChange:X?e.handleCarouselTitleChange:e.handleTitleChange,title:X?q:C,errorMessage:T?Z:""}),!V&&(X||!k)&&o.a.createElement(A,{canEdit:ee,description:X?K:b,onDescriptionChange:X?e.handleCarouselDetailsChange:e.handleDescriptionChange,errorMessage:B?J:""}),function(e){return te(e.id)&&!(n.aggregated_pin_data&&n.aggregated_pin_data.is_shop_the_look)&&!V}(t)&&(X||!k)&&o.a.createElement(U,{link:X?Q:m,onChangeWebsite:X?e.handleCarouselWebsiteChange:e.handleWebsiteChange,errorMessage:L?$:""}),X&&o.a.createElement(O.b,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},o.a.createElement(O.b,{paddingY:2},o.a.createElement(O.q,{htmlFor:"applyTextToAll"},o.a.createElement(O.K,null,g.a._("Apply text to all","Apply title, description, link to all cards")))),o.a.createElement(O.b,{paddingX:2,paddingY:2},o.a.createElement(O.I,{onChange:function(t){return e.handleShouldApplyToAll(t.value)},id:"applyTextToAll",switched:P}))),n.can_delete_did_it_and_comments&&o.a.createElement(d.a,{commentsDisabled:h,onCommentChange:e.handleCommentChange,onPhotoChange:e.handlePhotoChange,photosDisabled:y})),o.a.createElement(O.b,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},X?e.generateIndexIndicator():"",o.a.createElement(O.u,{width:236},o.a.createElement(O.b,{onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave},o.a.createElement(O.u,{shape:"rounded",wash:!0},X&&x&&o.a.createElement(O.b,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},o.a.createElement(l.a,{handleCarouselSwipe:e.handleCarouselSlider,carouselIndex:I,carousel_data:k,pinId:s,isEditMode:!0})),X?o.a.createElement(i.a,{carouselIndex:I,isCloseup:!1,lowResOnly:!1,carousel_data:k,pinId:s,isEditMode:!0}):o.a.createElement(O.p,{alt:b,color:"#efefef",naturalHeight:n.images["474x"].height,src:n.images["474x"].url,naturalWidth:n.images["474x"].width})),X&&o.a.createElement(c.a,{carouselIndex:I,carousel_data:k,pinId:s,handleCarouselSwipe:e.handleCarouselSlider,isEditMode:!0})))))}))}}])&&te(n.prototype,a),s&&te(n,s),t}(),se=function(e,t){return{field_set_key:"detailed",id:e,preserve_component_state:t}};t.a=Object(V.compose)(Object(G.b)({name:"PinResource",options:function(e){return se(e.pinId,!0)}}),Object(a.connect)(function(e,t){var n=e.advertiser,r=e.viewer;return r.isAuth&&n&&n.owner_user_id!==r.id?{advertiser_id:n.id}:{}},function(e){return{invalidatePinResource:function(t){return e(Object(J.f)("PinResource",se(t,!0)))},changeBoardPinCount:function(t){return e(Object(Q.d)(t))},changeUserPinCount:function(t){return e(Object(q.a)(t))},completeResourceFetch:function(t){return e(Object(J.b)("PinResource",se(t.id,!1),t))},pinMoved:Object(V.bindActionCreators)(Z.b,e)}}))(le)}});